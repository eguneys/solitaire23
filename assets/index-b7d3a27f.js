var ja=Object.defineProperty;var Xa=(t,a,e)=>a in t?ja(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e;var l=(t,a,e)=>(Xa(t,typeof a!="symbol"?a+"":a,e),e);(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const h of i)if(h.type==="childList")for(const r of h.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function e(i){const h={};return i.integrity&&(h.integrity=i.integrity),i.referrerPolicy&&(h.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?h.credentials="include":i.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(i){if(i.ep)return;i.ep=!0;const h=e(i);fetch(i.href,h)}})();var Va=Object.defineProperty,qa=(t,a,e)=>a in t?Va(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,o=(t,a,e)=>(qa(t,typeof a!="symbol"?a+"":a,e),e);const K={info(t){console.log(t)},warn(t){console.warn(t)},error(t){console.error(t)}},B=1e-6,ea=1,ta=4,aa=8,sa=16,b=class{constructor(t,a){o(this,"x"),o(this,"y"),this.x=t,this.y=a}static get unit_x(){return b.make(1,0)}static get unit_y(){return b.make(0,1)}static get right(){return b.make(1,0)}static get up(){return b.make(0,-1)}static get down(){return b.make(0,1)}static get left(){return b.make(-1,0)}static get zero(){return b.make(0,0)}static get one(){return b.make(1,1)}add(t){return new b(this.x+t.x,this.y+t.y)}sub(t){return new b(this.x-t.x,this.y-t.y)}mul(t){return new b(this.x*t.x,this.y*t.y)}div(t){return new b(this.x/t.x,this.y/t.y)}scale(t){return new b(this.x*t,this.y*t)}add_in(t){return this.x+=t.x,this.y+=t.y,this}sub_in(t){return this.x-=t.x,this.y-=t.y,this}mul_in(t){return this.x*=t.x,this.y*=t.y,this}scale_in(t){return this.x*=t,this.y*=t,this}set_in(t){this.x=t.x,this.y=t.y}equals(t){return Math.abs(this.x-t.x)<B&&Math.abs(this.y-t.y)<B}distance(t){return this.sub(t).length}get negate(){return new b(-this.x,-this.y)}get abs(){return new b(Math.abs(this.x),Math.abs(this.y))}get normal(){let t=Math.sqrt(this.x*this.x+this.y*this.y);return t<=0?new b(0,0):new b(this.x/t,this.y/t)}get turn_right(){return new b(-this.y,this.x)}get turn_left(){return new b(this.y,-this.x)}get length(){return Math.sqrt(this.x*this.x+this.y*this.y)}get length_squared(){return this.x*this.x+this.y*this.y}get angle(){return Math.atan2(this.y,this.x)}};let n=b;o(n,"copy",t=>new b(t.x,t.y)),o(n,"make",(t,a)=>new b(t,a)),o(n,"dot",(t,a)=>t.x*a.x+t.y*a.y),o(n,"transform",(t,a)=>new b(t.x*a.m11+t.y*a.m21+a.m31,t.x*a.m12+t.y*a.m22+a.m32)),o(n,"transform_normal",(t,a)=>new b(t.x*a.m11+t.y*a.m21,t.x*a.m12+t.y*a.m22)),o(n,"from_angle",(t,a=1)=>new b(Math.cos(t)*a,Math.sin(t)*a)),o(n,"approach",(t,a,e)=>t.sub(a).length_squared<=e*e?a:t.add(a.sub(t).normal).scale(e)),o(n,"lerp",(t,a,e)=>e===0?t:e===1?a:t.add(a.sub(t).scale(e))),o(n,"lerp_bezier",(t,a,e,s)=>{let{lerp:i}=b;return i(i(t,a,s),i(a,e,s),s)}),o(n,"reflect",(t,a)=>{let e=t.x*a.x+t.y*a.y;return new b(t.x-2*e*a.x,t.y-2*e*a.y)}),o(n,"min",(t,a)=>new b(Math.min(t.x,a.x),Math.min(t.y,a.y))),o(n,"max",(t,a)=>new b(Math.max(t.x,a.x),Math.max(t.y,a.y)));const me=class{constructor(t,a,e){o(this,"x"),o(this,"y"),o(this,"z"),this.x=t,this.y=a,this.z=e}add(t){return new me(this.x+t.x,this.y+t.y,this.z+this.z)}sub(t){return new me(this.x-t.x,this.y-t.y,this.z-this.z)}get length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}get normal(){let{length:t}=this;return new me(this.x/t,this.y/t,this.z/t)}};let se=me;o(se,"make",(t,a,e)=>new me(t,a,e)),o(se,"dot",(t,a)=>t.x*a.x+t.y*a.y+t.z*a.z),o(se,"cross",(t,a)=>new me(t.y*a.z-t.z*a.y,t.z*a.x-t.x*a.z,t.x*a.y-t.y*a.x));const ia=class{constructor(t,a,e,s){o(this,"x"),o(this,"y"),o(this,"z"),o(this,"w"),this.x=t,this.y=a,this.z=e,this.w=s}};let Ka=ia;o(Ka,"make",(t,a,e,s)=>new ia(t,a,e,s));const q=class{constructor(t,a,e,s){o(this,"x"),o(this,"y"),o(this,"w"),o(this,"h"),this.x=t,this.y=a,this.w=e,this.h=s}add(t){return new q(this.x+t.x,this.y+t.y,this.w,this.h)}sub(t){return new q(this.x-t.x,this.y-t.y,this.w,this.h)}add_in(t){return this.x+=t.x,this.y+=t.y,this}sub_in(t){return this.x-=t.x,this.y-=t.y,this}equals(t){return Math.abs(this.x-t.x)<B&&Math.abs(this.y-t.y)<B&&Math.abs(this.w-t.w)<B&&Math.abs(this.h-t.h)<B}get left(){return this.x}get right(){return this.x+this.w}get top(){return this.y}get bottom(){return this.y+this.h}get center(){return new n(this.center_x,this.center_y)}get center_x(){return this.x+this.w/2}get center_y(){return this.y+this.h/2}get top_left(){return new n(this.x,this.y)}get top_right(){return new n(this.x+this.w,this.y)}get bottom_right(){return new n(this.w+this.w,this.y+this.h)}get bottom_left(){return new n(this.x,this.y+this.h)}get center_left(){return new n(this.x,this.center_y)}get center_right(){return new n(this.x+this.w,this.center_y)}get middle_top(){return new n(this.center_x,this.y)}get middle_bottom(){return new n(this.center_x,this.y+this.h)}get left_line(){return Y.make_x(this.left,this.top,this.left,this.bottom)}get right_line(){return Y.make_x(this.right,this.top,this.right,this.bottom)}get top_line(){return Y.make_x(this.left,this.top,this.right,this.top)}get bottom_line(){return Y.make_x(this.left,this.bottom,this.right,this.bottom)}contains_point(t){return t.x>=this.x&&t.x<this.x+this.w&&t.y>=this.y&&t.y<this.y+this.h}contains_rect(t){return t.x>=this.x&&t.x+t.w<this.x+this.w&&t.y>=this.y&&t.y+t.h<this.y+this.h}overlaps(t){return this.x+this.w>=t.x&&this.y+this.h>=t.y&&this.x<t.x+t.w&&this.y<t.y+t.h}overlaps_rect(t){let a=new q(0,0,0,0);return this.x+this.w>=t.x&&this.x<t.x+t.w&&(a.x=Math.max(this.x,t.x),a.w=Math.min(this.x+this.w,t.x+t.w)-a.x),this.y+this.h>=t.y&&this.y<t.y+t.h&&(a.y=Math.max(this.y,t.y),a.h=Math.min(this.y+this.h,t.y+t.h)-a.y),a}intersects(t){return t.intersects_rect(this)}intersects_at(t,a){return t.intersects_rect(this,a)}intersects_from_to(t,a){return this.intersects(new Y(t,a))}intersects_from_to_at(t,a,e){return this.intersects_at(new Y(t,a),e)}intersection_point(t){let a=new n(0,0);return t.intersects_rect(this,a)?a:n.zero}intersection_point_from_to(t,a){let e=new n(0,0);return new Y(t,a).intersects_rect(this,e)?e:n.zero}scale(t){return new q(this.x*t,this.y*t,this.w*t,this.h*t)}scale_xy(t,a){return new q(this.x*t,this.y*a,this.w*t,this.h*a)}inflate(t){return new q(this.x-t,this.y-t,this.w+t*2,this.h+t*2)}inflate_xy(t,a){return new q(this.x-t,this.y-a,this.w+t*2,this.h+a*2)}get_sector(t){let a=0;return t.x<this.left?a|=ea:t.x>=this.right&&(a|=ta),t.y<this.top?a|=aa:t.y>=this.bottom&&(a|=sa),a}};let m=q;o(m,"make",(t=0,a=0,e=0,s=0)=>new q(t,a,e,s)),o(m,"transform",(t,a)=>new q(t.x*a.m11+t.y*a.m21+a.m31,t.x*a.m12+t.y*a.m22+a.m32,t.w*a.m11+t.h*a.m21,t.w*a.m12+t.h*a.m22)),o(m,"from_points",(t,a)=>{let e=n.min(t,a),s=n.max(t,a);return new q(e.x,e.y,s.x-e.x,s.y-e.y)});const ut=class{constructor(t,a){this.center=t,this.radius=a}project(t){let a=n.dot(this.center.sub(t.scale(this.radius)),t),e=n.dot(this.center.add(t.scale(this.radius)),t);return[a,e]}};let Pt=ut;o(Pt,"make_x",(t,a,e)=>new ut(n.make(t,a),e)),o(Pt,"make",(t,a)=>new ut(t,a));const Ne=class{constructor(t,a){o(this,"a"),o(this,"b"),this.a=t,this.b=a}get bounds(){return m.from_points(this.a,this.b)}closest_point(t){let a=this.b.sub(this.a),e=t.sub(this.a),s=n.dot(e,a)/(a.x*a.x+a.y*a.y);return s<0?s=0:s>1&&(s=1),a.scale(s).add(this.a)}intersects_rect(t,a){let e=t.get_sector(this.a),s=t.get_sector(this.b);if(e==s||e&s)return!1;let i=e|s;return!!(i&aa&&this.intersects_line(t.top_line,a)||i&sa&&this.intersects_line(t.bottom_line,a)||i&ea&&this.intersects_line(t.left_line,a)||i&ta&&this.intersects_line(t.right_line,a))}intersects_line(t,a){let e=this.b.sub(this.a),s=t.b.sub(t.a),i=e.x*s.y-e.y*s.x;if(i>-B&&i<B)return!1;let h=t.a.sub(this.a),r=(h.x*s.y-h.y*s.x)/i;if(r<0||r>1)return!1;let d=(h.x*e.y-h.y*e.x)/i;return d<0||d>1?!1:(a&&a.set_in(e.scale(r).add(this.a)),!0)}project(t){let a=this.a.x*t.x+this.a.y*t.y,e=a,s=a;return a=this.b.x*t.x+this.b.y*t.y,e=a<e?a:e,s=a>s?a:s,[e,s]}add(t){return new Ne(this.a.add(t),this.b.add(t))}sub(t){return new Ne(this.a.sub(t),this.b.sub(t))}};let Y=Ne;o(Y,"make_x",(t,a,e,s)=>new Ne(n.make(t,a),n.make(e,s))),o(Y,"make",(t,a)=>new Ne(t,a));const T=class{constructor(t,a,e,s,i,h){o(this,"m11"),o(this,"m12"),o(this,"m21"),o(this,"m22"),o(this,"m31"),o(this,"m32"),this.m11=t,this.m12=a,this.m21=e,this.m22=s,this.m31=i,this.m32=h}static get identity(){return new T(1,0,0,1,0,0)}mul(t){return T.mul(this,t)}add(t){return T.add(this,t)}sub(t){return T.sub(this,t)}mul_in(t){let a=T.mul(this,t);return this.m11=a.m11,this.m12=a.m12,this.m21=a.m21,this.m22=a.m22,this.m31=a.m31,this.m32=a.m32,this}get invert(){let{m11:t,m12:a,m21:e,m22:s,m31:i,m32:h}=this,r=1/(t*s-e*a);return new T(s*r,-a*r,-e*r,t*r,(e*h-i*s)*r,(i*a-t*h)*r)}get scaling_factor(){let{m11:t,m12:a,m21:e,m22:s,m31:i,m32:h}=this;return Math.sqrt(t*t+a*a)}equals(t){return Math.abs(this.m11-t.m11)<B&&Math.abs(this.m12-t.m12)<B&&Math.abs(this.m21-t.m21)<B&&Math.abs(this.m22-t.m22)<B&&Math.abs(this.m31-t.m31)<B&&Math.abs(this.m32-t.m32)<B}};let v=T;o(v,"make",(t,a,e,s,i,h)=>new T(t,a,e,s,i,h)),o(v,"copy",t=>new T(t.m11,t.m12,t.m21,t.m22,t.m31,t.m32)),o(v,"create_translation",t=>new T(1,0,0,1,t.x,t.y)),o(v,"create_translation_x",(t,a)=>new T(1,0,0,1,t,a)),o(v,"create_scale",(t,a)=>{if(a){let e=a.x*(1-t),s=a.y*(1-t);return new T(t,0,0,t,e,s)}return new T(t,0,0,t,0,0)}),o(v,"create_scale_xy",(t,a,e)=>{if(e){let s=e.x*(1-t),i=e.y*(1-a);return new T(t,0,0,a,s,i)}return new T(t,0,0,a,0,0)}),o(v,"create_scale_v",(t,a)=>{if(a){let e=a.x*(1-t.x),s=a.y*(1-t.y);return new T(t.x,0,0,t.y,e,s)}return new T(t.x,0,0,t.y,0,0)}),o(v,"create_rotation",t=>{let a=Math.cos(t),e=Math.sin(t);return new T(a,e,-e,a,0,0)}),o(v,"create_transform",(t,a,e,s)=>{let i=T.identity;return(a.x!==0||a.y!==0)&&(i=T.create_translation_x(-a.x,-a.y)),(e.x!==1||e.y!==1)&&(i=i.mul(T.create_scale_v(e))),s!==0&&(i=i.mul(T.create_rotation(s))),(t.x!==0||t.y!==0)&&(i=i.mul(T.create_translation(t))),i}),o(v,"add",(t,a)=>new T(t.m11+a.m11,t.m12+a.m12,t.m21+a.m21,t.m22+a.m22,t.m31+a.m31,t.m32+a.m32)),o(v,"sub",(t,a)=>new T(t.m11-a.m11,t.m12-a.m12,t.m21-a.m21,t.m22-a.m22,t.m31-a.m31,t.m32-a.m32)),o(v,"mul",(t,a)=>new T(t.m11*a.m11+t.m12*a.m21,t.m11*a.m12+t.m12*a.m22,t.m21*a.m11+t.m22*a.m21,t.m21*a.m12+t.m22*a.m22,t.m31*a.m11+t.m32*a.m21+a.m31,t.m31*a.m12+t.m32*a.m22+a.m32));const W=class{constructor(t,a,e,s,i,h,r,d,p,c,g,f,y,w,k,M){o(this,"m11"),o(this,"m12"),o(this,"m13"),o(this,"m14"),o(this,"m21"),o(this,"m22"),o(this,"m23"),o(this,"m24"),o(this,"m31"),o(this,"m32"),o(this,"m33"),o(this,"m34"),o(this,"m41"),o(this,"m42"),o(this,"m43"),o(this,"m44"),this.m11=t,this.m12=a,this.m13=e,this.m14=s,this.m21=i,this.m22=h,this.m23=r,this.m24=d,this.m31=p,this.m32=c,this.m33=g,this.m34=f,this.m41=y,this.m42=w,this.m43=k,this.m44=M}static get identity(){return new W(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}mul(t){let{m11:a,m12:e,m13:s,m14:i,m21:h,m22:r,m23:d,m24:p,m31:c,m32:g,m33:f,m34:y,m41:w,m42:k,m43:M,m44:O}=this,z=W.identity;return z.m11=a*t.m11+e*t.m21+s*t.m31+i*t.m41,z.m12=a*t.m12+e*t.m22+s*t.m32+i*t.m42,z.m13=a*t.m13+e*t.m23+s*t.m33+i*t.m43,z.m14=a*t.m14+e*t.m24+s*t.m34+i*t.m44,z.m21=h*t.m11+r*t.m21+d*t.m31+p*t.m41,z.m22=h*t.m12+r*t.m22+d*t.m32+p*t.m42,z.m23=h*t.m13+r*t.m23+d*t.m33+p*t.m43,z.m24=h*t.m14+r*t.m24+d*t.m34+p*t.m44,z.m31=c*t.m11+g*t.m21+f*t.m31+y*t.m41,z.m32=c*t.m12+g*t.m22+f*t.m32+y*t.m42,z.m33=c*t.m13+g*t.m23+f*t.m33+y*t.m43,z.m34=c*t.m14+g*t.m24+f*t.m34+y*t.m44,z.m41=w*t.m11+k*t.m21+M*t.m31+O*t.m41,z.m42=w*t.m12+k*t.m22+M*t.m32+O*t.m42,z.m43=w*t.m13+k*t.m23+M*t.m33+O*t.m43,z.m44=w*t.m14+k*t.m24+M*t.m34+O*t.m44,z}};let Q=W;o(Q,"create_ortho",(t,a,e,s)=>{let i=W.identity;return i.m11=2/t,i.m12=i.m13=i.m14=0,i.m22=-2/a,i.m21=i.m23=i.m24=0,i.m33=1/(e-s),i.m31=i.m32=i.m34=0,i.m41=i.m42=0,i.m43=e/(e-s),i.m44=1,i}),o(Q,"create_ortho_offcenter",(t,a,e,s,i,h)=>{let r=W.identity;return r.m11=2/(a-t),r.m12=r.m13=r.m14=0,r.m22=2/(s-e),r.m21=r.m23=r.m24=0,r.m33=1/(i-h),r.m31=r.m32=r.m34=0,r.m41=(t+a)/(t-a),r.m42=(s+e)/(e-s),r.m43=i/(i-h),r.m44=1,r}),o(Q,"create_perspective",(t,a,e,s)=>{let i=1/Math.tan(t*.5),h=i/a,r=W.identity;return r.m11=h,r.m12=r.m13=r.m14=0,r.m22=i,r.m21=r.m23=r.m24=0,r.m31=r.m32=0,r.m33=s/(e-s),r.m34=-1,r.m41=r.m42=r.m44=0,r.m43=e*s/(e-s),r}),o(Q,"create_translation",(t,a,e)=>{let s=W.identity;return s.m41=t,s.m42=a,s.m43=e,s}),o(Q,"create_scale",(t,a,e)=>{let s=W.identity;return s.m11=t,s.m22=a,s.m33=e,s}),o(Q,"create_lookat",(t,a,e)=>{let s=t.sub(a).normal,i=se.cross(e,s).normal,h=se.cross(s,i),r=W.identity;return r.m11=i.x,r.m12=h.x,r.m13=s.x,r.m14=0,r.m21=i.y,r.m22=h.y,r.m23=s.y,r.m24=0,r.m31=i.z,r.m32=h.z,r.m33=s.z,r.m34=0,r.m41=-se.dot(i,t),r.m42=-se.dot(h,t),r.m43=-se.dot(s,t),r.m44=1,r});const fe=class{constructor(t,a,e,s){this.r=t,this.g=a,this.b=e,this.a=s}get rgb(){return this.r<<16|this.g<<8|this.b}};let u=fe;o(u,"hex",t=>new fe((t&16711680)>>16,(t&65280)>>8,t&255,255)),o(u,"lerp",(t,a,e)=>(e<0&&(e=0),e>1&&(e=1),new fe(t.r+(a.r-t.r)*e,t.g+(a.g-t.g)*e,t.b+(a.b-t.b)*e,t.a+(a.a-t.a)*e))),o(u,"white",new fe(255,255,255,255)),o(u,"black",new fe(0,0,0,255)),o(u,"red",new fe(255,0,0,255));const Ga=(t,a)=>t-Math.floor(t/a)*a;class Ya{constructor(){o(this,"ticks_per_second",1e3),o(this,"ticks",0),o(this,"seconds",0),o(this,"delta",0),o(this,"previous_ticks",0),o(this,"previous_seconds",0),o(this,"pause_timer",0)}pause_for(a){a>=this.pause_timer&&(this.pause_timer=a)}on_interval(a,e=0){let s=this.seconds,i=this.delta,h=Math.floor((s-e-i)/a),r=Math.floor((s-e)/a);return h<r}on_time(a,e){let s=Math.floor(a)-this.delta;return a>=e&&s<e}between_interval(a,e=0){let s=this.seconds;return Ga(s-e,a*2)>=a}}const F=new Ya,ha=class{constructor(t){o(this,"canvas"),this.config=t}get get_draw_size(){return this.canvas?[this.canvas.width,this.canvas.height]:[this.config.width,this.config.height]}present(){}update(){}gl_context_create(){return this.canvas=document.createElement("canvas"),this.canvas.width=this.config.width,this.canvas.height=this.config.height,this.canvas.getContext("webgl2")}init(){}ready(){}};let ra=ha;o(ra,"try_make_platform",t=>new ha(t));var L=(t=>(t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.SrcColor=2]="SrcColor",t[t.OneMinusSrcColor=3]="OneMinusSrcColor",t[t.DstColor=4]="DstColor",t[t.OneMinusDstColor=5]="OneMinusDstColor",t[t.SrcAlpha=6]="SrcAlpha",t[t.OneMinusSrcAlpha=7]="OneMinusSrcAlpha",t[t.DstAlpha=8]="DstAlpha",t[t.OneMinusDstAlpha=9]="OneMinusDstAlpha",t[t.ConstantColor=10]="ConstantColor",t[t.OneMinusConstantColor=11]="OneMinusConstantColor",t[t.ConstantAlpha=12]="ConstantAlpha",t[t.OneMinusConstantAlpha=13]="OneMinusConstantAlpha",t))(L||{}),Ee=(t=>(t[t.Add=0]="Add",t[t.Subtract=1]="Subtract",t[t.Min=2]="Min",t[t.Max=3]="Max",t))(Ee||{});const qe=class{constructor(t,a,e,s,i,h){this.color_op=t,this.color_src=a,this.color_dst=e,this.alpha_op=s,this.alpha_src=i,this.alpha_dst=h}};let Ke=qe;o(Ke,"Normal",new qe(0,1,7,0,1,7)),o(Ke,"NonPremultiplied",new qe(0,6,7,0,6,7)),o(Ke,"Additive",new qe(0,6,1,0,6,1));const Wa=t=>[t.m11,t.m12,t.m13,t.m14,t.m21,t.m22,t.m23,t.m24,t.m31,t.m32,t.m33,t.m34,t.m41,t.m42,t.m43,t.m44],Lt=t=>{let a=0;switch(t.type){case A.Float:a=1;break;case A.Float2:a=2;break;case A.Float3:a=3;break;case A.Float4:a=4;break;case A.Mat3x2:a=9;break;case A.Mat4x4:a=16;break}return a*t.array_length};var A=(t=>(t[t.None=0]="None",t[t.Float=1]="Float",t[t.Float2=2]="Float2",t[t.Float3=3]="Float3",t[t.Float4=4]="Float4",t[t.Mat3x2=5]="Mat3x2",t[t.Mat4x4=6]="Mat4x4",t[t.Texture2D=7]="Texture2D",t[t.Sampler2D=8]="Sampler2D",t))(A||{}),Ge=(t=>(t[t.None=0]="None",t[t.Vertex=1]="Vertex",t[t.Fragment=2]="Fragment",t[t.Both=3]="Both",t))(Ge||{});class lt{constructor(a,e,s,i=0,h=0,r=0){this.name=a,this.type=e,this.shader=s,this.register_index=i,this.buffer_index=h,this.array_length=r}}class Mt{constructor(a){o(this,"stride",0),this.attributes=a,a.forEach(e=>{switch(e.type){case C.Float:this.stride+=4;break;case C.Float2:this.stride+=8;break;case C.Float3:this.stride+=12;break;case C.Float4:this.stride+=16;break;case C.UByte4:this.stride+=4;break}})}}const na=class{constructor(){o(this,"index",0),o(this,"type",C.None),o(this,"normalized",!1)}};let ee=na;o(ee,"make",(t,a,e)=>{let s=new na;return s.index=t,s.type=a,s.normalized=e,s});var C=(t=>(t[t.None=0]="None",t[t.Float=1]="Float",t[t.Float2=2]="Float2",t[t.Float3=3]="Float3",t[t.Float4=4]="Float4",t[t.UByte4=5]="UByte4",t))(C||{}),at=(t=>(t[t.None=0]="None",t[t.R=1]="R",t[t.RGBA=2]="RGBA",t[t.DepthStencil=3]="DepthStencil",t[t.Count=4]="Count",t))(at||{}),Se=(t=>(t[t.None=0]="None",t[t.Linear=1]="Linear",t[t.Nearest=2]="Nearest",t))(Se||{}),Te=(t=>(t[t.None=0]="None",t[t.Clamp=1]="Clamp",t[t.Repeat=2]="Repeat",t))(Te||{});const St=class{constructor(t,a,e){this.filter=t,this.wrap_x=a,this.wrap_y=e}static get get_default(){return new St(1,2,2)}};let _e=St;o(_e,"make",(t=1,a=2,e=2)=>new St(t,a,e));const oa=class{constructor(){}};let we=oa;o(we,"from_image",t=>oa.create(t.width,t.height,2,t)),o(we,"create",(t,a,e,s)=>{let i=_.renderer.create_texture(t,a,e);return i&&s&&i.set_data(s),i});class le{get width(){return this.textures[0].width}get height(){return this.textures[0].height}texture(a){return this.textures[a]}}o(le,"create",(t,a)=>_.renderer.create_target(t,a));class Le{}o(Le,"create",()=>_.renderer.create_mesh());class Ie{}o(Ie,"create",t=>_.renderer.create_shader(t));const la=class{constructor(t){o(this,"m_shader"),o(this,"m_textures",[]),o(this,"m_samplers",[]),o(this,"m_data"),this.m_shader=t;let a=t.uniforms,e=0;a.forEach(s=>{s.type!==0&&(s.type,s.type,e+=Lt(s))}),this.m_data=new Float32Array(e)}get shader(){return this.m_shader}get data(){return this.m_data}get_sampler(t,a=0){}get_sampler_at(t){return this.m_samplers[t]}get_texture(t,a=0){}get_texture_at(t){return this.m_textures[t]}set_sampler_at_location(t,a){this.m_samplers[t]=a}set_texture_at_location(t,a){this.m_textures[t]=a}set_texture(t,a,e=0){let s=this.m_shader.uniforms.find(i=>i.type===7&&i.name===t);s&&(this.m_textures[s.register_index+e]=a)}set_sampler(t,a,e=0){let s=this.m_shader.uniforms.find(i=>i.type===8&&i.name===t);s&&(this.m_samplers[s.register_index+e]=a)}set_matrix(t,a){let e=0;this.m_shader.uniforms.find(s=>s.type===7||s.type===8||s.type===0?!1:s.name===t?(this.m_data.set(Wa(a),e),!0):(e+=Lt(s),!1))||K.warn(`No uniform ${t} exists`)}has_value(t){return!!this.m_shader.uniforms.find(a=>a.name===t)}};let st=la;o(st,"create",t=>new la(t));class zt{constructor(){o(this,"target",_.backbuffer),o(this,"mesh"),o(this,"material"),o(this,"has_viewport",!1),o(this,"has_scissor",!1),o(this,"viewport",m.make()),o(this,"scissor",m.make()),o(this,"index_start",0),o(this,"index_count",0),o(this,"instance_count",0),o(this,"blend",Ke.Normal)}perform(){let a=this;a.target||(a.target=_.backbuffer,K.warn("Trying to draw with an invalid Target; falling back to back buffer"));let e=a.mesh.index_count;if(a.index_start+a.index_count>e){if(K.warn(`Trying to draw more indices than exists in the index buffer (${a.index_start}-${a.index_start+a.index_count} / ${e}; trimming extra indices`),a.index_start>a.index_count)return;a.index_count=a.index_count-a.index_start}let s=a.mesh.instance_count;a.instance_count>s&&(K.warn(`Trying to draw more instances than exists in the index buffer (${a.instance_count} / ${s}); trimming extra instances`),a.instance_count=s);let i=n.make(a.target.width,a.target.height);a.has_viewport?a.viewport=a.viewport.overlaps_rect(m.make(0,0,i.x,i.y)):(a.viewport.x=0,a.viewport.y=0,a.viewport.w=i.x,a.viewport.h=i.y),a.has_scissor&&(a.scissor=a.scissor.overlaps_rect(m.make(0,0,i.x,i.y))),_.renderer.render(a)}}var Qa=`#version 300 es
uniform mat4 u_matrix;
layout(location=0) in vec2 a_position;
layout(location=1) in vec2 a_tex;
layout(location=2) in vec4 a_color;
layout(location=3) in vec4 a_type;
out vec2 v_tex;
out vec4 v_col;
out vec4 v_type;

void main(void) {
  gl_Position = u_matrix * vec4(a_position.xy, 0, 1);
  v_tex = a_tex;
  v_col = a_color;
  v_type = a_type;
}`,Za=`#version 300 es
precision mediump float;

uniform sampler2D u_texture;
in vec2 v_tex;
in vec4 v_col;
in vec4 v_type;
out vec4 o_color;

void main(void) {
  vec4 color = texture(u_texture, v_tex);
  o_color = 
          v_type.x * color * v_col +
          v_type.y * color.a * v_col +
          v_type.z * v_col;
}`;const Ja=[Qa,Za];class es extends Ie{constructor(a){super(),o(this,"m_id"),o(this,"m_uniforms",[]),o(this,"uniform_locations",[]),this.data=a;let e=_.renderer.gl.createShader(_.renderer.gl.VERTEX_SHADER);{_.renderer.gl.shaderSource(e,a[0]),_.renderer.gl.compileShader(e);let r=_.renderer.gl.getShaderInfoLog(e);if(r){K.error(r);return}}let s=_.renderer.gl.createShader(_.renderer.gl.FRAGMENT_SHADER);{_.renderer.gl.shaderSource(s,a[1]),_.renderer.gl.compileShader(s);let r=_.renderer.gl.getShaderInfoLog(s);if(r&&r.length>0){K.error(r);return}}let i=_.renderer.gl.createProgram();_.renderer.gl.attachShader(i,e),_.renderer.gl.attachShader(i,s),_.renderer.gl.linkProgram(i);let h=_.renderer.gl.getProgramInfoLog(i);if(_.renderer.gl.deleteShader(e),_.renderer.gl.deleteShader(s),h&&h.length>0){K.error(h);return}{let r=_.renderer.gl.getProgramParameter(i,_.renderer.gl.ACTIVE_UNIFORMS),d=0;for(let p=0;p<r;p++){let{name:c,type:g,size:f}=_.renderer.gl.getActiveUniform(i,p);if(g===_.renderer.gl.SAMPLER_2D){let y=new lt(c,A.Texture2D,Ge.Fragment,d,0,f);this.uniform_locations.push(_.renderer.gl.getUniformLocation(i,c)),this.m_uniforms.push(y);let w=new lt(c+"_sampler",A.Sampler2D,Ge.Fragment,d,0,f);this.uniform_locations.push(_.renderer.gl.getUniformLocation(i,c)),this.m_uniforms.push(w),d++}else{let y=A.None;if(g===_.renderer.gl.FLOAT)y=A.Float;else if(g===_.renderer.gl.FLOAT_VEC2)y=A.Float2;else if(g===_.renderer.gl.FLOAT_VEC3)y=A.Float3;else if(g===_.renderer.gl.FLOAT_VEC4)y=A.Float4;else if(g===_.renderer.gl.FLOAT_MAT3x2)y=A.Mat3x2;else if(g===_.renderer.gl.FLOAT_MAT4)y=A.Mat4x4;else{K.error("Unsupported uniform type");break}let w=new lt(c,y,Ge.Both,0,0,f);this.uniform_locations.push(_.renderer.gl.getUniformLocation(i,c)),this.m_uniforms.push(w)}}}this.m_id=i}get gl_id(){return this.m_id}get uniforms(){return this.m_uniforms}}class ts extends Le{constructor(){super(),o(this,"m_id"),o(this,"m_index_format"),o(this,"m_vertex_buffer"),o(this,"m_instance_buffer"),o(this,"m_index_buffer"),o(this,"m_index_count"),o(this,"m_vertex_count"),o(this,"m_instance_count"),o(this,"m_vertex_size"),o(this,"m_instance_size"),o(this,"m_index_size"),this.m_id=_.renderer.gl.createVertexArray()}get gl_id(){return this.m_id}get gl_index_format(){return this.m_index_format}get gl_index_size(){return this.m_index_size}get index_count(){return this.m_index_count}get instance_count(){return this.m_instance_count}get vertex_count(){return this.m_vertex_count}vertex_data(a,e){this.m_vertex_count=e.byteLength,_.renderer.gl.bindVertexArray(this.m_id),this.m_vertex_buffer||(this.m_vertex_buffer=_.renderer.gl.createBuffer()),this.m_vertex_size=this.gl_mesh_assign_attributes(this.m_vertex_buffer,_.renderer.gl.ARRAY_BUFFER,a,0),_.renderer.gl.bindBuffer(_.renderer.gl.ARRAY_BUFFER,this.m_vertex_buffer),_.renderer.gl.bufferData(_.renderer.gl.ARRAY_BUFFER,e,_.renderer.gl.DYNAMIC_DRAW),_.renderer.gl.bindVertexArray(null)}index_data(a){let e=new Uint32Array(a);this.m_index_count=e.length,_.renderer.gl.bindVertexArray(this.m_id),this.m_index_buffer||(this.m_index_buffer=_.renderer.gl.createBuffer()),this.m_index_format=_.renderer.gl.UNSIGNED_INT,this.m_index_size=4,_.renderer.gl.bindBuffer(_.renderer.gl.ELEMENT_ARRAY_BUFFER,this.m_index_buffer),_.renderer.gl.bufferData(_.renderer.gl.ELEMENT_ARRAY_BUFFER,e,_.renderer.gl.DYNAMIC_DRAW)}gl_mesh_assign_attributes(a,e,s,i){_.renderer.gl.bindBuffer(e,a);let h=0;return s.attributes.forEach(r=>{let d=_.renderer.gl.UNSIGNED_BYTE,p=0,c=1;r.type===C.Float&&(d=_.renderer.gl.FLOAT,p=4,c=1),r.type===C.Float2&&(d=_.renderer.gl.FLOAT,p=4,c=2),r.type===C.Float3&&(d=_.renderer.gl.FLOAT,p=4,c=3),r.type===C.Float4&&(d=_.renderer.gl.FLOAT,p=4,c=4),r.type===C.UByte4&&(d=_.renderer.gl.UNSIGNED_BYTE,p=1,c=4);let g=r.index;_.renderer.gl.enableVertexAttribArray(g),_.renderer.gl.vertexAttribPointer(g,c,d,r.normalized,s.stride,h),_.renderer.gl.vertexAttribDivisor(g,i),h+=c*p}),s.stride}}class as extends le{constructor(a,e,s){super(),o(this,"m_id"),o(this,"m_attachments"),o(this,"m_width"),o(this,"m_height"),this.m_attachments=[],this.m_id=_.renderer.gl.createFramebuffer(),this.m_width=a,this.m_height=e,_.renderer.gl.bindFramebuffer(_.renderer.gl.FRAMEBUFFER,this.m_id),s.forEach((i,h)=>{let r=we.create(a,e,i);r.framebuffer_parent=!0,this.m_attachments.push(r),i!==at.DepthStencil?_.renderer.gl.framebufferTexture2D(_.renderer.gl.FRAMEBUFFER,_.renderer.gl.COLOR_ATTACHMENT0+h,_.renderer.gl.TEXTURE_2D,r.gl_id,0):_.renderer.gl.framebufferTexture2D(_.renderer.gl.FRAMEBUFFER,_.renderer.gl.DEPTH_STENCIL_ATTACHMENT,_.renderer.gl.TEXTURE_2D,r.gl_id,0)})}get gl_id(){return this.m_id}get textures(){return this.m_attachments}clear(a,e=1,s=0){_.renderer.clear_backbuffer(a,e,s,this.m_id)}}class ss extends we{constructor(a,e,s){super(),o(this,"m_id"),o(this,"m_width"),o(this,"m_height"),o(this,"m_sampler"),o(this,"m_format"),o(this,"m_gl_internal_format"),o(this,"m_gl_format"),o(this,"m_gl_type"),o(this,"framebuffer_parent"),this.m_id=0,this.m_width=a,this.m_height=e,this.m_sampler=new _e(Se.None,Te.None,Te.None),this.m_format=s,this.framebuffer_parent=!1,this.m_gl_internal_format=_.renderer.gl.RED,this.m_gl_format=_.renderer.gl.RED,this.m_gl_type=_.renderer.gl.UNSIGNED_BYTE,s===at.RGBA?(this.m_gl_internal_format=_.renderer.gl.RGBA,this.m_gl_format=_.renderer.gl.RGBA,this.m_gl_type=_.renderer.gl.UNSIGNED_BYTE):K.error(`Unsupported Texture format ${s}`),this.m_id=_.renderer.gl.createTexture(),_.renderer.gl.activeTexture(_.renderer.gl.TEXTURE0),_.renderer.gl.bindTexture(_.renderer.gl.TEXTURE_2D,this.m_id),_.renderer.gl.texImage2D(_.renderer.gl.TEXTURE_2D,0,this.m_gl_internal_format,a,e,0,this.m_gl_format,this.m_gl_type,null)}get is_framebuffer(){return this.framebuffer_parent}get width(){return this.m_width}get height(){return this.m_height}set_data(a){_.renderer.gl.activeTexture(_.renderer.gl.TEXTURE0),_.renderer.gl.bindTexture(_.renderer.gl.TEXTURE_2D,this.m_id),_.renderer.gl.texImage2D(_.renderer.gl.TEXTURE_2D,0,this.m_gl_internal_format,this.m_width,this.m_height,0,this.m_gl_format,this.m_gl_type,a)}update_sampler(a){this.m_sampler!==a&&(this.m_sampler=a,_.renderer.gl.bindTexture(_.renderer.gl.TEXTURE_2D,this.m_id),_.renderer.gl.texParameteri(_.renderer.gl.TEXTURE_2D,_.renderer.gl.TEXTURE_MIN_FILTER,this.m_sampler.filter===Se.Nearest?_.renderer.gl.NEAREST:_.renderer.gl.LINEAR),_.renderer.gl.texParameteri(_.renderer.gl.TEXTURE_2D,_.renderer.gl.TEXTURE_MAG_FILTER,this.m_sampler.filter===Se.Nearest?_.renderer.gl.NEAREST:_.renderer.gl.LINEAR),_.renderer.gl.texParameteri(_.renderer.gl.TEXTURE_2D,_.renderer.gl.TEXTURE_WRAP_S,this.m_sampler.wrap_x===Te.Clamp?_.renderer.gl.CLAMP_TO_EDGE:_.renderer.gl.REPEAT),_.renderer.gl.texParameteri(_.renderer.gl.TEXTURE_2D,_.renderer.gl.TEXTURE_WRAP_T,this.m_sampler.wrap_y===Te.Clamp?_.renderer.gl.CLAMP_TO_EDGE:_.renderer.gl.REPEAT))}get gl_id(){return this.m_id}}const da=class{constructor(){o(this,"origin_bottom_left",!0),o(this,"gl"),o(this,"default_batcher_shader")}get get_draw_size(){}create_shader(t){return new es(t)}create_target(t,a){return new as(t,a,[at.RGBA])}create_texture(t,a,e){return new ss(t,a,e)}create_mesh(){return new ts}update(){}init(){let t=_.platform.gl_context_create();return t===null?(K.error("Failed to create WebGL Context"),!1):(this.gl=t,K.info("WebGL2"),this.gl.pixelStorei(this.gl.PACK_ALIGNMENT,1),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.default_batcher_shader=Ie.create(Ja),!0)}render(t){if(t.target===_.backbuffer)this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null);else if(t.target){let c=t.target;this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,c.gl_id)}let a=n.make(t.target.width,t.target.height),e=t.material.shader,s=t.mesh;this.gl.useProgram(e.gl_id);let i=0,h=[],r=e.uniforms,d=t.material.data,p=0;r.forEach((c,g)=>{let f=e.uniform_locations[g];if(c.type!==A.Sampler2D){if(c.type===A.Texture2D){for(let y=0;y<c.array_length;y++){let w=t.material.get_texture_at(i),k=t.material.get_sampler_at(i);_.renderer.gl.activeTexture(_.renderer.gl.TEXTURE0+i),w?(w.update_sampler(k),_.renderer.gl.bindTexture(_.renderer.gl.TEXTURE_2D,w.gl_id)):_.renderer.gl.bindTexture(_.renderer.gl.TEXTURE_2D,null),h[y]=i,i++}_.renderer.gl.uniform1iv(f,h)}c.type===A.Float?(_.renderer.gl.uniform1fv(f,d.slice(p,p+1*c.array_length)),p+=1*c.array_length):c.type===A.Float2?(_.renderer.gl.uniform2fv(f,d.slice(p,p+2*c.array_length)),p+=2*c.array_length):c.type===A.Float3?(_.renderer.gl.uniform3fv(f,d.slice(p,p+3*c.array_length)),p+=3*c.array_length):c.type===A.Float4?(_.renderer.gl.uniform4fv(f,d.slice(p,p+4*c.array_length)),p+=4*c.array_length):c.type===A.Mat3x2?(_.renderer.gl.uniformMatrix3fv(f,!1,d.slice(p,p+9*c.array_length)),p+=9*c.array_length):c.type===A.Mat4x4&&(_.renderer.gl.uniformMatrix4fv(f,!1,d.slice(p,p+16*c.array_length)),p+=16*c.array_length)}});{let c=It(t.blend.color_op),g=It(t.blend.alpha_op),f=je(t.blend.color_src),y=je(t.blend.color_dst),w=je(t.blend.alpha_src),k=je(t.blend.alpha_dst);this.gl.enable(this.gl.BLEND),this.gl.blendEquationSeparate(c,g),this.gl.blendFuncSeparate(f,y,w,k)}this.gl.disable(this.gl.DEPTH_TEST),this.gl.disable(this.gl.CULL_FACE);{let c=t.viewport;c.y=a.y-c.y-c.h,this.gl.viewport(c.x,c.y,c.w,c.h)}if(!t.has_scissor)this.gl.disable(this.gl.SCISSOR_TEST);else{let c=t.scissor;c.y=a.y-c.y-c.h,c.w<0&&(c.w=0),c.h<0&&(c.h=0),this.gl.enable(this.gl.SCISSOR_TEST),this.gl.scissor(c.x,c.y,c.w,c.h)}{this.gl.bindVertexArray(s.gl_id);let c=s.gl_index_format,g=s.gl_index_size;t.instance_count>0?this.gl.drawElementsInstanced(this.gl.TRIANGLES,t.index_count,c,g*t.index_start,t.instance_count):this.gl.drawElements(this.gl.TRIANGLES,t.index_count,c,g*t.index_start)}this.gl.bindVertexArray(null)}clear_backbuffer(t,a,e,s=null){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,s),this.gl.disable(this.gl.SCISSOR_TEST);let i=0;i|=this.gl.COLOR_BUFFER_BIT,this.gl.colorMask(!0,!0,!0,!0),this.gl.clearColor(t.r/255,t.g/255,t.b/255,t.a/255),this.gl.clear(i)}before_render(){}after_render(){}};let _a=da;o(_a,"try_make_renderer",()=>new da);const It=t=>{switch(t){case Ee.Add:return _.renderer.gl.FUNC_ADD;case Ee.Subtract:return _.renderer.gl.FUNC_SUBTRACT;case Ee.Min:return _.renderer.gl.MIN;case Ee.Max:return _.renderer.gl.MAX;default:return _.renderer.gl.FUNC_ADD}},je=t=>{switch(t){case L.Zero:return _.renderer.gl.ZERO;case L.One:return _.renderer.gl.ONE;case L.SrcColor:return _.renderer.gl.SRC_COLOR;case L.OneMinusSrcColor:return _.renderer.gl.ONE_MINUS_SRC_COLOR;case L.DstColor:return _.renderer.gl.DST_COLOR;case L.OneMinusDstColor:return _.renderer.gl.ONE_MINUS_DST_COLOR;case L.SrcAlpha:return _.renderer.gl.SRC_ALPHA;case L.OneMinusSrcAlpha:return _.renderer.gl.ONE_MINUS_SRC_ALPHA;case L.DstAlpha:return _.renderer.gl.DST_ALPHA;case L.OneMinusDstAlpha:return _.renderer.gl.ONE_MINUS_DST_ALPHA;case L.ConstantColor:return _.renderer.gl.CONSTANT_COLOR;case L.ConstantAlpha:return _.renderer.gl.CONSTANT_ALPHA;case L.OneMinusConstantColor:return _.renderer.gl.ONE_MINUS_CONSTANT_COLOR;case L.OneMinusConstantAlpha:return _.renderer.gl.ONE_MINUS_CONSTANT_ALPHA;default:return _.renderer.gl.ZERO}},Bt=()=>_.renderer.get_draw_size||_.platform.get_draw_size,ca=class extends le{get width(){return Bt()[0]}get height(){return Bt()[1]}get textures(){return ca.empty_textures}clear(t,a,e){_.renderer.clear_backbuffer(t,a,e)}};let pa=ca;o(pa,"empty_textures",[]);class is{constructor(){o(this,"platform"),o(this,"renderer"),o(this,"backbuffer"),o(this,"config"),o(this,"app_time_last",0),o(this,"app_time_accumulator",0)}get canvas(){return this.platform.canvas}run(a){var e,s;this.config=a,this.backbuffer=new pa,this.platform=ra.try_make_platform(this.config),this.platform.init(),this.renderer=_a.try_make_renderer(),this.renderer.init(),this.platform.update(),(s=(e=this.config).on_startup)==null||s.call(e),this.app_time_accumulator=0,this.platform.ready(),this.begin_iterate()}begin_iterate(){const a=()=>{var s,i;this.platform.update(),this.renderer.update(),(i=(s=this.config).on_update)==null||i.call(s)},e=s=>{var i,h;let r=s-this.app_time_last;this.app_time_last=s,this.app_time_accumulator+=r,F.delta=r/F.ticks_per_second,F.pause_timer>0?F.pause_timer-=F.delta:(F.previous_ticks=F.ticks,F.ticks+=r,F.previous_seconds=F.seconds,F.seconds+=F.delta,a()),this.renderer.before_render(),(h=(i=this.config).on_render)==null||h.call(i),this.renderer.after_render(),this.platform.present(),requestAnimationFrame(e)};requestAnimationFrame(e)}}const _=new is,Ht="u_texture",$t="u_texture_sampler",hs="u_matrix",jt=new Mt([ee.make(0,C.Float2,!1),ee.make(1,C.Float2,!1),ee.make(2,C.UByte4,!0),ee.make(3,C.UByte4,!0)]);class Ft{constructor(){o(this,"layer",0),o(this,"offset",0),o(this,"elements",0),o(this,"material"),o(this,"texture"),o(this,"sampler",_e.get_default),o(this,"scissor",m.make(0,0,-1,-1)),o(this,"flip_vertically",!1)}get clone(){let a=new Ft;return a.layer=this.layer,a.offset=this.offset,a.elements=this.elements,a.material=this.material,a.texture=this.texture,a.sampler=this.sampler,a.scissor=this.scissor,a.flip_vertically=this.flip_vertically,a}}class rs{constructor(){o(this,"m_default_material"),o(this,"m_mesh"),o(this,"m_batch",new Ft),o(this,"m_matrix",v.identity),o(this,"m_tex_mult",255),o(this,"m_tex_wash",0),o(this,"m_vertices",[]),o(this,"m_indices",[]),o(this,"m_matrix_stack",[]),o(this,"m_scissor_stack",[]),o(this,"m_material_stack",[]),o(this,"m_batches",[]),o(this,"m_batch_insert",0),o(this,"integerize",!1),o(this,"default_sampler",_e.get_default)}push_matrix(a,e=!1){this.m_matrix_stack.push(this.m_matrix),e?this.m_matrix=a:this.m_matrix=a.mul(this.m_matrix)}pop_matrix(){let a=this.m_matrix;return this.m_matrix=this.m_matrix_stack.pop(),a}peek_matrix(){return this.m_matrix}push_scissor(a){this.m_scissor_stack.push(this.m_batch.scissor),this.m_batch.elements>0&&a!==this.m_batch.scissor&&this.INSERT_BATCH(),this.m_batch.scissor=a}pop_scissor(){let a=this.m_batch.scissor,e=this.m_scissor_stack.pop();return this.m_batch.elements>0&&e!==this.m_batch.scissor&&this.INSERT_BATCH(),this.m_batch.scissor=e??m.make(0,0,-1,-1),a}peek_scissor(){}push_material(a){}pop_material(){}peek_material(){}set_texture(a){this.m_batch.elements>0&&a!==this.m_batch.texture&&this.INSERT_BATCH(),this.m_batch.texture!==a&&(this.m_batch.texture=a,this.m_batch.flip_vertically=_.renderer.origin_bottom_left&&a&&a.is_framebuffer)}set_sampler(a){console.log(a)}render(a=_.backbuffer){this.render_with_m(a,Q.create_ortho_offcenter(0,a.width,a.height,0,.01,1e3))}render_with_m(a,e){if(this.m_batches.length<=0&&this.m_batch.elements<=0||this.m_indices.length<=0)return;this.m_mesh||(this.m_mesh=Le.create()),this.m_default_material||(this.m_default_material=st.create(_.renderer.default_batcher_shader));let s=jt.stride,i=new ArrayBuffer(s*this.m_vertices.length),h=new DataView(i);this.m_vertices.reduce((d,p)=>p.push_to(h,d),0),this.m_mesh.index_data(this.m_indices),this.m_mesh.vertex_data(jt,i);let r=new zt;r.target=a,r.mesh=this.m_mesh,r.has_viewport=!1,r.viewport=m.make(0,0,0,0),r.instance_count=0,this.m_batches.forEach((d,p)=>{this.render_single_batch(r,d,e)}),this.m_batch.elements>0&&this.render_single_batch(r,this.m_batch,e)}render_single_batch(a,e,s){e.material?a.material=e.material:a.material=this.m_default_material,a.material.has_value(Ht)?a.material.set_texture(Ht,e.texture):a.material.set_texture_at_location(0,e.texture),a.material.has_value($t)?a.material.set_sampler($t,e.sampler):a.material.set_sampler_at_location(0,e.sampler),a.material.set_matrix(hs,s),a.has_scissor=e.scissor.w>=0&&e.scissor.h>=0,a.scissor=e.scissor,a.index_start=e.offset*3,a.index_count=e.elements*3,a.perform()}clear(){this.m_matrix=v.identity,this.m_tex_mult=255,this.m_tex_wash=0,this.m_vertices=[],this.m_indices=[],this.m_batch.layer=0,this.m_batch.elements=0,this.m_batch.offset=0,this.m_batch.material=void 0,this.m_batch.texture=void 0,this.m_batch.sampler=this.default_sampler,this.m_batch.scissor.w=this.m_batch.scissor.h=-1,this.m_batch.flip_vertically=!1,this.m_matrix_stack=[],this.m_scissor_stack=[],this.m_material_stack=[],this.m_batches=[],this.m_batch_insert=0}line(a,e,s,i){}rect(a,e){this.PUSH_QUAD(a.x,a.y,a.x+a.w,a.y,a.x+a.w,a.y+a.h,a.x,a.y+a.h,0,0,0,0,0,0,0,0,e,e,e,e,0,0,255)}rect_line(a,e,s){e>=a.w||e>=a.h?this.rect(a,s):(this.PUSH_QUAD(a.x,a.y,a.x+a.w-e,a.y,a.x+a.w-e,a.y+e,a.x,a.y+e,0,0,0,0,0,0,0,0,s,s,s,s,0,0,255),this.PUSH_QUAD(a.x+a.w-e,a.y,a.x+a.w,a.y,a.x+a.w,a.y+a.h-e,a.x+a.w-e,a.y+a.h-e,0,0,0,0,0,0,0,0,s,s,s,s,0,0,255),this.PUSH_QUAD(a.x+e,a.y+a.h-e,a.x+a.w,a.y+a.h-e,a.x+a.w,a.y+a.h,a.x,a.y+a.h,0,0,0,0,0,0,0,0,s,s,s,s,0,0,255),this.PUSH_QUAD(a.x,a.y+e,a.x+e,a.y+e,a.x+e,a.y+a.h-e,a.x,a.y+a.h,0,0,0,0,0,0,0,0,s,s,s,s,0,0,255))}circle(a,e,s,i){}circle_line(a,e,s,i,h){}quad(a,e,s,i,h){}quad_line(a,e,s,i,h,r){}tex(a,e=n.zero,s=u.white){this.set_texture(a);let i=a.width,h=a.height,{m_tex_mult:r,m_tex_wash:d}=this;this.PUSH_QUAD(e.x,e.y,e.x+i,e.y,e.x+i,e.y+h,e.x,e.y+h,0,0,1,0,1,1,0,1,s,s,s,s,r,d,0)}tex_o(a,e,s,i,h,r){}tex_c(a,e,s,i,h,r,d){}stex(a,e=n.zero,s=u.white){let{m_tex_mult:i,m_tex_wash:h}=this;this.set_texture(a.texture),this.PUSH_QUAD(e.x+a.draw_coords[0].x,e.y+a.draw_coords[0].y,e.x+a.draw_coords[1].x,e.y+a.draw_coords[1].y,e.x+a.draw_coords[2].x,e.y+a.draw_coords[2].y,e.x+a.draw_coords[3].x,e.y+a.draw_coords[3].y,a.tex_coords[0].x,a.tex_coords[0].y,a.tex_coords[1].x,a.tex_coords[1].y,a.tex_coords[2].x,a.tex_coords[2].y,a.tex_coords[3].x,a.tex_coords[3].y,s,s,s,s,i,h,0)}stex_o(a,e,s,i,h,r){let{m_tex_mult:d,m_tex_wash:p}=this;this.push_matrix(v.create_transform(e,s,i,h)),this.set_texture(a.texture),this.PUSH_QUAD(a.draw_coords[0].x,a.draw_coords[0].y,a.draw_coords[1].x,a.draw_coords[1].y,a.draw_coords[2].x,a.draw_coords[2].y,a.draw_coords[3].x,a.draw_coords[3].y,a.tex_coords[0].x,a.tex_coords[0].y,a.tex_coords[1].x,a.tex_coords[1].y,a.tex_coords[2].x,a.tex_coords[2].y,a.tex_coords[3].x,a.tex_coords[3].y,r,r,r,r,d,p,0),this.pop_matrix()}stex_c(a,e,s,i,h,r,d){}str(a,e,s,i){this.str_j(a,e,s,n.zero,a.size,i)}str_j(a,e,s,i,h,r){this.push_matrix(v.create_scale(h/a.size).mul(v.create_translation(s)));let d=n.make(0,a.ascent+a.descent);i.x!==0&&(d.x-=a.width_of_line(e)*i.x),i.y!==0&&(d.y-=a.height_of(e)*i.y);let p=0,c=0;for(let g of e){if(g===`
`)d.x=0,d.y+=a.line_height,i.x!==0&&(d.x-=a.width_of_line(e,c+1)*i.x),p=0;else{let f=a.get_character(g.charCodeAt(0));if(f.subtexture.texture){let y=d.add(f.offset);p&&(y.x+=a.get_kerning(p,g.charCodeAt(0))),this.stex(f.subtexture,y,r)}d.x+=f.advance,p=g.charCodeAt(0)}c++}this.pop_matrix()}INSERT_BATCH(){this.m_batches.push(this.m_batch.clone),this.m_batch.offset+=this.m_batch.elements,this.m_batch.elements=0}PUSH_QUAD(a,e,s,i,h,r,d,p,c,g,f,y,w,k,M,O,z,rt,nt,ot,Be,He,$e){this.m_batch.elements+=2,this.m_indices.push(this.m_vertices.length+0),this.m_indices.push(this.m_vertices.length+1),this.m_indices.push(this.m_vertices.length+2),this.m_indices.push(this.m_vertices.length+0),this.m_indices.push(this.m_vertices.length+2),this.m_indices.push(this.m_vertices.length+3),this.MAKE_VERTEX(a,e,c,g,z,Be,$e,He),this.MAKE_VERTEX(s,i,f,y,rt,Be,$e,He),this.MAKE_VERTEX(h,r,w,k,nt,Be,$e,He),this.MAKE_VERTEX(d,p,M,O,ot,Be,$e,He)}MAKE_VERTEX(a,e,s,i,h,r,d,p){let c=this.m_matrix;this.m_vertices.push(new ns(n.make(a*c.m11+e*c.m21+c.m31,a*c.m12+e*c.m22+c.m32),n.make(s,this.m_batch.flip_vertically?1-i:i),h,r,p,d))}}const ie=new rs;class ns{constructor(a,e,s,i,h,r){this.pos=a,this.tex=e,this.col=s,this.mult=i,this.wash=h,this.fill=r}push_to(a,e){let{pos:s,tex:i,col:h,mult:r,wash:d,fill:p}=this;return a.setFloat32(e+0,s.x,!0),a.setFloat32(e+4,s.y,!0),a.setFloat32(e+8,i.x,!0),a.setFloat32(e+12,i.y,!0),a.setUint8(e+16,h.r),a.setUint8(e+17,h.g),a.setUint8(e+18,h.b),a.setUint8(e+19,h.a),a.setUint8(e+20,r),a.setUint8(e+21,d),a.setUint8(e+22,p),e+24}}const fa=class{constructor(t){o(this,"pixels"),this.data=t,this.pixels=[];for(let a=0;a<t.data.length;a+=4)this.pixels.push(new u(t.data[a],t.data[a+1],t.data[a+2],t.data[a+3]))}};let os=fa;o(os,"make",t=>{let a=document.createElement("canvas"),e=a.getContext("2d");return a.width=t.width,a.height=t.height,e.drawImage(t,0,0),new fa(e.getImageData(0,0,t.width,t.height))});const Rt=class{constructor(t,a,e){o(this,"draw_coords"),o(this,"tex_coords"),this.texture=t,this.source=a,this.frame=e,this.draw_coords=[n.zero,n.zero,n.zero,n.zero],this.tex_coords=[n.zero,n.zero,n.zero,n.zero],this.update()}get width(){return this.frame.w}get height(){return this.frame.h}update(){let{draw_coords:t,tex_coords:a,texture:e,frame:s,source:i}=this;if(t[0].x=-s.x,t[0].y=-s.y,t[1].x=-s.x+i.w,t[1].y=-s.y,t[2].x=-s.x+i.w,t[2].y=-s.y+i.h,t[3].x=-s.x,t[3].y=-s.y+i.h,e){let h=1/e.width,r=1/e.height;a[0].x=i.x*h,a[0].y=i.y*r,a[1].x=(i.x+i.w)*h,a[1].y=i.y*r,a[2].x=(i.x+i.w)*h,a[2].y=(i.y+i.h)*r,a[3].x=i.x*h,a[3].y=(i.y+i.h)*r}}crop_info(t){let{source:a,frame:e}=this,s=t.add(a.top_left).add(e.top_left).overlaps_rect(a),i=m.make(Math.min(0,e.x,+t.x),Math.min(0,e.y+t.y),t.w,t.h);return[s,i]}crop(t){let{texture:a}=this,[e,s]=this.crop_info(t);return new Rt(a,e,s)}};let Oe=Rt;o(Oe,"make",(t,a=m.make(0,0,t.width,t.height),e=m.make(0,0,a.w,a.h))=>new Rt(t,a,e));const ga=class{constructor(){o(this,"scale"),o(this,"characters"),o(this,"glyphs"),o(this,"kernings"),o(this,"packs"),o(this,"_descent"),o(this,"_ascent"),o(this,"_line_gap"),o(this,"family_name"),o(this,"texture")}get ascent(){return this._ascent*this.scale}get descent(){return this._descent*this.scale}get line_gap(){return this._line_gap*this.scale}get_character(t){return this.characters.get(t)}get_kerning(t,a){var e;return(e=this.kernings.get(t))==null?void 0:e.get(a)}get_glyph(t){return this.glyphs.get(t)}get_subtexture(t){let a=this.packs.get(t);if(!a)return new Oe(this.texture,m.make(0,0,0,0),m.make(0,0,0,0));let{packed:e,frame:s}=a;return new Oe(this.texture,m.make(e.x,e.y,e.w,e.h),m.make(s.x,s.y,s.w,s.h))}};let ya=ga;o(ya,"make",(t,a)=>{let e=new ga;e.scale=t.meta.scale;let s=new Map(t.chars.map(d=>[d.glyph,{...d,has_glyph:d.has_glyph!==0}])),i=new Map(t.glyphs.map(d=>[d.codepoint,d.glyph])),h=new Map;t.kernings.forEach(d=>{h.get(d.glyph1)||h.set(d.glyph1,new Map),h.get(d.glyph1).set(d.glyph2,d.kerning)});let r=new Map(t.colors.map(d=>[d.glyph,{frame:d.frame,packed:d.packed}]));return e._descent=t.meta.descent,e._ascent=t.meta.ascent,e._line_gap=t.meta.line_gap,e.family_name=t.meta.name,e.texture=a,e.packs=r,e.kernings=h,e.glyphs=i,e.characters=s,e.scale=t.meta.scale,e});const xt=class{constructor(){o(this,"_characters"),o(this,"_kerning"),o(this,"_atlas"),o(this,"name"),o(this,"size",0),o(this,"ascent",0),o(this,"descent",0),o(this,"line_gap",0)}clear(){this._atlas=[],this._characters=[],this._kerning=[],this.name=""}get height(){return this.ascent-this.descent}get line_height(){return this.ascent-this.descent+this.line_gap}get textures(){return this._atlas}width_of(t){let a=0,e=0,s=0;for(let i of t)i===`
`?e=0:(e+=this.get_character(i.charCodeAt(0)).advance,s&&(e+=this.get_kerning(s,i.charCodeAt(0))),e>a&&(a=e),s=i.charCodeAt(0));return a}width_of_line(t,a=0){if(a<0||a>=t.length)return 0;let e=0,s=0;for(let i of t){if(i===`
`)break;e+=this.get_character(i.charCodeAt(0)).advance,s&&(e+=this.get_kerning(s,i.charCodeAt(0))),s=i.charCodeAt(0)}return e}height_of(t){if(t.length<=0)return 0;let a=this.line_height;for(let e of t)e===`
`&&(a+=this.line_height);return a-this.line_gap}rebuild(t,a,e){this.clear(),this.name=t.family_name,this.ascent=t.ascent,this.descent=t.descent,this.line_gap=t.line_gap,this.size=a;for(let s of e){let{from:i,to:h}=s;for(let r=i;r<=h;r++){let d=t.get_glyph(r);if(d===void 0)continue;let p=t.get_character(d),c=t.get_subtexture(p.glyph),g={glyph:d,codepoint:r,advance:p.advance,offset:n.make(p.offset_x,p.offset_y),subtexture:c};this._characters.push(g)}}for(let s of this._characters)for(let i of this._characters){let h=t.get_kerning(s.glyph,i.glyph);h!==void 0&&this.set_kerning(s.codepoint,i.codepoint,h)}}get_kerning(t,a){let e=Xt(this._kerning,t,a);return e!==-1?this._kerning[e].value:0}set_kerning(t,a,e){let s=Xt(this._kerning,t,a);s!==-1?this._kerning[s].value=e:this._kerning.push({a:t,b:a,value:e})}get_character(t){let a=ls(this._characters,t);return a!==-1?this._characters[a]:this._characters[0]}};let wt=xt;o(wt,"make",(t,a)=>{let e=we.from_image(a),s=ya.make(t,e);return xt.make_from_font(s,t.size)}),o(wt,"make_from_font",(t,a)=>{let e=[{from:32,to:127},{from:161,to:355}],s=new xt;return s.rebuild(t,a,e),s});function ls(t,a){let e=0,s=t.length-1;for(;e<=s;){let i=Math.round((s+e)/2);if(t[i].codepoint===a)return i;t[i].codepoint<a?e=i+1:s=i-1}return-1}function Xt(t,a,e){let s=0,i=t.length-1;for(;s<=i;){let h=Math.round((i+s)/2);if(t[h].a===a&&t[h].b===e)return h;t[h].a===a?t[h].b<e?s=h+1:i=h-1:t[h].a<a?s=h+1:i=h-1}return-1}class Vt{constructor(a,e){this.image=a,this.duration=e}}class ds{constructor(a,e){this.name=a,this.frames=e}}class _s{constructor(a,e,s){this.name=a,this.origin=e,this.animations=s}get(a){return this.animations.find(e=>e.name===a)}}class cs{constructor(a,e){this.name=a,this.frames=e}}const ps=""+new URL("out_0-d2372454.png",import.meta.url).href,fs=[{name:"button_bg",tags:[{from:0,to:0,name:"idle"},{from:1,to:1,name:"hover"},{from:2,to:2,name:"click"},{from:3,to:3,name:"disabled"}],packs:[{frame:{x:4,y:4,w:366,h:200},packed:{x:2592,y:2656,w:374,h:208},meta:{duration:100}},{frame:{x:4,y:4,w:366,h:200},packed:{x:2738,y:1594,w:374,h:208},meta:{duration:100}},{frame:{x:4,y:4,w:366,h:200},packed:{x:0,y:2909,w:374,h:208},meta:{duration:300}},{frame:{x:4,y:4,w:366,h:200},packed:{x:374,y:2909,w:374,h:208},meta:{duration:100}}]},{name:"card",tags:[{from:0,to:0,name:"idle"},{from:1,to:1,name:"hover"},{from:2,to:4,name:"click"},{from:5,to:7,name:"flip"},{from:8,to:8,name:"back_idle"},{from:9,to:9,name:"back_hover"},{from:10,to:10,name:"back_click"},{from:11,to:13,name:"back_flip"},{from:14,to:15,name:"drag"},{from:16,to:17,name:"back_drag"},{from:18,to:18,name:"wait"},{from:19,to:19,name:"shadow"}],packs:[{frame:{x:4,y:4,w:204,h:245},packed:{x:2738,y:1088,w:212,h:253},meta:{duration:100}},{frame:{x:4,y:4,w:204,h:245},packed:{x:2950,y:1088,w:212,h:253},meta:{duration:100}},{frame:{x:4,y:4,w:204,h:245},packed:{x:2738,y:1341,w:212,h:253},meta:{duration:100}},{frame:{x:4,y:4,w:204,h:245},packed:{x:2950,y:1341,w:212,h:253},meta:{duration:100}},{frame:{x:4,y:4,w:204,h:245},packed:{x:2849,y:0,w:212,h:253},meta:{duration:100}},{frame:{x:4,y:4,w:204,h:245},packed:{x:2849,y:253,w:212,h:253},meta:{duration:100}},{frame:{x:4,y:4,w:204,h:245},packed:{x:2849,y:506,w:212,h:253},meta:{duration:100}},{frame:{x:4,y:4,w:204,h:245},packed:{x:1578,y:821,w:212,h:253},meta:{duration:100}},{frame:{x:4,y:4,w:204,h:245},packed:{x:1790,y:821,w:212,h:253},meta:{duration:100}},{frame:{x:4,y:4,w:204,h:245},packed:{x:2002,y:821,w:212,h:253},meta:{duration:100}},{frame:{x:4,y:4,w:204,h:245},packed:{x:2214,y:821,w:212,h:253},meta:{duration:100}},{frame:{x:4,y:4,w:204,h:245},packed:{x:2426,y:821,w:212,h:253},meta:{duration:100}},{frame:{x:4,y:4,w:204,h:245},packed:{x:2638,y:821,w:212,h:253},meta:{duration:100}},{frame:{x:4,y:4,w:204,h:245},packed:{x:2850,y:821,w:212,h:253},meta:{duration:100}},{frame:{x:4,y:4,w:204,h:245},packed:{x:0,y:2656,w:212,h:253},meta:{duration:100}},{frame:{x:4,y:4,w:204,h:245},packed:{x:212,y:2656,w:212,h:253},meta:{duration:100}},{frame:{x:4,y:4,w:204,h:245},packed:{x:424,y:2656,w:212,h:253},meta:{duration:100}},{frame:{x:4,y:4,w:204,h:245},packed:{x:636,y:2656,w:212,h:253},meta:{duration:100}},{frame:{x:4,y:4,w:204,h:245},packed:{x:848,y:2656,w:212,h:253},meta:{duration:100}},{frame:{x:4,y:4,w:204,h:245},packed:{x:1060,y:2656,w:212,h:253},meta:{duration:100}}]},{name:"dropdown_bg",tags:[{from:0,to:0,name:"idle"},{from:1,to:1,name:"hover"}],packs:[{frame:{x:4,y:4,w:510,h:172},packed:{x:748,y:2909,w:518,h:180},meta:{duration:100}},{frame:{x:4,y:4,w:510,h:172},packed:{x:1266,y:2909,w:518,h:180},meta:{duration:100}}]},{name:"hmg_bg",tags:[{from:0,to:0,name:"idle"},{from:1,to:1,name:"hover"},{from:2,to:2,name:"open"},{from:3,to:3,name:"open_hover"}],packs:[{frame:{x:4,y:4,w:240,h:140},packed:{x:2546,y:3117,w:248,h:148},meta:{duration:100}},{frame:{x:4,y:4,w:240,h:140},packed:{x:2794,y:3117,w:248,h:148},meta:{duration:100}},{frame:{x:4,y:4,w:240,h:140},packed:{x:2596,y:2909,w:248,h:148},meta:{duration:100}},{frame:{x:4,y:4,w:240,h:140},packed:{x:2844,y:2909,w:248,h:148},meta:{duration:100}}]},{name:"main_bg",tags:[{from:0,to:0,name:"idle"}],packs:[{frame:{x:4,y:4,w:1570,h:1080},packed:{x:0,y:0,w:1578,h:1088},meta:{duration:100}}]},{name:"main_card_bg",tags:[{from:0,to:0,name:"solitaire"},{from:1,to:1,name:"solitaire_hover"},{from:2,to:2,name:"fourtimes"},{from:3,to:3,name:"fourtimes_hover"},{from:4,to:4,name:"octopus"},{from:5,to:5,name:"octopus_hover"}],packs:[{frame:{x:4,y:4,w:481,h:739},packed:{x:1271,y:1088,w:489,h:747},meta:{duration:100}},{frame:{x:4,y:4,w:481,h:739},packed:{x:1760,y:1088,w:489,h:747},meta:{duration:100}},{frame:{x:4,y:4,w:481,h:739},packed:{x:2249,y:1088,w:489,h:747},meta:{duration:100}},{frame:{x:4,y:4,w:481,h:739},packed:{x:0,y:1909,w:489,h:747},meta:{duration:100}},{frame:{x:4,y:4,w:481,h:739},packed:{x:489,y:1909,w:489,h:747},meta:{duration:100}},{frame:{x:4,y:4,w:481,h:739},packed:{x:978,y:1909,w:489,h:747},meta:{duration:100}}]},{name:"main_settings_bg",tags:[{from:0,to:0,name:"idle"},{from:1,to:1,name:"hover"}],packs:[{frame:{x:4,y:4,w:652,h:223},packed:{x:1272,y:2656,w:660,h:231},meta:{duration:100}},{frame:{x:4,y:4,w:652,h:223},packed:{x:1932,y:2656,w:660,h:231},meta:{duration:100}}]},{name:"main_title_bg",tags:[{from:0,to:0,name:"idle"}],packs:[{frame:{x:4,y:4,w:780,h:560},packed:{x:1822,y:1909,w:788,h:568},meta:{duration:100}}]},{name:"menu_bar",tags:[{from:0,to:0,name:"idle"}],packs:[{frame:{x:4,y:4,w:240,h:160},packed:{x:1784,y:2909,w:248,h:168},meta:{duration:100}}]},{name:"navigation_bg",tags:[{from:0,to:0,name:"idle"},{from:1,to:1,name:"hover"}],packs:[{frame:{x:4,y:4,w:593,h:157},packed:{x:0,y:3117,w:601,h:165},meta:{duration:100}},{frame:{x:4,y:4,w:593,h:157},packed:{x:601,y:3117,w:601,h:165},meta:{duration:100}}]},{name:"panel_bg_nine_slice",tags:[{from:0,to:0,name:"idle"}],packs:[{frame:{x:4,y:4,w:400,h:400},packed:{x:2610,y:1909,w:408,h:408},meta:{duration:100}}]},{name:"rank",tags:[{from:0,to:0,name:"a"},{from:1,to:1,name:"2"},{from:2,to:2,name:"3"},{from:3,to:3,name:"4"},{from:4,to:4,name:"5"},{from:5,to:5,name:"6"},{from:6,to:6,name:"7"},{from:7,to:7,name:"8"},{from:8,to:8,name:"9"},{from:9,to:9,name:"t"},{from:10,to:10,name:"j"},{from:11,to:11,name:"q"},{from:12,to:12,name:"k"}],packs:[{frame:{x:4,y:4,w:64,h:64},packed:{x:3042,y:3117,w:72,h:72},meta:{duration:100}},{frame:{x:4,y:4,w:64,h:64},packed:{x:3042,y:3189,w:72,h:72},meta:{duration:100}},{frame:{x:4,y:4,w:64,h:64},packed:{x:2966,y:2656,w:72,h:72},meta:{duration:100}},{frame:{x:4,y:4,w:64,h:64},packed:{x:3038,y:2656,w:72,h:72},meta:{duration:100}},{frame:{x:4,y:4,w:64,h:64},packed:{x:2966,y:2728,w:72,h:72},meta:{duration:100}},{frame:{x:4,y:4,w:64,h:64},packed:{x:3038,y:2728,w:72,h:72},meta:{duration:100}},{frame:{x:4,y:4,w:64,h:64},packed:{x:3062,y:821,w:72,h:72},meta:{duration:100}},{frame:{x:4,y:4,w:64,h:64},packed:{x:3062,y:893,w:72,h:72},meta:{duration:100}},{frame:{x:4,y:4,w:64,h:64},packed:{x:3062,y:965,w:72,h:72},meta:{duration:100}},{frame:{x:4,y:4,w:64,h:64},packed:{x:3061,y:506,w:72,h:72},meta:{duration:100}},{frame:{x:4,y:4,w:64,h:64},packed:{x:3061,y:578,w:72,h:72},meta:{duration:100}},{frame:{x:4,y:4,w:64,h:64},packed:{x:3061,y:650,w:72,h:72},meta:{duration:100}},{frame:{x:4,y:4,w:64,h:64},packed:{x:3061,y:253,w:72,h:72},meta:{duration:100}}]},{name:"recycle",tags:[{from:0,to:0,name:"idle"},{from:1,to:1,name:"hover"},{from:2,to:2,name:"disabled"}],packs:[{frame:{x:4,y:4,w:180,h:160},packed:{x:2032,y:2909,w:188,h:168},meta:{duration:100}},{frame:{x:4,y:4,w:180,h:160},packed:{x:2220,y:2909,w:188,h:168},meta:{duration:100}},{frame:{x:4,y:4,w:180,h:160},packed:{x:2408,y:2909,w:188,h:168},meta:{duration:100}}]},{name:"side_menu_bg",tags:[{from:0,to:0,name:"idle"}],packs:[{frame:{x:4,y:4,w:347,h:659},packed:{x:1467,y:1909,w:355,h:667},meta:{duration:100}}]},{name:"suit",tags:[{from:0,to:0,name:"spades"},{from:1,to:1,name:"hearts"},{from:2,to:2,name:"diamonds"},{from:3,to:3,name:"clubs"}],packs:[{frame:{x:4,y:4,w:64,h:64},packed:{x:3061,y:325,w:72,h:72},meta:{duration:100}},{frame:{x:4,y:4,w:64,h:64},packed:{x:3061,y:397,w:72,h:72},meta:{duration:100}},{frame:{x:4,y:4,w:64,h:64},packed:{x:3061,y:0,w:72,h:72},meta:{duration:100}},{frame:{x:4,y:4,w:64,h:64},packed:{x:3061,y:72,w:72,h:72},meta:{duration:100}}]},{name:"swiggle",tags:[{from:0,to:0,name:"idle"},{from:1,to:1,name:"small"}],packs:[{frame:{x:4,y:4,w:1263,h:813},packed:{x:1578,y:0,w:1271,h:821},meta:{duration:100}},{frame:{x:4,y:4,w:1263,h:813},packed:{x:0,y:1088,w:1271,h:821},meta:{duration:100}}]},{name:"tab3_bg",tags:[{from:0,to:0,name:"idle"},{from:1,to:1,name:"hover"},{from:2,to:2,name:"active"}],packs:[{frame:{x:4,y:4,w:440,h:150},packed:{x:1202,y:3117,w:448,h:158},meta:{duration:100}},{frame:{x:4,y:4,w:440,h:150},packed:{x:1650,y:3117,w:448,h:158},meta:{duration:100}},{frame:{x:4,y:4,w:440,h:150},packed:{x:2098,y:3117,w:448,h:158},meta:{duration:100}}]}],gs={sprites:fs},ys=""+new URL("out_0-1e3dd4e6.png",import.meta.url).href,ms=[],us={scale:.0625,descent:-568,ascent:1992,line_gap:0,name:"Capriola"},xs=[{glyph:22,width:0,height:0,advance:32.0625,offset_x:0,offset_y:0,scale:.0625,has_glyph:0},{glyph:23,width:23,height:102,advance:42.75,offset_x:10.9375,offset_y:-100,scale:.0625,has_glyph:1},{glyph:24,width:42,height:40,advance:53.1875,offset_x:6.3125,offset_y:-108,scale:.0625,has_glyph:1},{glyph:25,width:77,height:87,advance:85.125,offset_x:3.5,offset_y:-89,scale:.0625,has_glyph:1},{glyph:26,width:57,height:127,advance:64,offset_x:3.4375,offset_y:-107,scale:.0625,has_glyph:1},{glyph:27,width:118,height:103,advance:127.6875,offset_x:5.875,offset_y:-101,scale:.0625,has_glyph:1},{glyph:28,width:71,height:94,advance:85.0625,offset_x:9.3125,offset_y:-92,scale:.0625,has_glyph:1},{glyph:29,width:16,height:40,advance:31.9375,offset_x:8.125,offset_y:-108,scale:.0625,has_glyph:1},{glyph:30,width:35,height:141,advance:53.375,offset_x:10.25,offset_y:-120,scale:.0625,has_glyph:1},{glyph:31,width:36,height:141,advance:53.375,offset_x:8.3125,offset_y:-120,scale:.0625,has_glyph:1},{glyph:32,width:73,height:67,advance:85.1875,offset_x:6.3125,offset_y:-119,scale:.0625,has_glyph:1},{glyph:33,width:69,height:69,advance:85.1875,offset_x:8.25,offset_y:-72,scale:.0625,has_glyph:1},{glyph:34,width:23,height:47,advance:32.0625,offset_x:4,offset_y:-21,scale:.0625,has_glyph:1},{glyph:35,width:46,height:13,advance:74.5625,offset_x:14.8125,offset_y:-44,scale:.0625,has_glyph:1},{glyph:36,width:22,height:23,advance:32.0625,offset_x:5.375,offset_y:-21,scale:.0625,has_glyph:1},{glyph:37,width:40,height:111,advance:53.3125,offset_x:9.375,offset_y:-102,scale:.0625,has_glyph:1},{glyph:38,width:71,height:79,advance:85.1875,offset_x:7.5625,offset_y:-77,scale:.0625,has_glyph:1},{glyph:39,width:35,height:76,advance:53.0625,offset_x:3.9375,offset_y:-76,scale:.0625,has_glyph:1},{glyph:40,width:59,height:77,advance:74.625,offset_x:8,offset_y:-77,scale:.0625,has_glyph:1},{glyph:41,width:61,height:94,advance:74.625,offset_x:5.9375,offset_y:-77,scale:.0625,has_glyph:1},{glyph:42,width:69,height:94,advance:74.0625,offset_x:5.4375,offset_y:-79,scale:.0625,has_glyph:1},{glyph:43,width:65,height:92,advance:74.5625,offset_x:7.6875,offset_y:-75,scale:.0625,has_glyph:1},{glyph:44,width:65,height:93,advance:74.5625,offset_x:5.9375,offset_y:-91,scale:.0625,has_glyph:1},{glyph:45,width:57,height:92,advance:63.8125,offset_x:3.125,offset_y:-75,scale:.0625,has_glyph:1},{glyph:46,width:64,height:93,advance:74.5625,offset_x:5.8125,offset_y:-91,scale:.0625,has_glyph:1},{glyph:47,width:65,height:94,advance:74.5625,offset_x:3.625,offset_y:-77,scale:.0625,has_glyph:1},{glyph:48,width:23,height:72,advance:31.9375,offset_x:4.9375,offset_y:-70,scale:.0625,has_glyph:1},{glyph:49,width:23,height:96,advance:32.0625,offset_x:4.1875,offset_y:-70,scale:.0625,has_glyph:1},{glyph:50,width:65,height:62,advance:85.25,offset_x:9.3125,offset_y:-68,scale:.0625,has_glyph:1},{glyph:51,width:67,height:41,advance:85.1875,offset_x:9.8125,offset_y:-58,scale:.0625,has_glyph:1},{glyph:52,width:65,height:62,advance:85.25,offset_x:11.8125,offset_y:-68,scale:.0625,has_glyph:1},{glyph:53,width:59,height:103,advance:74.9375,offset_x:8.375,offset_y:-101,scale:.0625,has_glyph:1},{glyph:54,width:94,height:106,advance:106.3125,offset_x:7.5,offset_y:-82,scale:.0625,has_glyph:1},{glyph:55,width:88,height:96,advance:96,offset_x:4.25,offset_y:-96,scale:.0625,has_glyph:1},{glyph:56,width:73,height:96,advance:95.0625,offset_x:14.875,offset_y:-96,scale:.0625,has_glyph:1},{glyph:57,width:77,height:100,advance:85.125,offset_x:6.9375,offset_y:-98,scale:.0625,has_glyph:1},{glyph:58,width:76,height:96,advance:95.8125,offset_x:14.875,offset_y:-96,scale:.0625,has_glyph:1},{glyph:59,width:63,height:96,advance:85.125,offset_x:14.625,offset_y:-96,scale:.0625,has_glyph:1},{glyph:60,width:59,height:96,advance:74.375,offset_x:14.75,offset_y:-96,scale:.0625,has_glyph:1},{glyph:61,width:82,height:100,advance:95.8125,offset_x:8.6875,offset_y:-98,scale:.0625,has_glyph:1},{glyph:62,width:79,height:96,advance:106.1875,offset_x:14.125,offset_y:-96,scale:.0625,has_glyph:1},{glyph:63,width:17,height:96,advance:42.6875,offset_x:13.5,offset_y:-96,scale:.0625,has_glyph:1},{glyph:64,width:41,height:98,advance:53.125,offset_x:1.9375,offset_y:-96,scale:.0625,has_glyph:1},{glyph:65,width:74,height:102,advance:85.25,offset_x:13.5,offset_y:-97,scale:.0625,has_glyph:1},{glyph:66,width:54,height:96,advance:74.6875,offset_x:14.9375,offset_y:-96,scale:.0625,has_glyph:1},{glyph:67,width:113,height:96,advance:127.4375,offset_x:8.0625,offset_y:-96,scale:.0625,has_glyph:1},{glyph:68,width:77,height:96,advance:106.3125,offset_x:15.0625,offset_y:-96,scale:.0625,has_glyph:1},{glyph:69,width:93,height:100,advance:106.8125,offset_x:7.1875,offset_y:-98,scale:.0625,has_glyph:1},{glyph:70,width:68,height:96,advance:85,offset_x:14.3125,offset_y:-96,scale:.0625,has_glyph:1},{glyph:71,width:98,height:118,advance:106.4375,offset_x:7.1875,offset_y:-98,scale:.0625,has_glyph:1},{glyph:72,width:76,height:98,advance:95.8125,offset_x:14.625,offset_y:-96,scale:.0625,has_glyph:1},{glyph:73,width:63,height:100,advance:74.625,offset_x:6.875,offset_y:-98,scale:.0625,has_glyph:1},{glyph:74,width:70,height:96,advance:74.5,offset_x:2.75,offset_y:-96,scale:.0625,has_glyph:1},{glyph:75,width:77,height:98,advance:95.5625,offset_x:9.6875,offset_y:-96,scale:.0625,has_glyph:1},{glyph:76,width:83,height:96,advance:85.25,offset_x:1.5625,offset_y:-96,scale:.0625,has_glyph:1},{glyph:77,width:126,height:96,advance:138.3125,offset_x:6.125,offset_y:-96,scale:.0625,has_glyph:1},{glyph:78,width:78,height:96,advance:85.1875,offset_x:4,offset_y:-96,scale:.0625,has_glyph:1},{glyph:79,width:84,height:96,advance:84.6875,offset_x:1,offset_y:-96,scale:.0625,has_glyph:1},{glyph:80,width:67,height:96,advance:74.5625,offset_x:4.625,offset_y:-96,scale:.0625,has_glyph:1},{glyph:81,width:33,height:140,advance:53.375,offset_x:12.9375,offset_y:-119,scale:.0625,has_glyph:1},{glyph:82,width:40,height:111,advance:53.3125,offset_x:4.0625,offset_y:-102,scale:.0625,has_glyph:1},{glyph:83,width:33,height:140,advance:53.375,offset_x:8.5,offset_y:-119,scale:.0625,has_glyph:1},{glyph:84,width:60,height:65,advance:63.875,offset_x:2.5625,offset_y:-96,scale:.0625,has_glyph:1},{glyph:85,width:104,height:13,advance:95.8125,offset_x:-3.625,offset_y:10,scale:.0625,has_glyph:1},{glyph:86,width:33,height:28,advance:42.9375,offset_x:.875,offset_y:-108,scale:.0625,has_glyph:1},{glyph:87,width:63,height:75,advance:74.6875,offset_x:6.125,offset_y:-73,scale:.0625,has_glyph:1},{glyph:88,width:67,height:113,advance:85.3125,offset_x:12.6875,offset_y:-111,scale:.0625,has_glyph:1},{glyph:89,width:61,height:77,advance:74.5625,offset_x:7.5625,offset_y:-73,scale:.0625,has_glyph:1},{glyph:90,width:70,height:113,advance:85.25,offset_x:6.9375,offset_y:-111,scale:.0625,has_glyph:1},{glyph:91,width:61,height:75,advance:74.6875,offset_x:7.125,offset_y:-73,scale:.0625,has_glyph:1},{glyph:92,width:54,height:112,advance:53.1875,offset_x:4.75,offset_y:-112,scale:.0625,has_glyph:1},{glyph:93,width:66,height:120,advance:74.5625,offset_x:6.8125,offset_y:-84,scale:.0625,has_glyph:1},{glyph:94,width:62,height:111,advance:85.25,offset_x:13.375,offset_y:-111,scale:.0625,has_glyph:1},{glyph:95,width:32,height:105,advance:42.6875,offset_x:8.875,offset_y:-103,scale:.0625,has_glyph:1},{glyph:96,width:36,height:139,advance:42.6875,offset_x:-3.625,offset_y:-103,scale:.0625,has_glyph:1},{glyph:97,width:62,height:113,advance:74.75,offset_x:11.875,offset_y:-111,scale:.0625,has_glyph:1},{glyph:98,width:30,height:113,advance:42.6875,offset_x:11.6875,offset_y:-111,scale:.0625,has_glyph:1},{glyph:99,width:106,height:73,advance:127.6875,offset_x:11.5,offset_y:-73,scale:.0625,has_glyph:1},{glyph:100,width:63,height:73,advance:85.25,offset_x:11.5,offset_y:-73,scale:.0625,has_glyph:1},{glyph:101,width:71,height:75,advance:85.375,offset_x:7.5,offset_y:-73,scale:.0625,has_glyph:1},{glyph:102,width:69,height:109,advance:85.3125,offset_x:10.3125,offset_y:-73,scale:.0625,has_glyph:1},{glyph:103,width:66,height:109,advance:85.3125,offset_x:7.4375,offset_y:-73,scale:.0625,has_glyph:1},{glyph:104,width:45,height:73,advance:53.3125,offset_x:9.9375,offset_y:-73,scale:.0625,has_glyph:1},{glyph:105,width:51,height:75,advance:64,offset_x:7.25,offset_y:-73,scale:.0625,has_glyph:1},{glyph:106,width:50,height:91,advance:53.1875,offset_x:3.9375,offset_y:-89,scale:.0625,has_glyph:1},{glyph:107,width:64,height:73,advance:85.25,offset_x:11.8125,offset_y:-71,scale:.0625,has_glyph:1},{glyph:108,width:66,height:72,advance:74.75,offset_x:4.4375,offset_y:-71,scale:.0625,has_glyph:1},{glyph:109,width:107,height:72,advance:116.9375,offset_x:4.5,offset_y:-71,scale:.0625,has_glyph:1},{glyph:110,width:61,height:71,advance:63.9375,offset_x:1.5625,offset_y:-71,scale:.0625,has_glyph:1},{glyph:111,width:66,height:107,advance:74.5625,offset_x:4.5,offset_y:-71,scale:.0625,has_glyph:1},{glyph:112,width:54,height:71,advance:63.9375,offset_x:5.4375,offset_y:-71,scale:.0625,has_glyph:1},{glyph:113,width:42,height:144,advance:64,offset_x:15,offset_y:-120,scale:.0625,has_glyph:1},{glyph:114,width:14,height:139,advance:42.6875,offset_x:14.6875,offset_y:-118,scale:.0625,has_glyph:1},{glyph:115,width:42,height:144,advance:64,offset_x:7.8125,offset_y:-120,scale:.0625,has_glyph:1},{glyph:116,width:78,height:27,advance:106.6875,offset_x:15.375,offset_y:-53,scale:.0625,has_glyph:1},{glyph:118,width:23,height:102,advance:42.75,offset_x:10.875,offset_y:-70,scale:.0625,has_glyph:1},{glyph:119,width:61,height:112,advance:74.5625,offset_x:7.5625,offset_y:-92,scale:.0625,has_glyph:1},{glyph:120,width:56,height:91,advance:63.6875,offset_x:6.9375,offset_y:-91,scale:.0625,has_glyph:1},{glyph:121,width:66,height:66,advance:74.5625,offset_x:4.3125,offset_y:-71,scale:.0625,has_glyph:1},{glyph:122,width:79,height:90,advance:85.1875,offset_x:3.0625,offset_y:-90,scale:.0625,has_glyph:1},{glyph:123,width:14,height:138,advance:42.6875,offset_x:14.6875,offset_y:-118,scale:.0625,has_glyph:1},{glyph:124,width:66,height:142,advance:85.1875,offset_x:9.3125,offset_y:-113,scale:.0625,has_glyph:1},{glyph:125,width:51,height:20,advance:65,offset_x:7.75,offset_y:-102,scale:.0625,has_glyph:1},{glyph:126,width:97,height:97,advance:106.5,offset_x:5.3125,offset_y:-96,scale:.0625,has_glyph:1},{glyph:127,width:51,height:61,advance:74.6875,offset_x:7.4375,offset_y:-98,scale:.0625,has_glyph:1},{glyph:128,width:77,height:63,advance:95.875,offset_x:9.8125,offset_y:-67,scale:.0625,has_glyph:1},{glyph:129,width:75,height:40,advance:95.8125,offset_x:8.25,offset_y:-54,scale:.0625,has_glyph:1},{glyph:130,width:0,height:0,advance:106.6875,offset_x:0,offset_y:0,scale:.0625,has_glyph:0},{glyph:131,width:97,height:97,advance:106.5,offset_x:5.3125,offset_y:-96,scale:.0625,has_glyph:1},{glyph:132,width:39,height:14,advance:42.6875,offset_x:2.4375,offset_y:-99,scale:.0625,has_glyph:1},{glyph:133,width:47,height:49,advance:53.3125,offset_x:3.1875,offset_y:-105,scale:.0625,has_glyph:1},{glyph:134,width:69,height:77,advance:85.1875,offset_x:8.25,offset_y:-77,scale:.0625,has_glyph:1},{glyph:135,width:49,height:64,advance:63.6875,offset_x:6.25,offset_y:-117,scale:.0625,has_glyph:1},{glyph:136,width:49,height:66,advance:63.75,offset_x:6.9375,offset_y:-117,scale:.0625,has_glyph:1},{glyph:137,width:34,height:28,advance:42.9375,offset_x:10.875,offset_y:-108,scale:.0625,has_glyph:1},{glyph:138,width:64,height:105,advance:85.25,offset_x:11.8125,offset_y:-71,scale:.0625,has_glyph:1},{glyph:139,width:69,height:96,advance:96,offset_x:13.0625,offset_y:-96,scale:.0625,has_glyph:1},{glyph:140,width:22,height:23,advance:32.0625,offset_x:5.375,offset_y:-49,scale:.0625,has_glyph:1},{glyph:141,width:32,height:33,advance:31.6875,offset_x:-11.4375,offset_y:-3,scale:.0625,has_glyph:1},{glyph:142,width:31,height:64,advance:42.4375,offset_x:1.8125,offset_y:-117,scale:.0625,has_glyph:1},{glyph:143,width:54,height:61,advance:63.9375,offset_x:5.3125,offset_y:-98,scale:.0625,has_glyph:1},{glyph:144,width:78,height:63,advance:95.875,offset_x:9.3125,offset_y:-68,scale:.0625,has_glyph:1},{glyph:145,width:121,height:105,advance:138.3125,offset_x:9.3125,offset_y:-103,scale:.0625,has_glyph:1},{glyph:146,width:122,height:105,advance:148.8125,offset_x:9.3125,offset_y:-103,scale:.0625,has_glyph:1},{glyph:147,width:134,height:105,advance:148.9375,offset_x:6.9375,offset_y:-103,scale:.0625,has_glyph:1},{glyph:148,width:59,height:103,advance:74.9375,offset_x:8.3125,offset_y:-70,scale:.0625,has_glyph:1},{glyph:149,width:88,height:125,advance:96,offset_x:4.25,offset_y:-125,scale:.0625,has_glyph:1},{glyph:150,width:88,height:125,advance:96,offset_x:4.25,offset_y:-125,scale:.0625,has_glyph:1},{glyph:151,width:88,height:124,advance:96,offset_x:4.25,offset_y:-124,scale:.0625,has_glyph:1},{glyph:152,width:88,height:125,advance:96,offset_x:4.25,offset_y:-125,scale:.0625,has_glyph:1},{glyph:153,width:88,height:124,advance:96,offset_x:4.25,offset_y:-124,scale:.0625,has_glyph:1},{glyph:154,width:88,height:124,advance:96,offset_x:4.25,offset_y:-124,scale:.0625,has_glyph:1},{glyph:155,width:105,height:96,advance:117.0625,offset_x:4.125,offset_y:-96,scale:.0625,has_glyph:1},{glyph:156,width:77,height:128,advance:95.6875,offset_x:6.9375,offset_y:-98,scale:.0625,has_glyph:1},{glyph:157,width:63,height:125,advance:85.125,offset_x:14.625,offset_y:-125,scale:.0625,has_glyph:1},{glyph:158,width:63,height:125,advance:85.125,offset_x:14.625,offset_y:-125,scale:.0625,has_glyph:1},{glyph:159,width:63,height:124,advance:85.125,offset_x:14.625,offset_y:-124,scale:.0625,has_glyph:1},{glyph:160,width:63,height:124,advance:85.125,offset_x:14.625,offset_y:-124,scale:.0625,has_glyph:1},{glyph:161,width:35,height:125,advance:42.6875,offset_x:-.75,offset_y:-125,scale:.0625,has_glyph:1},{glyph:162,width:36,height:125,advance:42.6875,offset_x:10.875,offset_y:-125,scale:.0625,has_glyph:1},{glyph:163,width:45,height:124,advance:42.6875,offset_x:-.9375,offset_y:-124,scale:.0625,has_glyph:1},{glyph:164,width:51,height:124,advance:42.6875,offset_x:-3.75,offset_y:-124,scale:.0625,has_glyph:1},{glyph:165,width:87,height:96,advance:95.8125,offset_x:3.0625,offset_y:-96,scale:.0625,has_glyph:1},{glyph:166,width:77,height:125,advance:106.3125,offset_x:15.0625,offset_y:-125,scale:.0625,has_glyph:1},{glyph:167,width:93,height:127,advance:106.8125,offset_x:7.1875,offset_y:-125,scale:.0625,has_glyph:1},{glyph:168,width:93,height:127,advance:106.8125,offset_x:7.1875,offset_y:-125,scale:.0625,has_glyph:1},{glyph:169,width:93,height:126,advance:106.8125,offset_x:7.1875,offset_y:-124,scale:.0625,has_glyph:1},{glyph:170,width:93,height:127,advance:106.8125,offset_x:7.1875,offset_y:-125,scale:.0625,has_glyph:1},{glyph:171,width:93,height:126,advance:106.8125,offset_x:7.1875,offset_y:-124,scale:.0625,has_glyph:1},{glyph:172,width:55,height:55,advance:74.5625,offset_x:10.625,offset_y:-65,scale:.0625,has_glyph:1},{glyph:173,width:93,height:108,advance:106.8125,offset_x:7.1875,offset_y:-103,scale:.0625,has_glyph:1},{glyph:174,width:77,height:127,advance:106.125,offset_x:15,offset_y:-125,scale:.0625,has_glyph:1},{glyph:175,width:77,height:127,advance:106.125,offset_x:15,offset_y:-125,scale:.0625,has_glyph:1},{glyph:176,width:77,height:126,advance:106.125,offset_x:15,offset_y:-124,scale:.0625,has_glyph:1},{glyph:177,width:77,height:126,advance:106.125,offset_x:15,offset_y:-124,scale:.0625,has_glyph:1},{glyph:178,width:84,height:125,advance:84.6875,offset_x:1,offset_y:-125,scale:.0625,has_glyph:1},{glyph:179,width:68,height:96,advance:85,offset_x:14.9375,offset_y:-96,scale:.0625,has_glyph:1},{glyph:180,width:77,height:114,advance:95.8125,offset_x:14.6875,offset_y:-112,scale:.0625,has_glyph:1},{glyph:181,width:63,height:110,advance:74.6875,offset_x:6.125,offset_y:-108,scale:.0625,has_glyph:1},{glyph:182,width:63,height:110,advance:74.6875,offset_x:6.125,offset_y:-108,scale:.0625,has_glyph:1},{glyph:183,width:63,height:109,advance:74.6875,offset_x:6.125,offset_y:-107,scale:.0625,has_glyph:1},{glyph:184,width:63,height:106,advance:74.6875,offset_x:6.125,offset_y:-104,scale:.0625,has_glyph:1},{glyph:185,width:63,height:104,advance:74.6875,offset_x:6.125,offset_y:-102,scale:.0625,has_glyph:1},{glyph:186,width:63,height:115,advance:74.6875,offset_x:6.125,offset_y:-113,scale:.0625,has_glyph:1},{glyph:187,width:104,height:75,advance:117.125,offset_x:6.125,offset_y:-73,scale:.0625,has_glyph:1},{glyph:188,width:61,height:103,advance:74.5625,offset_x:7.5625,offset_y:-73,scale:.0625,has_glyph:1},{glyph:189,width:61,height:110,advance:74.6875,offset_x:7.125,offset_y:-108,scale:.0625,has_glyph:1},{glyph:190,width:61,height:110,advance:74.6875,offset_x:7.125,offset_y:-108,scale:.0625,has_glyph:1},{glyph:191,width:61,height:109,advance:74.6875,offset_x:7.125,offset_y:-107,scale:.0625,has_glyph:1},{glyph:192,width:61,height:104,advance:74.6875,offset_x:7.125,offset_y:-102,scale:.0625,has_glyph:1},{glyph:193,width:42,height:110,advance:42.6875,offset_x:-1.8125,offset_y:-108,scale:.0625,has_glyph:1},{glyph:194,width:33,height:110,advance:42.6875,offset_x:9.4375,offset_y:-108,scale:.0625,has_glyph:1},{glyph:195,width:44,height:109,advance:42.6875,offset_x:-2,offset_y:-107,scale:.0625,has_glyph:1},{glyph:196,width:51,height:104,advance:42.6875,offset_x:-5.5625,offset_y:-102,scale:.0625,has_glyph:1},{glyph:197,width:71,height:120,advance:85.1875,offset_x:8.1875,offset_y:-118,scale:.0625,has_glyph:1},{glyph:198,width:63,height:104,advance:85.25,offset_x:11.5,offset_y:-104,scale:.0625,has_glyph:1},{glyph:199,width:71,height:110,advance:85.375,offset_x:7.5,offset_y:-108,scale:.0625,has_glyph:1},{glyph:200,width:71,height:110,advance:85.375,offset_x:7.5,offset_y:-108,scale:.0625,has_glyph:1},{glyph:201,width:71,height:109,advance:85.375,offset_x:7.5,offset_y:-107,scale:.0625,has_glyph:1},{glyph:202,width:71,height:106,advance:85.375,offset_x:7.5,offset_y:-104,scale:.0625,has_glyph:1},{glyph:203,width:71,height:104,advance:85.375,offset_x:7.5,offset_y:-102,scale:.0625,has_glyph:1},{glyph:204,width:69,height:72,advance:85.1875,offset_x:8.1875,offset_y:-73,scale:.0625,has_glyph:1},{glyph:205,width:71,height:85,advance:85.375,offset_x:7.5,offset_y:-78,scale:.0625,has_glyph:1},{glyph:206,width:64,height:110,advance:85.25,offset_x:11.8125,offset_y:-108,scale:.0625,has_glyph:1},{glyph:207,width:64,height:110,advance:85.25,offset_x:11.8125,offset_y:-108,scale:.0625,has_glyph:1},{glyph:208,width:64,height:109,advance:85.25,offset_x:11.8125,offset_y:-107,scale:.0625,has_glyph:1},{glyph:209,width:64,height:104,advance:85.25,offset_x:11.8125,offset_y:-102,scale:.0625,has_glyph:1},{glyph:210,width:66,height:144,advance:74.5625,offset_x:4.5,offset_y:-108,scale:.0625,has_glyph:1},{glyph:211,width:67,height:147,advance:85.5,offset_x:12.6875,offset_y:-111,scale:.0625,has_glyph:1},{glyph:212,width:66,height:138,advance:74.5625,offset_x:4.6875,offset_y:-102,scale:.0625,has_glyph:1},{glyph:213,width:88,height:121,advance:96,offset_x:4.25,offset_y:-121,scale:.0625,has_glyph:1},{glyph:214,width:63,height:101,advance:74.6875,offset_x:6.125,offset_y:-99,scale:.0625,has_glyph:1},{glyph:215,width:88,height:125,advance:96,offset_x:4.25,offset_y:-125,scale:.0625,has_glyph:1},{glyph:216,width:63,height:106,advance:74.6875,offset_x:6.125,offset_y:-104,scale:.0625,has_glyph:1},{glyph:217,width:91,height:126,advance:96,offset_x:4.25,offset_y:-96,scale:.0625,has_glyph:1},{glyph:218,width:64,height:103,advance:74.6875,offset_x:6.125,offset_y:-73,scale:.0625,has_glyph:1},{glyph:219,width:77,height:127,advance:85.125,offset_x:6.9375,offset_y:-125,scale:.0625,has_glyph:1},{glyph:220,width:61,height:112,advance:74.5625,offset_x:7.5625,offset_y:-108,scale:.0625,has_glyph:1},{glyph:221,width:77,height:126,advance:85.125,offset_x:6.9375,offset_y:-124,scale:.0625,has_glyph:1},{glyph:222,width:61,height:111,advance:74.5625,offset_x:7.5625,offset_y:-107,scale:.0625,has_glyph:1},{glyph:223,width:77,height:127,advance:85.125,offset_x:6.9375,offset_y:-125,scale:.0625,has_glyph:1},{glyph:224,width:61,height:106,advance:74.5625,offset_x:7.5625,offset_y:-102,scale:.0625,has_glyph:1},{glyph:225,width:77,height:127,advance:85.125,offset_x:6.9375,offset_y:-125,scale:.0625,has_glyph:1},{glyph:226,width:61,height:111,advance:74.5625,offset_x:7.5625,offset_y:-107,scale:.0625,has_glyph:1},{glyph:227,width:76,height:125,advance:95.8125,offset_x:14.875,offset_y:-125,scale:.0625,has_glyph:1},{glyph:228,width:95,height:114,advance:95.8125,offset_x:6.9375,offset_y:-112,scale:.0625,has_glyph:1},{glyph:229,width:87,height:96,advance:95.8125,offset_x:3.0625,offset_y:-96,scale:.0625,has_glyph:1},{glyph:230,width:78,height:113,advance:85.25,offset_x:6.9375,offset_y:-111,scale:.0625,has_glyph:1},{glyph:231,width:63,height:121,advance:85.125,offset_x:14.625,offset_y:-121,scale:.0625,has_glyph:1},{glyph:232,width:61,height:101,advance:74.6875,offset_x:7.125,offset_y:-99,scale:.0625,has_glyph:1},{glyph:233,width:63,height:125,advance:85.125,offset_x:14.625,offset_y:-125,scale:.0625,has_glyph:1},{glyph:234,width:61,height:106,advance:74.6875,offset_x:7.125,offset_y:-104,scale:.0625,has_glyph:1},{glyph:235,width:63,height:125,advance:85.125,offset_x:14.625,offset_y:-125,scale:.0625,has_glyph:1},{glyph:236,width:61,height:104,advance:74.6875,offset_x:7.125,offset_y:-102,scale:.0625,has_glyph:1},{glyph:237,width:63,height:126,advance:85.125,offset_x:14.625,offset_y:-96,scale:.0625,has_glyph:1},{glyph:238,width:61,height:103,advance:74.6875,offset_x:7.125,offset_y:-73,scale:.0625,has_glyph:1},{glyph:239,width:63,height:125,advance:85.125,offset_x:14.625,offset_y:-125,scale:.0625,has_glyph:1},{glyph:240,width:61,height:109,advance:74.6875,offset_x:7.125,offset_y:-107,scale:.0625,has_glyph:1},{glyph:241,width:82,height:126,advance:95.8125,offset_x:8.6875,offset_y:-124,scale:.0625,has_glyph:1},{glyph:242,width:66,height:143,advance:74.5625,offset_x:6.8125,offset_y:-107,scale:.0625,has_glyph:1},{glyph:243,width:82,height:127,advance:95.8125,offset_x:8.6875,offset_y:-125,scale:.0625,has_glyph:1},{glyph:244,width:66,height:140,advance:74.5625,offset_x:6.8125,offset_y:-104,scale:.0625,has_glyph:1},{glyph:245,width:82,height:127,advance:95.8125,offset_x:8.6875,offset_y:-125,scale:.0625,has_glyph:1},{glyph:246,width:66,height:138,advance:74.5625,offset_x:6.8125,offset_y:-102,scale:.0625,has_glyph:1},{glyph:247,width:82,height:134,advance:95.8125,offset_x:8.6875,offset_y:-98,scale:.0625,has_glyph:1},{glyph:248,width:66,height:146,advance:74.5625,offset_x:6.8125,offset_y:-110,scale:.0625,has_glyph:1},{glyph:249,width:79,height:124,advance:106.1875,offset_x:14.125,offset_y:-124,scale:.0625,has_glyph:1},{glyph:250,width:62,height:124,advance:85.25,offset_x:13.375,offset_y:-124,scale:.0625,has_glyph:1},{glyph:251,width:95,height:96,advance:106.1875,offset_x:5.625,offset_y:-96,scale:.0625,has_glyph:1},{glyph:252,width:74,height:111,advance:85.25,offset_x:1.875,offset_y:-111,scale:.0625,has_glyph:1},{glyph:253,width:49,height:125,advance:42.6875,offset_x:-2.875,offset_y:-125,scale:.0625,has_glyph:1},{glyph:254,width:49,height:106,advance:42.6875,offset_x:-3.3125,offset_y:-104,scale:.0625,has_glyph:1},{glyph:255,width:39,height:121,advance:42.6875,offset_x:2.375,offset_y:-121,scale:.0625,has_glyph:1},{glyph:256,width:40,height:101,advance:42.6875,offset_x:.1875,offset_y:-99,scale:.0625,has_glyph:1},{glyph:257,width:43,height:125,advance:42.6875,offset_x:0,offset_y:-125,scale:.0625,has_glyph:1},{glyph:258,width:44,height:106,advance:42.6875,offset_x:-1.75,offset_y:-104,scale:.0625,has_glyph:1},{glyph:259,width:29,height:126,advance:42.6875,offset_x:7.8125,offset_y:-96,scale:.0625,has_glyph:1},{glyph:260,width:32,height:133,advance:42.6875,offset_x:8.875,offset_y:-103,scale:.0625,has_glyph:1},{glyph:261,width:21,height:125,advance:42.6875,offset_x:11.0625,offset_y:-125,scale:.0625,has_glyph:1},{glyph:262,width:29,height:73,advance:42.6875,offset_x:11.375,offset_y:-71,scale:.0625,has_glyph:1},{glyph:263,width:72,height:98,advance:95.8125,offset_x:13.5,offset_y:-96,scale:.0625,has_glyph:1},{glyph:264,width:67,height:139,advance:85.375,offset_x:8.875,offset_y:-103,scale:.0625,has_glyph:1},{glyph:265,width:55,height:126,advance:53.125,offset_x:1.9375,offset_y:-124,scale:.0625,has_glyph:1},{glyph:266,width:47,height:143,advance:42.6875,offset_x:-3.625,offset_y:-107,scale:.0625,has_glyph:1},{glyph:267,width:74,height:133,advance:85.25,offset_x:13.5,offset_y:-97,scale:.0625,has_glyph:1},{glyph:268,width:62,height:147,advance:74.75,offset_x:11.875,offset_y:-111,scale:.0625,has_glyph:1},{glyph:269,width:62,height:75,advance:74.75,offset_x:11.875,offset_y:-73,scale:.0625,has_glyph:1},{glyph:270,width:54,height:125,advance:74.6875,offset_x:14.9375,offset_y:-125,scale:.0625,has_glyph:1},{glyph:271,width:36,height:127,advance:42.6875,offset_x:10.75,offset_y:-125,scale:.0625,has_glyph:1},{glyph:272,width:54,height:132,advance:74.6875,offset_x:14.9375,offset_y:-96,scale:.0625,has_glyph:1},{glyph:273,width:30,height:147,advance:42.6875,offset_x:11.6875,offset_y:-111,scale:.0625,has_glyph:1},{glyph:274,width:54,height:97,advance:74.6875,offset_x:14.9375,offset_y:-97,scale:.0625,has_glyph:1},{glyph:275,width:43,height:114,advance:53.5625,offset_x:11.6875,offset_y:-112,scale:.0625,has_glyph:1},{glyph:276,width:55,height:96,advance:74.6875,offset_x:15,offset_y:-96,scale:.0625,has_glyph:1},{glyph:277,width:56,height:113,advance:74.75,offset_x:11.6875,offset_y:-111,scale:.0625,has_glyph:1},{glyph:278,width:64,height:96,advance:74.6875,offset_x:4.375,offset_y:-96,scale:.0625,has_glyph:1},{glyph:279,width:41,height:113,advance:42.6875,offset_x:1.5,offset_y:-111,scale:.0625,has_glyph:1},{glyph:280,width:77,height:125,advance:106.3125,offset_x:15.0625,offset_y:-125,scale:.0625,has_glyph:1},{glyph:281,width:63,height:108,advance:85.25,offset_x:11.5,offset_y:-108,scale:.0625,has_glyph:1},{glyph:282,width:77,height:132,advance:106.3125,offset_x:15.0625,offset_y:-96,scale:.0625,has_glyph:1},{glyph:283,width:63,height:109,advance:85.25,offset_x:11.5,offset_y:-73,scale:.0625,has_glyph:1},{glyph:284,width:77,height:124,advance:106.3125,offset_x:15.0625,offset_y:-124,scale:.0625,has_glyph:1},{glyph:285,width:63,height:107,advance:85.25,offset_x:11.5,offset_y:-107,scale:.0625,has_glyph:1},{glyph:286,width:77,height:132,advance:106.3125,offset_x:15.0625,offset_y:-96,scale:.0625,has_glyph:1},{glyph:287,width:63,height:109,advance:85.25,offset_x:11.5,offset_y:-73,scale:.0625,has_glyph:1},{glyph:288,width:93,height:123,advance:106.8125,offset_x:7.1875,offset_y:-121,scale:.0625,has_glyph:1},{glyph:289,width:71,height:101,advance:85.375,offset_x:7.5,offset_y:-99,scale:.0625,has_glyph:1},{glyph:290,width:93,height:127,advance:106.8125,offset_x:7.1875,offset_y:-125,scale:.0625,has_glyph:1},{glyph:291,width:71,height:106,advance:85.375,offset_x:7.5,offset_y:-104,scale:.0625,has_glyph:1},{glyph:292,width:93,height:127,advance:106.8125,offset_x:7.1875,offset_y:-125,scale:.0625,has_glyph:1},{glyph:293,width:73,height:110,advance:85.375,offset_x:7.5,offset_y:-108,scale:.0625,has_glyph:1},{glyph:294,width:123,height:100,advance:138.3125,offset_x:7.1875,offset_y:-98,scale:.0625,has_glyph:1},{glyph:295,width:114,height:75,advance:127.75,offset_x:7.5,offset_y:-73,scale:.0625,has_glyph:1},{glyph:296,width:76,height:127,advance:95.8125,offset_x:14.625,offset_y:-125,scale:.0625,has_glyph:1},{glyph:297,width:45,height:108,advance:53.3125,offset_x:9.9375,offset_y:-108,scale:.0625,has_glyph:1},{glyph:298,width:76,height:132,advance:95.8125,offset_x:14.625,offset_y:-96,scale:.0625,has_glyph:1},{glyph:299,width:45,height:109,advance:53.3125,offset_x:9.9375,offset_y:-73,scale:.0625,has_glyph:1},{glyph:300,width:76,height:127,advance:95.8125,offset_x:14.625,offset_y:-125,scale:.0625,has_glyph:1},{glyph:301,width:46,height:107,advance:53.3125,offset_x:8.375,offset_y:-107,scale:.0625,has_glyph:1},{glyph:302,width:63,height:127,advance:74.625,offset_x:6.875,offset_y:-125,scale:.0625,has_glyph:1},{glyph:303,width:51,height:110,advance:64,offset_x:7.25,offset_y:-108,scale:.0625,has_glyph:1},{glyph:304,width:63,height:126,advance:74.625,offset_x:6.875,offset_y:-124,scale:.0625,has_glyph:1},{glyph:305,width:51,height:109,advance:64,offset_x:7.25,offset_y:-107,scale:.0625,has_glyph:1},{glyph:306,width:63,height:128,advance:74.625,offset_x:6.875,offset_y:-98,scale:.0625,has_glyph:1},{glyph:307,width:51,height:103,advance:64,offset_x:7.25,offset_y:-73,scale:.0625,has_glyph:1},{glyph:308,width:63,height:127,advance:74.625,offset_x:6.875,offset_y:-125,scale:.0625,has_glyph:1},{glyph:309,width:51,height:109,advance:64,offset_x:7.25,offset_y:-107,scale:.0625,has_glyph:1},{glyph:310,width:70,height:132,advance:74.5,offset_x:2.75,offset_y:-96,scale:.0625,has_glyph:1}],ws=[{glyph:22,codepoint:32},{glyph:23,codepoint:33},{glyph:24,codepoint:34},{glyph:25,codepoint:35},{glyph:26,codepoint:36},{glyph:27,codepoint:37},{glyph:28,codepoint:38},{glyph:29,codepoint:39},{glyph:30,codepoint:40},{glyph:31,codepoint:41},{glyph:32,codepoint:42},{glyph:33,codepoint:43},{glyph:34,codepoint:44},{glyph:35,codepoint:45},{glyph:36,codepoint:46},{glyph:37,codepoint:47},{glyph:38,codepoint:48},{glyph:39,codepoint:49},{glyph:40,codepoint:50},{glyph:41,codepoint:51},{glyph:42,codepoint:52},{glyph:43,codepoint:53},{glyph:44,codepoint:54},{glyph:45,codepoint:55},{glyph:46,codepoint:56},{glyph:47,codepoint:57},{glyph:48,codepoint:58},{glyph:49,codepoint:59},{glyph:50,codepoint:60},{glyph:51,codepoint:61},{glyph:52,codepoint:62},{glyph:53,codepoint:63},{glyph:54,codepoint:64},{glyph:55,codepoint:65},{glyph:56,codepoint:66},{glyph:57,codepoint:67},{glyph:58,codepoint:68},{glyph:59,codepoint:69},{glyph:60,codepoint:70},{glyph:61,codepoint:71},{glyph:62,codepoint:72},{glyph:63,codepoint:73},{glyph:64,codepoint:74},{glyph:65,codepoint:75},{glyph:66,codepoint:76},{glyph:67,codepoint:77},{glyph:68,codepoint:78},{glyph:69,codepoint:79},{glyph:70,codepoint:80},{glyph:71,codepoint:81},{glyph:72,codepoint:82},{glyph:73,codepoint:83},{glyph:74,codepoint:84},{glyph:75,codepoint:85},{glyph:76,codepoint:86},{glyph:77,codepoint:87},{glyph:78,codepoint:88},{glyph:79,codepoint:89},{glyph:80,codepoint:90},{glyph:81,codepoint:91},{glyph:82,codepoint:92},{glyph:83,codepoint:93},{glyph:84,codepoint:94},{glyph:85,codepoint:95},{glyph:86,codepoint:96},{glyph:87,codepoint:97},{glyph:88,codepoint:98},{glyph:89,codepoint:99},{glyph:90,codepoint:100},{glyph:91,codepoint:101},{glyph:92,codepoint:102},{glyph:93,codepoint:103},{glyph:94,codepoint:104},{glyph:95,codepoint:105},{glyph:96,codepoint:106},{glyph:97,codepoint:107},{glyph:98,codepoint:108},{glyph:99,codepoint:109},{glyph:100,codepoint:110},{glyph:101,codepoint:111},{glyph:102,codepoint:112},{glyph:103,codepoint:113},{glyph:104,codepoint:114},{glyph:105,codepoint:115},{glyph:106,codepoint:116},{glyph:107,codepoint:117},{glyph:108,codepoint:118},{glyph:109,codepoint:119},{glyph:110,codepoint:120},{glyph:111,codepoint:121},{glyph:112,codepoint:122},{glyph:113,codepoint:123},{glyph:114,codepoint:124},{glyph:115,codepoint:125},{glyph:116,codepoint:126},{glyph:118,codepoint:161},{glyph:119,codepoint:162},{glyph:120,codepoint:163},{glyph:121,codepoint:164},{glyph:122,codepoint:165},{glyph:123,codepoint:166},{glyph:124,codepoint:167},{glyph:125,codepoint:168},{glyph:126,codepoint:169},{glyph:127,codepoint:170},{glyph:128,codepoint:171},{glyph:129,codepoint:172},{glyph:130,codepoint:173},{glyph:131,codepoint:174},{glyph:132,codepoint:175},{glyph:133,codepoint:176},{glyph:134,codepoint:177},{glyph:135,codepoint:178},{glyph:136,codepoint:179},{glyph:137,codepoint:180},{glyph:138,codepoint:181},{glyph:139,codepoint:182},{glyph:140,codepoint:183},{glyph:141,codepoint:184},{glyph:142,codepoint:185},{glyph:143,codepoint:186},{glyph:144,codepoint:187},{glyph:145,codepoint:188},{glyph:146,codepoint:189},{glyph:147,codepoint:190},{glyph:148,codepoint:191},{glyph:149,codepoint:192},{glyph:150,codepoint:193},{glyph:151,codepoint:194},{glyph:152,codepoint:195},{glyph:153,codepoint:196},{glyph:154,codepoint:197},{glyph:155,codepoint:198},{glyph:156,codepoint:199},{glyph:157,codepoint:200},{glyph:158,codepoint:201},{glyph:159,codepoint:202},{glyph:160,codepoint:203},{glyph:161,codepoint:204},{glyph:162,codepoint:205},{glyph:163,codepoint:206},{glyph:164,codepoint:207},{glyph:165,codepoint:208},{glyph:166,codepoint:209},{glyph:167,codepoint:210},{glyph:168,codepoint:211},{glyph:169,codepoint:212},{glyph:170,codepoint:213},{glyph:171,codepoint:214},{glyph:172,codepoint:215},{glyph:173,codepoint:216},{glyph:174,codepoint:217},{glyph:175,codepoint:218},{glyph:176,codepoint:219},{glyph:177,codepoint:220},{glyph:178,codepoint:221},{glyph:179,codepoint:222},{glyph:180,codepoint:223},{glyph:181,codepoint:224},{glyph:182,codepoint:225},{glyph:183,codepoint:226},{glyph:184,codepoint:227},{glyph:185,codepoint:228},{glyph:186,codepoint:229},{glyph:187,codepoint:230},{glyph:188,codepoint:231},{glyph:189,codepoint:232},{glyph:190,codepoint:233},{glyph:191,codepoint:234},{glyph:192,codepoint:235},{glyph:193,codepoint:236},{glyph:194,codepoint:237},{glyph:195,codepoint:238},{glyph:196,codepoint:239},{glyph:197,codepoint:240},{glyph:198,codepoint:241},{glyph:199,codepoint:242},{glyph:200,codepoint:243},{glyph:201,codepoint:244},{glyph:202,codepoint:245},{glyph:203,codepoint:246},{glyph:204,codepoint:247},{glyph:205,codepoint:248},{glyph:206,codepoint:249},{glyph:207,codepoint:250},{glyph:208,codepoint:251},{glyph:209,codepoint:252},{glyph:210,codepoint:253},{glyph:211,codepoint:254},{glyph:212,codepoint:255},{glyph:213,codepoint:256},{glyph:214,codepoint:257},{glyph:215,codepoint:258},{glyph:216,codepoint:259},{glyph:217,codepoint:260},{glyph:218,codepoint:261},{glyph:219,codepoint:262},{glyph:220,codepoint:263},{glyph:221,codepoint:264},{glyph:222,codepoint:265},{glyph:223,codepoint:266},{glyph:224,codepoint:267},{glyph:225,codepoint:268},{glyph:226,codepoint:269},{glyph:227,codepoint:270},{glyph:228,codepoint:271},{glyph:229,codepoint:272},{glyph:230,codepoint:273},{glyph:231,codepoint:274},{glyph:232,codepoint:275},{glyph:233,codepoint:276},{glyph:234,codepoint:277},{glyph:235,codepoint:278},{glyph:236,codepoint:279},{glyph:237,codepoint:280},{glyph:238,codepoint:281},{glyph:239,codepoint:282},{glyph:240,codepoint:283},{glyph:241,codepoint:284},{glyph:242,codepoint:285},{glyph:243,codepoint:286},{glyph:244,codepoint:287},{glyph:245,codepoint:288},{glyph:246,codepoint:289},{glyph:247,codepoint:290},{glyph:248,codepoint:291},{glyph:249,codepoint:292},{glyph:250,codepoint:293},{glyph:251,codepoint:294},{glyph:252,codepoint:295},{glyph:253,codepoint:296},{glyph:254,codepoint:297},{glyph:255,codepoint:298},{glyph:256,codepoint:299},{glyph:257,codepoint:300},{glyph:258,codepoint:301},{glyph:259,codepoint:302},{glyph:260,codepoint:303},{glyph:261,codepoint:304},{glyph:262,codepoint:305},{glyph:263,codepoint:306},{glyph:264,codepoint:307},{glyph:265,codepoint:308},{glyph:266,codepoint:309},{glyph:267,codepoint:310},{glyph:268,codepoint:311},{glyph:269,codepoint:312},{glyph:270,codepoint:313},{glyph:271,codepoint:314},{glyph:272,codepoint:315},{glyph:273,codepoint:316},{glyph:274,codepoint:317},{glyph:275,codepoint:318},{glyph:276,codepoint:319},{glyph:277,codepoint:320},{glyph:278,codepoint:321},{glyph:279,codepoint:322},{glyph:280,codepoint:323},{glyph:281,codepoint:324},{glyph:282,codepoint:325},{glyph:283,codepoint:326},{glyph:284,codepoint:327},{glyph:285,codepoint:328},{glyph:286,codepoint:330},{glyph:287,codepoint:331},{glyph:288,codepoint:332},{glyph:289,codepoint:333},{glyph:290,codepoint:334},{glyph:291,codepoint:335},{glyph:292,codepoint:336},{glyph:293,codepoint:337},{glyph:294,codepoint:338},{glyph:295,codepoint:339},{glyph:296,codepoint:340},{glyph:297,codepoint:341},{glyph:298,codepoint:342},{glyph:299,codepoint:343},{glyph:300,codepoint:344},{glyph:301,codepoint:345},{glyph:302,codepoint:346},{glyph:303,codepoint:347},{glyph:304,codepoint:348},{glyph:305,codepoint:349},{glyph:306,codepoint:350},{glyph:307,codepoint:351},{glyph:308,codepoint:352},{glyph:309,codepoint:353},{glyph:310,codepoint:354}],ks=[{glyph:23,frame:{x:2,y:2,w:23,h:102},packed:{x:253,y:1014,w:27,h:106}},{glyph:24,frame:{x:2,y:2,w:42,h:40},packed:{x:1354,y:1413,w:46,h:44}},{glyph:25,frame:{x:2,y:2,w:77,h:87},packed:{x:0,y:1322,w:81,h:91}},{glyph:26,frame:{x:2,y:2,w:57,h:127},packed:{x:383,y:151,w:61,h:131}},{glyph:27,frame:{x:2,y:2,w:118,h:103},packed:{x:1196,y:904,w:122,h:107}},{glyph:28,frame:{x:2,y:2,w:71,h:94},packed:{x:733,y:1222,w:75,h:98}},{glyph:29,frame:{x:2,y:2,w:16,h:40},packed:{x:1400,y:1413,w:20,h:44}},{glyph:30,frame:{x:2,y:2,w:35,h:141},packed:{x:594,y:0,w:39,h:145}},{glyph:31,frame:{x:2,y:2,w:36,h:141},packed:{x:633,y:0,w:40,h:145}},{glyph:32,frame:{x:2,y:2,w:73,h:67},packed:{x:380,y:1413,w:77,h:71}},{glyph:33,frame:{x:2,y:2,w:69,h:69},packed:{x:307,y:1413,w:73,h:73}},{glyph:34,frame:{x:2,y:2,w:23,h:47},packed:{x:1256,y:1413,w:27,h:51}},{glyph:35,frame:{x:2,y:2,w:46,h:13},packed:{x:232,y:1489,w:50,h:17}},{glyph:36,frame:{x:2,y:2,w:22,h:23},packed:{x:82,y:1489,w:26,h:27}},{glyph:37,frame:{x:2,y:2,w:40,h:111},packed:{x:188,y:675,w:44,h:115}},{glyph:38,frame:{x:2,y:2,w:71,h:79},packed:{x:156,y:1322,w:75,h:83}},{glyph:39,frame:{x:2,y:2,w:35,h:76},packed:{x:432,y:1322,w:39,h:80}},{glyph:40,frame:{x:2,y:2,w:59,h:77},packed:{x:231,y:1322,w:63,h:81}},{glyph:41,frame:{x:2,y:2,w:61,h:94},packed:{x:808,y:1222,w:65,h:98}},{glyph:42,frame:{x:2,y:2,w:69,h:94},packed:{x:873,y:1222,w:73,h:98}},{glyph:43,frame:{x:2,y:2,w:65,h:92},packed:{x:1152,y:1222,w:69,h:96}},{glyph:44,frame:{x:2,y:2,w:65,h:93},packed:{x:1015,y:1222,w:69,h:97}},{glyph:45,frame:{x:2,y:2,w:57,h:92},packed:{x:1221,y:1222,w:61,h:96}},{glyph:46,frame:{x:2,y:2,w:64,h:93},packed:{x:1084,y:1222,w:68,h:97}},{glyph:47,frame:{x:2,y:2,w:65,h:94},packed:{x:946,y:1222,w:69,h:98}},{glyph:48,frame:{x:2,y:2,w:23,h:72},packed:{x:1352,y:1322,w:27,h:76}},{glyph:49,frame:{x:2,y:2,w:23,h:96},packed:{x:159,y:1121,w:27,h:100}},{glyph:50,frame:{x:2,y:2,w:65,h:62},packed:{x:895,y:1413,w:69,h:66}},{glyph:51,frame:{x:2,y:2,w:67,h:41},packed:{x:1283,y:1413,w:71,h:45}},{glyph:52,frame:{x:2,y:2,w:65,h:62},packed:{x:964,y:1413,w:69,h:66}},{glyph:53,frame:{x:2,y:2,w:59,h:103},packed:{x:1318,y:904,w:63,h:107}},{glyph:54,frame:{x:2,y:2,w:94,h:106},packed:{x:1081,y:791,w:98,h:110}},{glyph:55,frame:{x:2,y:2,w:88,h:96},packed:{x:186,y:1121,w:92,h:100}},{glyph:56,frame:{x:2,y:2,w:73,h:96},packed:{x:278,y:1121,w:77,h:100}},{glyph:57,frame:{x:2,y:2,w:77,h:100},packed:{x:636,y:1014,w:81,h:104}},{glyph:58,frame:{x:2,y:2,w:76,h:96},packed:{x:355,y:1121,w:80,h:100}},{glyph:59,frame:{x:2,y:2,w:63,h:96},packed:{x:435,y:1121,w:67,h:100}},{glyph:60,frame:{x:2,y:2,w:59,h:96},packed:{x:502,y:1121,w:63,h:100}},{glyph:61,frame:{x:2,y:2,w:82,h:100},packed:{x:717,y:1014,w:86,h:104}},{glyph:62,frame:{x:2,y:2,w:79,h:96},packed:{x:565,y:1121,w:83,h:100}},{glyph:63,frame:{x:2,y:2,w:17,h:96},packed:{x:648,y:1121,w:21,h:100}},{glyph:64,frame:{x:2,y:2,w:41,h:98},packed:{x:1094,y:1014,w:45,h:102}},{glyph:65,frame:{x:2,y:2,w:74,h:102},packed:{x:280,y:1014,w:78,h:106}},{glyph:66,frame:{x:2,y:2,w:54,h:96},packed:{x:669,y:1121,w:58,h:100}},{glyph:67,frame:{x:2,y:2,w:113,h:96},packed:{x:727,y:1121,w:117,h:100}},{glyph:68,frame:{x:2,y:2,w:77,h:96},packed:{x:844,y:1121,w:81,h:100}},{glyph:69,frame:{x:2,y:2,w:93,h:100},packed:{x:803,y:1014,w:97,h:104}},{glyph:70,frame:{x:2,y:2,w:68,h:96},packed:{x:925,y:1121,w:72,h:100}},{glyph:71,frame:{x:2,y:2,w:98,h:118},packed:{x:674,y:547,w:102,h:122}},{glyph:72,frame:{x:2,y:2,w:76,h:98},packed:{x:1139,y:1014,w:80,h:102}},{glyph:73,frame:{x:2,y:2,w:63,h:100},packed:{x:900,y:1014,w:67,h:104}},{glyph:74,frame:{x:2,y:2,w:70,h:96},packed:{x:997,y:1121,w:74,h:100}},{glyph:75,frame:{x:2,y:2,w:77,h:98},packed:{x:1219,y:1014,w:81,h:102}},{glyph:76,frame:{x:2,y:2,w:83,h:96},packed:{x:1071,y:1121,w:87,h:100}},{glyph:77,frame:{x:2,y:2,w:126,h:96},packed:{x:1158,y:1121,w:130,h:100}},{glyph:78,frame:{x:2,y:2,w:78,h:96},packed:{x:1288,y:1121,w:82,h:100}},{glyph:79,frame:{x:2,y:2,w:84,h:96},packed:{x:1370,y:1121,w:88,h:100}},{glyph:80,frame:{x:2,y:2,w:67,h:96},packed:{x:0,y:1222,w:71,h:100}},{glyph:81,frame:{x:2,y:2,w:33,h:140},packed:{x:673,y:0,w:37,h:144}},{glyph:82,frame:{x:2,y:2,w:40,h:111},packed:{x:232,y:675,w:44,h:115}},{glyph:83,frame:{x:2,y:2,w:33,h:140},packed:{x:710,y:0,w:37,h:144}},{glyph:84,frame:{x:2,y:2,w:60,h:65},packed:{x:580,y:1413,w:64,h:69}},{glyph:85,frame:{x:2,y:2,w:104,h:13},packed:{x:282,y:1489,w:108,h:17}},{glyph:86,frame:{x:2,y:2,w:33,h:28},packed:{x:1449,y:1359,w:37,h:32}},{glyph:87,frame:{x:2,y:2,w:63,h:75},packed:{x:471,y:1322,w:67,h:79}},{glyph:88,frame:{x:2,y:2,w:67,h:113},packed:{x:1070,y:547,w:71,h:117}},{glyph:89,frame:{x:2,y:2,w:61,h:77},packed:{x:294,y:1322,w:65,h:81}},{glyph:90,frame:{x:2,y:2,w:70,h:113},packed:{x:1141,y:547,w:74,h:117}},{glyph:91,frame:{x:2,y:2,w:61,h:75},packed:{x:538,y:1322,w:65,h:79}},{glyph:92,frame:{x:2,y:2,w:54,h:112},packed:{x:0,y:675,w:58,h:116}},{glyph:93,frame:{x:2,y:2,w:66,h:120},packed:{x:529,y:547,w:70,h:124}},{glyph:94,frame:{x:2,y:2,w:62,h:111},packed:{x:276,y:675,w:66,h:115}},{glyph:95,frame:{x:2,y:2,w:32,h:105},packed:{x:241,y:904,w:36,h:109}},{glyph:96,frame:{x:2,y:2,w:36,h:139},packed:{x:817,y:0,w:40,h:143}},{glyph:97,frame:{x:2,y:2,w:62,h:113},packed:{x:1215,y:547,w:66,h:117}},{glyph:98,frame:{x:2,y:2,w:30,h:113},packed:{x:1281,y:547,w:34,h:117}},{glyph:99,frame:{x:2,y:2,w:106,h:73},packed:{x:1025,y:1322,w:110,h:77}},{glyph:100,frame:{x:2,y:2,w:63,h:73},packed:{x:1135,y:1322,w:67,h:77}},{glyph:101,frame:{x:2,y:2,w:71,h:75},packed:{x:603,y:1322,w:75,h:79}},{glyph:102,frame:{x:2,y:2,w:69,h:109},packed:{x:1315,y:675,w:73,h:113}},{glyph:103,frame:{x:2,y:2,w:66,h:109},packed:{x:1388,y:675,w:70,h:113}},{glyph:104,frame:{x:2,y:2,w:45,h:73},packed:{x:1202,y:1322,w:49,h:77}},{glyph:105,frame:{x:2,y:2,w:51,h:75},packed:{x:678,y:1322,w:55,h:79}},{glyph:106,frame:{x:2,y:2,w:50,h:91},packed:{x:1282,y:1222,w:54,h:95}},{glyph:107,frame:{x:2,y:2,w:64,h:73},packed:{x:1251,y:1322,w:68,h:77}},{glyph:108,frame:{x:2,y:2,w:66,h:72},packed:{x:1379,y:1322,w:70,h:76}},{glyph:109,frame:{x:2,y:2,w:107,h:72},packed:{x:0,y:1413,w:111,h:76}},{glyph:110,frame:{x:2,y:2,w:61,h:71},packed:{x:184,y:1413,w:65,h:75}},{glyph:111,frame:{x:2,y:2,w:66,h:107},packed:{x:894,y:791,w:70,h:111}},{glyph:112,frame:{x:2,y:2,w:54,h:71},packed:{x:249,y:1413,w:58,h:75}},{glyph:113,frame:{x:2,y:2,w:42,h:144},packed:{x:241,y:0,w:46,h:148}},{glyph:114,frame:{x:2,y:2,w:14,h:139},packed:{x:857,y:0,w:18,h:143}},{glyph:115,frame:{x:2,y:2,w:42,h:144},packed:{x:287,y:0,w:46,h:148}},{glyph:116,frame:{x:2,y:2,w:78,h:27},packed:{x:0,y:1489,w:82,h:31}},{glyph:118,frame:{x:2,y:2,w:23,h:102},packed:{x:358,y:1014,w:27,h:106}},{glyph:119,frame:{x:2,y:2,w:61,h:112},packed:{x:58,y:675,w:65,h:116}},{glyph:120,frame:{x:2,y:2,w:56,h:91},packed:{x:1336,y:1222,w:60,h:95}},{glyph:121,frame:{x:2,y:2,w:66,h:66},packed:{x:457,y:1413,w:70,h:70}},{glyph:122,frame:{x:2,y:2,w:79,h:90},packed:{x:1396,y:1222,w:83,h:94}},{glyph:123,frame:{x:2,y:2,w:14,h:138},packed:{x:946,y:0,w:18,h:142}},{glyph:124,frame:{x:2,y:2,w:66,h:142},packed:{x:524,y:0,w:70,h:146}},{glyph:125,frame:{x:2,y:2,w:51,h:20},packed:{x:134,y:1489,w:55,h:24}},{glyph:126,frame:{x:2,y:2,w:97,h:97},packed:{x:1376,y:1014,w:101,h:101}},{glyph:127,frame:{x:2,y:2,w:51,h:61},packed:{x:1033,y:1413,w:55,h:65}},{glyph:128,frame:{x:2,y:2,w:77,h:63},packed:{x:732,y:1413,w:81,h:67}},{glyph:129,frame:{x:2,y:2,w:75,h:40},packed:{x:1420,y:1413,w:79,h:44}},{glyph:131,frame:{x:2,y:2,w:97,h:97},packed:{x:0,y:1121,w:101,h:101}},{glyph:132,frame:{x:2,y:2,w:39,h:14},packed:{x:189,y:1489,w:43,h:18}},{glyph:133,frame:{x:2,y:2,w:47,h:49},packed:{x:1205,y:1413,w:51,h:53}},{glyph:134,frame:{x:2,y:2,w:69,h:77},packed:{x:359,y:1322,w:73,h:81}},{glyph:135,frame:{x:2,y:2,w:49,h:64},packed:{x:644,y:1413,w:53,h:68}},{glyph:136,frame:{x:2,y:2,w:49,h:66},packed:{x:527,y:1413,w:53,h:70}},{glyph:137,frame:{x:2,y:2,w:34,h:28},packed:{x:1458,y:1121,w:38,h:32}},{glyph:138,frame:{x:2,y:2,w:64,h:105},packed:{x:277,y:904,w:68,h:109}},{glyph:139,frame:{x:2,y:2,w:69,h:96},packed:{x:71,y:1222,w:73,h:100}},{glyph:140,frame:{x:2,y:2,w:22,h:23},packed:{x:108,y:1489,w:26,h:27}},{glyph:141,frame:{x:2,y:2,w:32,h:33},packed:{x:1449,y:1322,w:36,h:37}},{glyph:142,frame:{x:2,y:2,w:31,h:64},packed:{x:697,y:1413,w:35,h:68}},{glyph:143,frame:{x:2,y:2,w:54,h:61},packed:{x:1088,y:1413,w:58,h:65}},{glyph:144,frame:{x:2,y:2,w:78,h:63},packed:{x:813,y:1413,w:82,h:67}},{glyph:145,frame:{x:2,y:2,w:121,h:105},packed:{x:345,y:904,w:125,h:109}},{glyph:146,frame:{x:2,y:2,w:122,h:105},packed:{x:470,y:904,w:126,h:109}},{glyph:147,frame:{x:2,y:2,w:134,h:105},packed:{x:596,y:904,w:138,h:109}},{glyph:148,frame:{x:2,y:2,w:59,h:103},packed:{x:1381,y:904,w:63,h:107}},{glyph:149,frame:{x:2,y:2,w:88,h:125},packed:{x:1235,y:287,w:92,h:129}},{glyph:150,frame:{x:2,y:2,w:88,h:125},packed:{x:1327,y:287,w:92,h:129}},{glyph:151,frame:{x:2,y:2,w:88,h:124},packed:{x:1111,y:418,w:92,h:128}},{glyph:152,frame:{x:2,y:2,w:88,h:125},packed:{x:0,y:418,w:92,h:129}},{glyph:153,frame:{x:2,y:2,w:88,h:124},packed:{x:1203,y:418,w:92,h:128}},{glyph:154,frame:{x:2,y:2,w:88,h:124},packed:{x:1295,y:418,w:92,h:128}},{glyph:155,frame:{x:2,y:2,w:105,h:96},packed:{x:144,y:1222,w:109,h:100}},{glyph:156,frame:{x:2,y:2,w:77,h:128},packed:{x:235,y:151,w:81,h:132}},{glyph:157,frame:{x:2,y:2,w:63,h:125},packed:{x:92,y:418,w:67,h:129}},{glyph:158,frame:{x:2,y:2,w:63,h:125},packed:{x:159,y:418,w:67,h:129}},{glyph:159,frame:{x:2,y:2,w:63,h:124},packed:{x:1387,y:418,w:67,h:128}},{glyph:160,frame:{x:2,y:2,w:63,h:124},packed:{x:1419,y:287,w:67,h:128}},{glyph:161,frame:{x:2,y:2,w:35,h:125},packed:{x:226,y:418,w:39,h:129}},{glyph:162,frame:{x:2,y:2,w:36,h:125},packed:{x:265,y:418,w:40,h:129}},{glyph:163,frame:{x:2,y:2,w:45,h:124},packed:{x:1449,y:151,w:49,h:128}},{glyph:164,frame:{x:2,y:2,w:51,h:124},packed:{x:1443,y:0,w:55,h:128}},{glyph:165,frame:{x:2,y:2,w:87,h:96},packed:{x:253,y:1222,w:91,h:100}},{glyph:166,frame:{x:2,y:2,w:77,h:125},packed:{x:305,y:418,w:81,h:129}},{glyph:167,frame:{x:2,y:2,w:93,h:127},packed:{x:444,y:151,w:97,h:131}},{glyph:168,frame:{x:2,y:2,w:93,h:127},packed:{x:541,y:151,w:97,h:131}},{glyph:169,frame:{x:2,y:2,w:93,h:126},packed:{x:391,y:287,w:97,h:130}},{glyph:170,frame:{x:2,y:2,w:93,h:127},packed:{x:638,y:151,w:97,h:131}},{glyph:171,frame:{x:2,y:2,w:93,h:126},packed:{x:488,y:287,w:97,h:130}},{glyph:172,frame:{x:2,y:2,w:55,h:55},packed:{x:1146,y:1413,w:59,h:59}},{glyph:173,frame:{x:2,y:2,w:93,h:108},packed:{x:681,y:791,w:97,h:112}},{glyph:174,frame:{x:2,y:2,w:77,h:127},packed:{x:735,y:151,w:81,h:131}},{glyph:175,frame:{x:2,y:2,w:77,h:127},packed:{x:816,y:151,w:81,h:131}},{glyph:176,frame:{x:2,y:2,w:77,h:126},packed:{x:585,y:287,w:81,h:130}},{glyph:177,frame:{x:2,y:2,w:77,h:126},packed:{x:666,y:287,w:81,h:130}},{glyph:178,frame:{x:2,y:2,w:84,h:125},packed:{x:386,y:418,w:88,h:129}},{glyph:179,frame:{x:2,y:2,w:68,h:96},packed:{x:344,y:1222,w:72,h:100}},{glyph:180,frame:{x:2,y:2,w:77,h:114},packed:{x:843,y:547,w:81,h:118}},{glyph:181,frame:{x:2,y:2,w:63,h:110},packed:{x:550,y:675,w:67,h:114}},{glyph:182,frame:{x:2,y:2,w:63,h:110},packed:{x:617,y:675,w:67,h:114}},{glyph:183,frame:{x:2,y:2,w:63,h:109},packed:{x:0,y:791,w:67,h:113}},{glyph:184,frame:{x:2,y:2,w:63,h:106},packed:{x:1179,y:791,w:67,h:110}},{glyph:185,frame:{x:2,y:2,w:63,h:104},packed:{x:734,y:904,w:67,h:108}},{glyph:186,frame:{x:2,y:2,w:63,h:115},packed:{x:776,y:547,w:67,h:119}},{glyph:187,frame:{x:2,y:2,w:104,h:75},packed:{x:733,y:1322,w:108,h:79}},{glyph:188,frame:{x:2,y:2,w:61,h:103},packed:{x:0,y:1014,w:65,h:107}},{glyph:189,frame:{x:2,y:2,w:61,h:110},packed:{x:684,y:675,w:65,h:114}},{glyph:190,frame:{x:2,y:2,w:61,h:110},packed:{x:749,y:675,w:65,h:114}},{glyph:191,frame:{x:2,y:2,w:61,h:109},packed:{x:67,y:791,w:65,h:113}},{glyph:192,frame:{x:2,y:2,w:61,h:104},packed:{x:801,y:904,w:65,h:108}},{glyph:193,frame:{x:2,y:2,w:42,h:110},packed:{x:814,y:675,w:46,h:114}},{glyph:194,frame:{x:2,y:2,w:33,h:110},packed:{x:860,y:675,w:37,h:114}},{glyph:195,frame:{x:2,y:2,w:44,h:109},packed:{x:132,y:791,w:48,h:113}},{glyph:196,frame:{x:2,y:2,w:51,h:104},packed:{x:866,y:904,w:55,h:108}},{glyph:197,frame:{x:2,y:2,w:71,h:120},packed:{x:599,y:547,w:75,h:124}},{glyph:198,frame:{x:2,y:2,w:63,h:104},packed:{x:921,y:904,w:67,h:108}},{glyph:199,frame:{x:2,y:2,w:71,h:110},packed:{x:897,y:675,w:75,h:114}},{glyph:200,frame:{x:2,y:2,w:71,h:110},packed:{x:972,y:675,w:75,h:114}},{glyph:201,frame:{x:2,y:2,w:71,h:109},packed:{x:180,y:791,w:75,h:113}},{glyph:202,frame:{x:2,y:2,w:71,h:106},packed:{x:1246,y:791,w:75,h:110}},{glyph:203,frame:{x:2,y:2,w:71,h:104},packed:{x:988,y:904,w:75,h:108}},{glyph:204,frame:{x:2,y:2,w:69,h:72},packed:{x:111,y:1413,w:73,h:76}},{glyph:205,frame:{x:2,y:2,w:71,h:85},packed:{x:81,y:1322,w:75,h:89}},{glyph:206,frame:{x:2,y:2,w:64,h:110},packed:{x:1047,y:675,w:68,h:114}},{glyph:207,frame:{x:2,y:2,w:64,h:110},packed:{x:1115,y:675,w:68,h:114}},{glyph:208,frame:{x:2,y:2,w:64,h:109},packed:{x:255,y:791,w:68,h:113}},{glyph:209,frame:{x:2,y:2,w:64,h:104},packed:{x:1063,y:904,w:68,h:108}},{glyph:210,frame:{x:2,y:2,w:66,h:144},packed:{x:333,y:0,w:70,h:148}},{glyph:211,frame:{x:2,y:2,w:67,h:147},packed:{x:0,y:0,w:71,h:151}},{glyph:212,frame:{x:2,y:2,w:66,h:138},packed:{x:964,y:0,w:70,h:142}},{glyph:213,frame:{x:2,y:2,w:88,h:121},packed:{x:327,y:547,w:92,h:125}},{glyph:214,frame:{x:2,y:2,w:63,h:101},packed:{x:385,y:1014,w:67,h:105}},{glyph:215,frame:{x:2,y:2,w:88,h:125},packed:{x:474,y:418,w:92,h:129}},{glyph:216,frame:{x:2,y:2,w:63,h:106},packed:{x:1321,y:791,w:67,h:110}},{glyph:217,frame:{x:2,y:2,w:91,h:126},packed:{x:747,y:287,w:95,h:130}},{glyph:218,frame:{x:2,y:2,w:64,h:103},packed:{x:65,y:1014,w:68,h:107}},{glyph:219,frame:{x:2,y:2,w:77,h:127},packed:{x:897,y:151,w:81,h:131}},{glyph:220,frame:{x:2,y:2,w:61,h:112},packed:{x:123,y:675,w:65,h:116}},{glyph:221,frame:{x:2,y:2,w:77,h:126},packed:{x:842,y:287,w:81,h:130}},{glyph:222,frame:{x:2,y:2,w:61,h:111},packed:{x:342,y:675,w:65,h:115}},{glyph:223,frame:{x:2,y:2,w:77,h:127},packed:{x:978,y:151,w:81,h:131}},{glyph:224,frame:{x:2,y:2,w:61,h:106},packed:{x:1388,y:791,w:65,h:110}},{glyph:225,frame:{x:2,y:2,w:77,h:127},packed:{x:1059,y:151,w:81,h:131}},{glyph:226,frame:{x:2,y:2,w:61,h:111},packed:{x:407,y:675,w:65,h:115}},{glyph:227,frame:{x:2,y:2,w:76,h:125},packed:{x:566,y:418,w:80,h:129}},{glyph:228,frame:{x:2,y:2,w:95,h:114},packed:{x:924,y:547,w:99,h:118}},{glyph:229,frame:{x:2,y:2,w:87,h:96},packed:{x:416,y:1222,w:91,h:100}},{glyph:230,frame:{x:2,y:2,w:78,h:113},packed:{x:1315,y:547,w:82,h:117}},{glyph:231,frame:{x:2,y:2,w:63,h:121},packed:{x:419,y:547,w:67,h:125}},{glyph:232,frame:{x:2,y:2,w:61,h:101},packed:{x:452,y:1014,w:65,h:105}},{glyph:233,frame:{x:2,y:2,w:63,h:125},packed:{x:646,y:418,w:67,h:129}},{glyph:234,frame:{x:2,y:2,w:61,h:106},packed:{x:0,y:904,w:65,h:110}},{glyph:235,frame:{x:2,y:2,w:63,h:125},packed:{x:713,y:418,w:67,h:129}},{glyph:236,frame:{x:2,y:2,w:61,h:104},packed:{x:1131,y:904,w:65,h:108}},{glyph:237,frame:{x:2,y:2,w:63,h:126},packed:{x:923,y:287,w:67,h:130}},{glyph:238,frame:{x:2,y:2,w:61,h:103},packed:{x:133,y:1014,w:65,h:107}},{glyph:239,frame:{x:2,y:2,w:63,h:125},packed:{x:780,y:418,w:67,h:129}},{glyph:240,frame:{x:2,y:2,w:61,h:109},packed:{x:323,y:791,w:65,h:113}},{glyph:241,frame:{x:2,y:2,w:82,h:126},packed:{x:990,y:287,w:86,h:130}},{glyph:242,frame:{x:2,y:2,w:66,h:143},packed:{x:403,y:0,w:70,h:147}},{glyph:243,frame:{x:2,y:2,w:82,h:127},packed:{x:1140,y:151,w:86,h:131}},{glyph:244,frame:{x:2,y:2,w:66,h:140},packed:{x:747,y:0,w:70,h:144}},{glyph:245,frame:{x:2,y:2,w:82,h:127},packed:{x:1226,y:151,w:86,h:131}},{glyph:246,frame:{x:2,y:2,w:66,h:138},packed:{x:1034,y:0,w:70,h:142}},{glyph:247,frame:{x:2,y:2,w:82,h:134},packed:{x:1104,y:0,w:86,h:138}},{glyph:248,frame:{x:2,y:2,w:66,h:146},packed:{x:171,y:0,w:70,h:150}},{glyph:249,frame:{x:2,y:2,w:79,h:124},packed:{x:0,y:547,w:83,h:128}},{glyph:250,frame:{x:2,y:2,w:62,h:124},packed:{x:83,y:547,w:66,h:128}},{glyph:251,frame:{x:2,y:2,w:95,h:96},packed:{x:507,y:1222,w:99,h:100}},{glyph:252,frame:{x:2,y:2,w:74,h:111},packed:{x:472,y:675,w:78,h:115}},{glyph:253,frame:{x:2,y:2,w:49,h:125},packed:{x:847,y:418,w:53,h:129}},{glyph:254,frame:{x:2,y:2,w:49,h:106},packed:{x:65,y:904,w:53,h:110}},{glyph:255,frame:{x:2,y:2,w:39,h:121},packed:{x:486,y:547,w:43,h:125}},{glyph:256,frame:{x:2,y:2,w:40,h:101},packed:{x:517,y:1014,w:44,h:105}},{glyph:257,frame:{x:2,y:2,w:43,h:125},packed:{x:900,y:418,w:47,h:129}},{glyph:258,frame:{x:2,y:2,w:44,h:106},packed:{x:118,y:904,w:48,h:110}},{glyph:259,frame:{x:2,y:2,w:29,h:126},packed:{x:1076,y:287,w:33,h:130}},{glyph:260,frame:{x:2,y:2,w:32,h:133},packed:{x:1190,y:0,w:36,h:137}},{glyph:261,frame:{x:2,y:2,w:21,h:125},packed:{x:947,y:418,w:25,h:129}},{glyph:262,frame:{x:2,y:2,w:29,h:73},packed:{x:1319,y:1322,w:33,h:77}},{glyph:263,frame:{x:2,y:2,w:72,h:98},packed:{x:1300,y:1014,w:76,h:102}},{glyph:264,frame:{x:2,y:2,w:67,h:139},packed:{x:875,y:0,w:71,h:143}},{glyph:265,frame:{x:2,y:2,w:55,h:126},packed:{x:1109,y:287,w:59,h:130}},{glyph:266,frame:{x:2,y:2,w:47,h:143},packed:{x:473,y:0,w:51,h:147}},{glyph:267,frame:{x:2,y:2,w:74,h:133},packed:{x:1226,y:0,w:78,h:137}},{glyph:268,frame:{x:2,y:2,w:62,h:147},packed:{x:71,y:0,w:66,h:151}},{glyph:269,frame:{x:2,y:2,w:62,h:75},packed:{x:841,y:1322,w:66,h:79}},{glyph:270,frame:{x:2,y:2,w:54,h:125},packed:{x:972,y:418,w:58,h:129}},{glyph:271,frame:{x:2,y:2,w:36,h:127},packed:{x:1312,y:151,w:40,h:131}},{glyph:272,frame:{x:2,y:2,w:54,h:132},packed:{x:1304,y:0,w:58,h:136}},{glyph:273,frame:{x:2,y:2,w:30,h:147},packed:{x:137,y:0,w:34,h:151}},{glyph:274,frame:{x:2,y:2,w:54,h:97},packed:{x:101,y:1121,w:58,h:101}},{glyph:275,frame:{x:2,y:2,w:43,h:114},packed:{x:1023,y:547,w:47,h:118}},{glyph:276,frame:{x:2,y:2,w:55,h:96},packed:{x:606,y:1222,w:59,h:100}},{glyph:277,frame:{x:2,y:2,w:56,h:113},packed:{x:1397,y:547,w:60,h:117}},{glyph:278,frame:{x:2,y:2,w:64,h:96},packed:{x:665,y:1222,w:68,h:100}},{glyph:279,frame:{x:2,y:2,w:41,h:113},packed:{x:1454,y:418,w:45,h:117}},{glyph:280,frame:{x:2,y:2,w:77,h:125},packed:{x:1030,y:418,w:81,h:129}},{glyph:281,frame:{x:2,y:2,w:63,h:108},packed:{x:778,y:791,w:67,h:112}},{glyph:282,frame:{x:2,y:2,w:77,h:132},packed:{x:1362,y:0,w:81,h:136}},{glyph:283,frame:{x:2,y:2,w:63,h:109},packed:{x:388,y:791,w:67,h:113}},{glyph:284,frame:{x:2,y:2,w:77,h:124},packed:{x:149,y:547,w:81,h:128}},{glyph:285,frame:{x:2,y:2,w:63,h:107},packed:{x:964,y:791,w:67,h:111}},{glyph:286,frame:{x:2,y:2,w:77,h:132},packed:{x:0,y:151,w:81,h:136}},{glyph:287,frame:{x:2,y:2,w:63,h:109},packed:{x:455,y:791,w:67,h:113}},{glyph:288,frame:{x:2,y:2,w:93,h:123},packed:{x:230,y:547,w:97,h:127}},{glyph:289,frame:{x:2,y:2,w:71,h:101},packed:{x:561,y:1014,w:75,h:105}},{glyph:290,frame:{x:2,y:2,w:93,h:127},packed:{x:1352,y:151,w:97,h:131}},{glyph:291,frame:{x:2,y:2,w:71,h:106},packed:{x:166,y:904,w:75,h:110}},{glyph:292,frame:{x:2,y:2,w:93,h:127},packed:{x:0,y:287,w:97,h:131}},{glyph:293,frame:{x:2,y:2,w:73,h:110},packed:{x:1183,y:675,w:77,h:114}},{glyph:294,frame:{x:2,y:2,w:123,h:100},packed:{x:967,y:1014,w:127,h:104}},{glyph:295,frame:{x:2,y:2,w:114,h:75},packed:{x:907,y:1322,w:118,h:79}},{glyph:296,frame:{x:2,y:2,w:76,h:127},packed:{x:97,y:287,w:80,h:131}},{glyph:297,frame:{x:2,y:2,w:45,h:108},packed:{x:845,y:791,w:49,h:112}},{glyph:298,frame:{x:2,y:2,w:76,h:132},packed:{x:81,y:151,w:80,h:136}},{glyph:299,frame:{x:2,y:2,w:45,h:109},packed:{x:522,y:791,w:49,h:113}},{glyph:300,frame:{x:2,y:2,w:76,h:127},packed:{x:177,y:287,w:80,h:131}},{glyph:301,frame:{x:2,y:2,w:46,h:107},packed:{x:1031,y:791,w:50,h:111}},{glyph:302,frame:{x:2,y:2,w:63,h:127},packed:{x:257,y:287,w:67,h:131}},{glyph:303,frame:{x:2,y:2,w:51,h:110},packed:{x:1260,y:675,w:55,h:114}},{glyph:304,frame:{x:2,y:2,w:63,h:126},packed:{x:1168,y:287,w:67,h:130}},{glyph:305,frame:{x:2,y:2,w:51,h:109},packed:{x:571,y:791,w:55,h:113}},{glyph:306,frame:{x:2,y:2,w:63,h:128},packed:{x:316,y:151,w:67,h:132}},{glyph:307,frame:{x:2,y:2,w:51,h:103},packed:{x:198,y:1014,w:55,h:107}},{glyph:308,frame:{x:2,y:2,w:63,h:127},packed:{x:324,y:287,w:67,h:131}},{glyph:309,frame:{x:2,y:2,w:51,h:109},packed:{x:626,y:791,w:55,h:113}},{glyph:310,frame:{x:2,y:2,w:70,h:132},packed:{x:161,y:151,w:74,h:136}}],vs={kernings:ms,meta:us,chars:xs,glyphs:ws,colors:ks};function qt(t){return new Promise(a=>{let e=new Image;e.onload=()=>a(e),e.src=t})}const Ze=class Ze{constructor(){l(this,"load",async()=>{let[a,e]=await Promise.all([qt(ps),qt(ys)]),s=we.from_image(a);this.sprites=[],this.nine_slice=[],gs.sprites.forEach(h=>{let{name:r,packs:d,tags:p}=h;if(r.match(/nine_slice/)){this.nine_slice.push(Ze.make_nine_slice(s,h));return}let c=n.zero,g=[];p.forEach(y=>{let w=[];for(let M=y.from;M<=y.to;M++){let O=d[M],z=O.meta.duration/1e3,rt=m.make(O.frame.x,O.frame.y,O.frame.w,O.frame.h),nt=m.make(O.packed.x,O.packed.y,O.packed.w,O.packed.h),ot=new Vt(Oe.make(s,nt,rt),z);w.push(ot)}let k=new ds(y.name,w);g.push(k)});let f=new _s(r,c,g);this.sprites.push(f)});let i={...vs,size:128};this.sp_font=wt.make(i,e)});l(this,"sp_font");l(this,"sprites");l(this,"nine_slice")}find_sprite(a){return this.sprites.find(e=>e.name===a)}find_nine(a){return this.nine_slice.find(e=>e.name===a)}};l(Ze,"make_nine_slice",(a,e)=>{let{name:s,packs:i,_tags:h}=e,r=[];for(let d=0;d<3;d++)for(let p=0;p<3;p++){let c=i[0],g=1,f=d*c.frame.w/3,y=p*c.frame.h/3,w=m.make(c.frame.x,c.frame.y,c.frame.w/3,c.frame.h/3),k=m.make(f+c.packed.x,y+c.packed.y,4+400/3,4+400/3),M=new Vt(Oe.make(a,k,w),g);r.push(M)}return new cs(s,r)});let kt=Ze;const ke=new kt;function bs(t){var a;return t.clientX!==void 0&&t.clientY!==void 0?[t.clientX,t.clientY]:(a=t.targetTouches)!=null&&a[0]?[t.targetTouches[0].clientX,t.targetTouches[0].clientY]:[0,0]}class ma{}l(ma,"init",(a,e=document)=>{const s=k=>{let M=bs(k);return M?n.make(M[0],M[1]):n.zero};let{_onDragStart:i,_onDragMove:h,_onDragEnd:r,_onContextMenu:d,_onWheel:p}=a;const c=k=>{i==null||i(s(k),k.buttons===2||k.button===2)},g=k=>{h==null||h(s(k))},f=k=>{r==null||r(s(k))},y=k=>{d&&(k.preventDefault(),d())},w=k=>{p&&(p(Math.sign(k.deltaY),s(k)),k.preventDefault())};return e.addEventListener("wheel",w,{passive:!1}),e.addEventListener("touchstart",c,{capture:!0,passive:!1}),e.addEventListener("mousedown",c,{capture:!0,passive:!1}),e.addEventListener("contextmenu",y),document.addEventListener("mousemove",g),document.addEventListener("mouseup",f),document.addEventListener("touchmove",g),document.addEventListener("touchend",f),()=>{e.removeEventListener("wheel",w),e.removeEventListener("touchstart",c),e.removeEventListener("mousedown",c),e.removeEventListener("contextmenu",y),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",f),document.removeEventListener("touchmove",g),document.removeEventListener("touchend",f)}});class Es{constructor(){l(this,"_on_update");l(this,"_hooks",[])}register(a){return this._hooks.push(a),()=>{this._hooks.splice(this._hooks.indexOf(a),1)}}get hooks(){return this._hooks}_sort_hooks(){this._hooks.sort((a,e)=>(e.priority??0)-(a.priority??0))}_on_hover(a){var i,h;let e=this.hooks,s=e.findIndex(r=>{var d;return(d=r.on_hover)==null?void 0:d.call(r,a)});if(s!==-1)for(let r=s+1;r<this.hooks.length;r++)(h=(i=e[r]).on_hover_clear)==null||h.call(i)}_on_up(a,e,s){this.hooks.find(i=>{var h;return(h=i.on_up)==null?void 0:h.call(i,a,e,s)})}_on_click(a,e){this.hooks.find(s=>{var i;return(i=s.on_click)==null?void 0:i.call(s,a,e)})}_on_click_begin(a,e){this.hooks.find(s=>{var i;return(i=s.on_click_begin)==null?void 0:i.call(s,a,e)})}_on_drag(a,e){this.hooks.find(s=>{var i;return(i=s.on_drag)==null?void 0:i.call(s,a,e)})}_on_context(){this.hooks.find(a=>{var e;return(e=a.on_context)==null?void 0:e.call(a)})}_on_wheel(a,e){this.hooks.find(s=>{var i;return(i=s.on_wheel)==null?void 0:i.call(s,a,e)})}listen(a){let e;const s=()=>{e=a.getBoundingClientRect()};s();const i=g=>{let f=n.make(e.x,e.y),y=n.make(e.width,e.height);return g.sub(f).div(y)};let h=g=>g&&{...g},r,d,p,c=this;ma.init({_onDragStart(g,f){if(f)return;let y=i(g);d=h(r),r={e:y,_right:f},c._on_update=()=>{r?((r.m||p&&r.e.distance(p)>16/1080)&&(r.m=p),c._on_drag(r,d),d=h(r)):c._on_update=void 0},c._on_click_begin(y,f)},_onDragMove(g){let f=i(g);p=f,r||c._on_hover(f)},_onDragEnd(){r&&(r.m||c._on_click(r.e,r._right),c._on_up(r.e,r._right,r.m),c._on_update=void 0,r=void 0,p=void 0)},_onWheel(g,f){var y;(y=c._on_wheel)==null||y.call(c,g,i(f))},_onContextMenu(){}},a),document.addEventListener("scroll",()=>{s()},{capture:!0,passive:!0}),window.addEventListener("resize",()=>{s()},{passive:!0})}update(){var a;(a=this._on_update)==null||a.call(this)}}const Ye=new Es;var Ts=`#version 300 es
uniform mat4 u_matrix;
layout(location=0) in vec2 a_position;
layout(location=1) in vec2 a_tex;
layout(location=2) in vec4 a_color;
layout(location=3) in vec4 a_type;
out vec2 v_tex;
out vec4 v_col;
out vec4 v_type;

void main(void) {
  gl_Position = u_matrix * vec4(a_position.xy, 0, 1);
  v_tex = a_tex;
  v_col = a_color;
  v_type = a_type;
}`,As=`#version 300 es
precision mediump float;

uniform sampler2D u_texture;
uniform sampler2D u_texture2;
uniform sampler2D u_mask_texture;
in vec2 v_tex;
in vec4 v_col;
in vec4 v_type;
out vec4 o_color;

vec4 red = vec4(1, 0, 0, 1);
vec4 green = vec4(0, 1, 0, 1);
void main(void) {
  vec4 color = texture(u_mask_texture, v_tex);

  vec4 t0 = texture(u_texture, v_tex);
  vec4 t1 = texture(u_texture2, v_tex);

  o_color = color == red ? t0 : color == green ? t1 : color;
}`;let dt;const Kt=new Mt([ee.make(0,C.Float2,!1),ee.make(1,C.Float2,!1)]),Ms="u_texture",Ss="u_texture2",zs="u_mask_texture",Fs="u_matrix";let j=m.make(0,0,1,1);const Rs=j.x,Us=j.y,Cs=j.x+j.w,Ds=j.y,Ns=j.x+j.w,Os=j.x+j.h,Ps=j.x,Ls=j.x+j.h,[Is,Bs,Hs,$s,js,Xs,Vs,qs]=[0,0,1,0,1,1,0,1];class Ks{constructor(){l(this,"texture2");l(this,"texture");l(this,"mask_texture");l(this,"mesh");l(this,"material");l(this,"indices",[0,1,2,0,2,3]);l(this,"vertices",[]);l(this,"matrix");l(this,"sampler",_e.get_default)}set_matrix(a){this.matrix=a,this.vertices=[],this.PUSH_VERTEX(Rs,Us,Is,Bs),this.PUSH_VERTEX(Cs,Ds,Hs,$s),this.PUSH_VERTEX(Ns,Os,js,Xs),this.PUSH_VERTEX(Ps,Ls,Vs,qs)}PUSH_VERTEX(a,e,s,i){let h=this.matrix;this.vertices.push(new Gs(n.make(a*h.m11+e*h.m21+h.m31,a*h.m12+e*h.m22+h.m32),n.make(s,1-i)))}render(a=_.backbuffer){this.render_with_m(a,Q.create_ortho_offcenter(0,a.width,a.height,0,.01,1e3))}render_with_m(a,e){dt||(dt=Ie.create([Ts,As])),this.mesh||(this.mesh=Le.create()),this.material||(this.material=st.create(dt));let s=Kt.stride,i=new ArrayBuffer(s*this.vertices.length),h=new DataView(i);this.vertices.reduce((d,p)=>p.push_to(h,d),0),this.mesh.index_data(this.indices),this.mesh.vertex_data(Kt,i);let r=new zt;r.target=a,r.mesh=this.mesh,r.has_viewport=!1,r.viewport=m.make(0,0,0,0),r.instance_count=0,r.material=this.material,r.material.set_texture(Ms,this.texture),r.material.set_texture(Ss,this.texture2),r.material.set_texture(zs,this.mask_texture),r.material.set_sampler_at_location(0,this.sampler),r.material.set_sampler_at_location(1,this.sampler),r.material.set_sampler_at_location(2,this.sampler),r.material.set_matrix(Fs,e),r.index_start=0,r.index_count=this.indices.length,r.perform()}}let Gs=class{constructor(a,e){this.pos=a,this.tex=e}push_to(a,e){let{pos:s,tex:i}=this;return a.setFloat32(e+0,s.x,!0),a.setFloat32(e+4,s.y,!0),a.setFloat32(e+8,i.x,!0),a.setFloat32(e+12,i.y,!0),e+16}};const ve=new Ks;var Ys=`#version 300 es
uniform mat4 u_matrix;
layout(location=0) in vec2 a_position;
layout(location=1) in vec2 a_tex;
layout(location=2) in vec4 a_color;
layout(location=3) in vec4 a_type;
out vec2 v_tex;
out vec4 v_col;
out vec4 v_type;

void main(void) {
  gl_Position = u_matrix * vec4(a_position.xy, 0, 1);
  v_tex = a_tex;
  v_col = a_color;
  v_type = a_type;
}`,Ws=`#version 300 es
precision mediump float;

uniform sampler2D u_texture;
in vec2 v_tex;
in vec4 v_col;
in vec4 v_type;
out vec4 o_color;

void main(void) {
  vec4 color = texture(u_texture, v_tex);

  o_color = color;
}`;let _t;const Gt=new Mt([ee.make(0,C.Float2,!1),ee.make(1,C.Float2,!1)]),Qs="u_texture",Zs="u_matrix";let X=m.make(0,0,1,1);const Js=X.x,ei=X.y,ti=X.x+X.w,ai=X.y,si=X.x+X.w,ii=X.x+X.h,hi=X.x,ri=X.x+X.h,[ni,oi,li,di,_i,ci,pi,fi]=[0,0,1,0,1,1,0,1];class gi{constructor(){l(this,"texture");l(this,"mesh");l(this,"material");l(this,"indices",[0,1,2,0,2,3]);l(this,"vertices",[]);l(this,"matrix");l(this,"sampler",_e.get_default)}set_matrix(a){this.matrix=a,this.vertices=[],this.PUSH_VERTEX(Js,ei,ni,oi),this.PUSH_VERTEX(ti,ai,li,di),this.PUSH_VERTEX(si,ii,_i,ci),this.PUSH_VERTEX(hi,ri,pi,fi)}PUSH_VERTEX(a,e,s,i){let h=this.matrix;this.vertices.push(new yi(n.make(a*h.m11+e*h.m21+h.m31,a*h.m12+e*h.m22+h.m32),n.make(s,1-i)))}render(a=_.backbuffer){this.render_with_m(a,Q.create_ortho_offcenter(0,a.width,a.height,0,.01,1e3))}render_with_m(a,e){_t||(_t=Ie.create([Ys,Ws])),this.mesh||(this.mesh=Le.create()),this.material||(this.material=st.create(_t));let s=Gt.stride,i=new ArrayBuffer(s*this.vertices.length),h=new DataView(i);this.vertices.reduce((d,p)=>p.push_to(h,d),0),this.mesh.index_data(this.indices),this.mesh.vertex_data(Gt,i);let r=new zt;r.target=a,r.mesh=this.mesh,r.has_viewport=!1,r.viewport=m.make(0,0,0,0),r.instance_count=0,r.material=this.material,r.material.set_texture(Qs,this.texture),r.material.set_sampler_at_location(0,this.sampler),r.material.set_matrix(Zs,e),r.index_start=0,r.index_count=this.indices.length,r.perform()}}class yi{constructor(a,e){this.pos=a,this.tex=e}push_to(a,e){let{pos:s,tex:i}=this;return a.setFloat32(e+0,s.x,!0),a.setFloat32(e+4,s.y,!0),a.setFloat32(e+8,i.x,!0),a.setFloat32(e+12,i.y,!0),e+16}}const ct=new gi;function mi(t,a,e){return a+(e-a)*t}function he(t,a,e){return t+(a-t)*e}function ui(t){return t<.5?2*t*t:-1+(4-2*t)*t}function xi(t){return t*t}const Je=class Je{constructor(a,e,s=0){l(this,"_completed");l(this,"_i");l(this,"_t");l(this,"_value");this._values=a,this._durations=e,this.loop=s}get value(){return this._value}get i(){let a=this._durations[this._i%this._durations.length];return Math.min(this._t/a,1)}get completed(){return this._completed}complete_now(){this._value=this._values[this._values.length-1],this._completed=!0}update(a){if(this._completed)return;let{_values:e}=this;this._t+=a;let s=e[this._i],i=e[this._i+1],h=this.i;this._value=he(s,i,ui(h)),h===1&&(this._i++,this._t=0,this._i>=e.length-1&&(this.loop===1?(this._i=0,this._values.reverse(),this._durations.reverse()):this._completed=!0))}init(){return this._i=0,this._t=0,this._completed=!1,this._value=this._values[0],this}};l(Je,"make",(a,e,s=!1)=>new Je(a.slice(0),[e],s?1:0).init());let vt=Je;u.hex(2106417);const wi=u.hex(4895437),et=class et{constructor(){l(this,"_render_order",0);l(this,"visible",!0);l(this,"g_position");l(this,"position");l(this,"rotation");l(this,"origin",n.zero);l(this,"scale",n.one);l(this,"coroutines",[]);l(this,"_data");l(this,"_disposes");l(this,"objects");l(this,"parent");l(this,"g_scissor");l(this,"_tweens",[]);l(this,"_tween")}routine(a){this.coroutines.push(a)}*wait_for(a){let e=0;for(;e<a;)e+=F.delta,yield}get input_priority(){return this._render_order}get font(){return ke.sp_font}_set_data(a,e){return this.g_position=n.zero,this.position=a,this.rotation=0,this._data=e,this}unbindable_input(a,e=0){let s=this;this._disposes.push(Ye.register({get priority(){return s.input_priority},...a}))}get p_position(){return this.parent?this.parent.p_position.add(this.position):this.position}get p_visible(){return this.parent?this.parent.p_visible&&this.visible:this.visible}get p_scissor(){return this.parent?this.g_scissor||this.parent.p_scissor:this.g_scissor}send_front(){this.parent&&(this.parent.objects.splice(this.parent.objects.indexOf(this),1),this.parent.objects.push(this))}send_back(){this.parent&&(this.parent.objects.splice(this.parent.objects.indexOf(this),1),this.parent.objects.unshift(this))}_add_object(a){this.objects.push(a),a.parent=this}_make(a,e,s){return new a()._set_data(e,s).init()}tween(a,e,s,i=0,h){s=typeof s=="number"?[s]:s;let r=new vt(a,s,i).init();return this._tweens.push([r,e,h]),r}cancel(a){this._tweens=this._tweens.filter(e=>e[0]!==a)}tween_single(a,e,s,i,h=0,r){return a&&this.cancel(a),this.tween(e,s,i,h,r)}make(a,e,s){let i=this._make(a,e,s);return this._add_object(i),i}init(){return this._disposes=[],this.objects=[],this._init(),this}update(){this.coroutines=this.coroutines.filter(a=>!a.next().done),this.objects.forEach(a=>a.update()),this._tweens=this._tweens.filter(([a,e,s])=>(a.update(F.delta),e(a.value),a.completed&&s&&s(),!a.completed)),this._update()}draw(a){this.visible&&(this._render_order=et.next_render_order++,this._draw(a))}_draw_children(a){this.objects.forEach(e=>e.draw(a))}dispose(){this.objects.slice(0).forEach(a=>a.dispose()),this._dispose(),this._disposes.forEach(a=>a()),this.parent&&this.parent.objects.splice(this.parent.objects.indexOf(this),1)}_init(){}_update(){}_draw(a){a.push_matrix(v.create_transform(this.position,this.origin,this.scale,this.rotation)),this.g_position=n.transform(n.zero,a.m_matrix),this._draw_children(a),a.pop_matrix()}_dispose(){}};l(et,"next_render_order",0);let x=et;class Ut extends x{get data(){return this._data}get nine(){return ke.find_nine(this.data.name)}_draw(a){let{frames:e}=this.nine,s=400/3,i=(this.data.h-s*2)/s,h=(this.data.w-s*2)/s;a.push_matrix(v.create_transform(this.position,n.zero,n.one,0)),this.g_position=n.transform(n.zero,a.m_matrix),a.stex(e[0].image,n.make(0,0),u.white),a.stex_o(e[1].image,n.make(0,s),n.zero,n.make(1,i),0,u.white),a.stex(e[2].image,n.make(0,s+i*s),u.white),a.stex_o(e[3].image,n.make(s,0),n.zero,n.make(h,1),0,u.white),a.stex_o(e[4].image,n.make(s,s),n.zero,n.make(h,i),0,u.white),a.stex_o(e[5].image,n.make(s,s+i*s),n.zero,n.make(h,1),0,u.white),a.stex(e[6].image,n.make(s+h*s,0),u.white),a.stex_o(e[7].image,n.make(s+h*s,s),n.zero,n.make(1,i),0,u.white),a.stex(e[8].image,n.make(s+h*s,s+i*s),u.white),a.pop_matrix()}}class R extends x{constructor(){super(...arguments);l(this,"alpha",255);l(this,"_animation","idle");l(this,"_frame_counter",0);l(this,"_frame",0);l(this,"_loop",!1);l(this,"_reverse",!1);l(this,"_on_complete");l(this,"will_play")}get data(){return this._data}get sprite(){return ke.find_sprite(this.data.name)}get alpha_color(){return new u(this.alpha,this.alpha,this.alpha,this.alpha)}get animation(){return this.sprite.get(this._animation)}get frame(){var e;return(e=this.animation)==null?void 0:e.frames[this._frame]}get subtexture(){var e;return(e=this.frame)==null?void 0:e.image}get duration(){var e;return(e=this.frame)==null?void 0:e.duration}play_now(e,s,i=!1){var h;if(this._on_complete=s,this._animation=e,this._frame=0,i){let r=((h=this.animation)==null?void 0:h.frames.length)||0;this._frame=r-1}this._reverse=i}play(e,s,i=!1){this.will_play=()=>this.play_now(e,s,i)}play_o(e,s){this._loop=s.loop??!1,this.play_now(e)}_update(){var i,h;const e=(i=this.animation)==null?void 0:i.frames.length,s=(h=this.frame)==null?void 0:h.duration;e&&s&&(this._frame_counter+=F.delta,this._frame_counter>=s&&(this._frame_counter-=s,this._reverse?(this._frame--,this._frame<0&&(this._loop?this._frame=e-1:this._frame=0,this._on_complete&&this._on_complete(),this.will_play&&(this.will_play(),this.will_play=void 0))):(this._frame++,this._frame>=e&&(this._loop?this._frame=0:this._frame=e-1,this._on_complete&&this._on_complete(),this.will_play&&(this.will_play(),this.will_play=void 0)))))}_draw(e){this.subtexture&&(e.push_matrix(v.create_transform(this.position,this.origin,this.scale,this.rotation)),this.g_position=n.transform(n.zero,e.m_matrix),e.stex(this.subtexture,n.zero,this.alpha_color),e.pop_matrix())}}const ae=1/60,U={seconds:60*ae,half:30*ae,thirds:20*ae,lengths:15*ae,sixth:10*ae,five:5*ae,three:3*ae,one:1*ae},P=n.make(1920,1080),ki=(t=1)=>()=>{var a=Math.sin(t++)*1e4;return a-Math.floor(a)},ce=ki();function ua(t,a=ce){return Math.floor(a()*t)}function Yt(t=ce){return t()*2-1}function vi(t,a=ce){return t[ua(t.length,a)]}const N=(t=ce)=>n.make(t(),t()),Wt=(t=ce)=>n.make(Yt(t),Yt(t));class bi extends x{get data(){return this._data}_init(){let a=this.make(R,n.make(0,0),{name:"button_bg"});a.origin=n.make(366,200).scale(1/2),this.make($,n.make(0,-30),{width:360,height:100,key:this.data.text,center:!0});let e=this;this.make(D,n.make(-366+80,-200+80).scale(1/2),{rect:m.make(0,0,366-80,200-80),on_hover(){a.play_o("hover",{loop:!1})},on_hover_end(){a.play("hover",()=>{a.play("idle")},!0)},on_click_begin(){a.play_o("click",{loop:!1})},on_click(){e.data.on_click()}})}}function Ei(t){return new Audio(t)}let Ti=["drag1","drag2","drag3","cancel","drop","hit","recycle","undo2"];class Ai{constructor(){l(this,"audios");l(this,"load",async()=>{this.audios={},Ti.forEach(a=>this.audios[a]=[...Array(4).keys()].map(()=>Ei(`./audio/${a}.wav`)))})}play(a){let e=this.audios[a],s=e.pop();e.unshift(s),s.play()}}const Z=new Ai;var Mi=Object.defineProperty,Si=(t,a,e)=>a in t?Mi(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,S=(t,a,e)=>(Si(t,typeof a!="symbol"?a+"":a,e),e),Ct=["d","c","h","s"],xa=["A","K","Q","J","T","9","8","7","6","5","4","3","2"],zi=["A","2","3","4","5","6","7","8","8","T","J","Q","K"],Fi=Ct.flatMap(t=>xa.map(a=>`${t}${a}`)),Ri=t=>{let a=Ct.indexOf(t[0]),e=xa.indexOf(t[1]);return a*100+e},wa=class{static get deck(){return Fi.slice(0)}},Pe=class{constructor(t){this.cards=t}static get empty(){return new Pe([])}get hidden_pov(){return We.backs(this.cards.length)}get pov(){return new We(this.cards.slice(0))}get clone(){return new Pe(this.cards.slice(0))}get fen(){return this.cards.join(" ")}get length(){return this.cards.length}get top_card(){return this.cards[this.cards.length-1]}add_cards(t){this.cards.push(...t)}unshift_cards(t){for(let a=t.length-1;a>=0;a--)this.cards.push(t[a])}remove_cards(t){return this.cards.splice(-t)}remove_all(){return this.remove_cards(this.cards.length)}},re=Pe;S(re,"take_n",(t,a)=>new Pe(t.splice(0,a)));S(re,"from_fen",t=>new Pe(t===""?[]:t.split(" ")));var Dt="??",it=class{constructor(t){this.cards=t}get fen(){return this.cards.join(" ")}get clone(){return new it(this.cards.slice(0))}get length(){return this.cards.length}unshift_cards(t){for(let a=t.length-1;a>=0;a--)this.cards.push(t[a])}add_cards(t){this.cards.push(...t)}remove_cards(t){return this.cards.splice(-t)}remove_all(){return this.remove_cards(this.cards.length)}},We=it;S(We,"from_fen",t=>new it(t===""?[]:t.split(" ")));S(We,"backs",t=>new it([...Array(t).keys()].map(a=>Dt)));var pe=class{constructor(t){l(this,"_data");this.game=t}_set_data(t){return this._data=t,this}},ka=class{constructor(t,a,e){this.game=t,this.stats=a,this.history=e}get nb_moves(){return this.stats.nb_moves}set nb_moves(t){this.stats.nb_moves=t}get score(){return this.stats.score}set score(t){this.stats.score=t}get pov(){return new ba(this.game.pov,this.stats,this.history.length)}apply(t,a){let e=new t(this.game)._set_data(a);if(!t.can(this.game.pov,a))return;let s=e.apply();return this.score+=s,this.nb_moves++,this.history.push(e),e}get can_undo(){return this.history.length>0}undo(){if(!this.can_undo)return;let t=this.history.pop(),a=t.undo();return this.score+=a,this.nb_moves++,t}},va=ka;S(va,"make",t=>new ka(t,{score:0,nb_moves:0},[]));var ba=class{constructor(t,a,e){l(this,"history");this.game=t,this.stats=a,this.history=e}get clone(){let t=this.game.clone;return new ba(t,{...this.stats},this.history)}get nb_moves(){return this.stats.nb_moves}set nb_moves(t){this.stats.nb_moves=t}get score(){return this.stats.score}set score(t){this.stats.score=t}get can_undo(){return this.history>0}apply(t,a){t.apply(this.game,a),this.nb_moves++,this.history++}undo_pov(){this.nb_moves++,this.history--}undo(t){t.undo_pov(this.game)}},I={Recycle:-10,HitStock:0,WasteToTableu:10,WasteToFoundation:30,TableuToFoundation:20,FoundationToTableu:-30,Undo:-80,TableuToTableuFlip:10,TableuToTableuNoFlip:0},Ea=class{constructor(t,a,e){this.stock=t,this.waste=a,this.hidden=e}get pov(){return new Ra(this.stock.hidden_pov,this.waste,this.hidden.hidden_pov)}get can_hit(){return this.stock.length>0}get can_recycle(){return this.stock.length===0}from_waste(){return{cards:this.waste.remove_cards(1)}}undo_from_waste(t){this.waste.add_cards(t)}hit(t){let a=this.stock.remove_cards(t),e=this.waste.remove_all();return this.hidden.unshift_cards(e),this.waste.add_cards(a),{waste:e,cards:a}}undo_hit(t){let{cards:a,waste:e}=t,s=this.waste.remove_cards(a.length),i=this.hidden.remove_cards(e.length);this.waste.add_cards(i),this.stock.add_cards(s)}recycle(){let t=this.waste.remove_all();return this.hidden.add_cards(t),this.stock.unshift_cards(this.hidden.remove_all()),{waste:t}}undo_recycle(t){let{waste:a}=t;this.hidden.add_cards(this.stock.remove_all());let e=this.hidden.remove_cards(a.length);this.waste.add_cards(e)}},Ta=Ea;S(Ta,"make",t=>new Ea(re.take_n(t,t.length),re.empty,re.empty));var Aa=class{constructor(t,a){this.back=t,this.front=a}get pov(){return new Ua(this.back.hidden_pov,this.front)}from_tableu(t){let a=this.front.remove_cards(t);if(this.front.length===0){let[e]=this.back.remove_cards(1);return e?(this.front.add_cards([e]),{flip:e,cards:a}):{cards:a}}return{cards:a}}undo_from_tableu(t){if(t.flip){let a=this.front.remove_cards(1);this.back.add_cards(a)}this.front.add_cards(t.cards)}to_tableu(t){this.front.add_cards(t)}undo_to_tableu(t){this.front.remove_cards(t.length)}},Ma=Aa;S(Ma,"make",(t,a)=>new Aa(re.take_n(t,a),re.take_n(t,1)));var Nt=class{constructor(t,a){this.suit=t,this.foundation=a}get clone(){return new Nt(this.suit,this.foundation.clone)}get next_top(){let t=this.suit,a=zi[this.foundation.length];if(a)return`${t}${a}`}get can_from(){let{top_card:t}=this.foundation;if(t)return{cards:[t]}}can_to(t){return t.length===1&&!0}to_foundation(t){this.foundation.add_cards(t)}undo_to_foundation(t){this.foundation.remove_cards(t.length)}from_foundation(){return{cards:this.foundation.remove_cards(1)}}undo_from_foundation(t){this.foundation.add_cards(t)}},Sa=Nt;S(Sa,"make",t=>new Nt(t,re.empty));var bt=[...Array(7).keys()],Ui=[...Array(4).keys()],za=class{constructor(t,a,e,s){this.settings=t,this.stock=a,this.tableus=e,this.foundations=s}get hit_n(){return this.settings.cards==="threecards"?3:1}get pov(){return new Ca(this.settings,this.stock.pov,this.tableus.map(t=>t.pov),this.foundations)}get can_hit(){return this.stock.can_hit}get can_recycle(){return this.stock.can_recycle}hit_stock(){return this.stock.hit(this.hit_n)}undo_hit_stock(t){this.stock.undo_hit(t)}recycle(){return this.stock.recycle()}undo_recycle(t){this.stock.undo_recycle(t)}tableu_to_tableu(t){let{from:a,to:e,i:s}=t,i=this.tableus[a].from_tableu(s);return this.tableus[e].to_tableu(i.cards),i}undo_tableu_to_tableu(t,a){let{from:e,to:s,i}=t;this.tableus[s].undo_to_tableu(a.cards),this.tableus[e].undo_from_tableu(a)}waste_to_tableu(t){let{to:a}=t,e=this.stock.from_waste();return this.tableus[a].to_tableu(e.cards),e}undo_waste_to_tableu(t,a){let{to:e}=t;this.tableus[e].undo_to_tableu(a.cards),this.stock.undo_from_waste(a.cards)}waste_to_foundation(t){let{to:a}=t,e=this.stock.from_waste();return this.foundations[a].to_foundation(e.cards),e}undo_waste_to_foundation(t,a){let{to:e}=t;this.foundations[e].undo_to_foundation(a.cards),this.stock.undo_from_waste(a.cards)}tableu_to_foundation(t){let{from:a,to:e}=t,s=this.tableus[a].from_tableu(1);return this.foundations[e].to_foundation(s.cards),s}undo_tableu_to_foundation(t,a){let{from:e,to:s}=t;this.foundations[s].undo_to_foundation(a.cards),this.tableus[e].undo_from_tableu(a)}foundation_to_tableu(t){let{from:a,to:e}=t,s=this.foundations[a].from_foundation();return this.tableus[e].to_tableu(s.cards),s}undo_foundation_to_tableu(t,a){let{from:e,to:s}=t;this.tableus[s].undo_to_tableu(a.cards),this.foundations[e].undo_from_foundation(a.cards)}},Fa=za;S(Fa,"make",(t,a)=>{let e=bt.map(i=>Ma.make(a,i)),s=Ta.make(a);return new za(t,s,e,Ct.map(i=>Sa.make(i)))});var ze=class extends pe{constructor(){super(...arguments);l(this,"data")}get solitaire(){return this.game}apply(){return this.data=this.solitaire.hit_stock(),I.HitStock}undo(){return this.solitaire.undo_hit_stock(this.data),I.Undo}undo_pov(a){a.undo_hit_stock(this.data)}};S(ze,"can",t=>t.can_hit);S(ze,"apply",t=>{t.hit_stock()});var Fe=class extends pe{constructor(){super(...arguments);l(this,"data")}get solitaire(){return this.game}apply(){return this.data=this.solitaire.recycle(),I.Recycle}undo(){return this.solitaire.undo_recycle(this.data),I.Undo}undo_pov(a){a.undo_recycle(this.data)}};S(Fe,"can",t=>t.can_recycle);S(Fe,"apply",t=>{t.recycle()});var Re=class extends pe{constructor(){super(...arguments);l(this,"res")}get solitaire(){return this.game}get data(){return this._data}apply(){return this.res=this.solitaire.tableu_to_tableu(this.data),this.res.flip?I.TableuToTableuFlip:I.TableuToTableuNoFlip}undo(){return this.solitaire.undo_tableu_to_tableu(this.data,this.res),I.Undo}undo_pov(a){a.undo_tableu_to_tableu(this.data,this.res)}};S(Re,"can",(t,a)=>{let e=a,s=t.can_drag_tableu(e);return s?t.can_drop_tableu({...a,...s}):!1});S(Re,"apply",(t,a)=>{t.tableu_to_tableu(a)});var Ue=class extends pe{constructor(){super(...arguments);l(this,"res")}get solitaire(){return this.game}get data(){return this._data}apply(){return this.res=this.solitaire.waste_to_tableu(this.data),I.WasteToTableu}undo(){return this.solitaire.undo_waste_to_tableu(this.data,this.res),I.Undo}undo_pov(a){a.undo_waste_to_tableu(this.data,this.res)}};S(Ue,"can",(t,a)=>{const e=t.can_drag_waste;return e?t.can_drop_tableu({...a,...e}):!1});S(Ue,"apply",(t,a)=>{t.waste_to_tableu(a)});var ge=class extends pe{constructor(){super(...arguments);l(this,"res")}get solitaire(){return this.game}get data(){return this._data}apply(){return this.res=this.solitaire.waste_to_foundation(this.data),I.WasteToFoundation}undo(){return this.solitaire.undo_waste_to_foundation(this.data,this.res),I.Undo}undo_pov(a){a.undo_waste_to_foundation(this.data,this.res)}};S(ge,"can",(t,a)=>{const e=t.can_drag_waste;return e?t.can_drop_foundation({...a,...e}):!1});S(ge,"apply",(t,a)=>{t.waste_to_foundation(a)});var ye=class extends pe{constructor(){super(...arguments);l(this,"res")}get solitaire(){return this.game}get data(){return this._data}apply(){return this.res=this.solitaire.tableu_to_foundation(this.data),I.TableuToFoundation}undo(){return this.solitaire.undo_tableu_to_foundation(this.data,this.res),I.Undo}undo_pov(a){a.undo_tableu_to_foundation(this.data,this.res)}};S(ye,"can",(t,a)=>{const e=t.can_drag_tableu({...a,i:1});return e?t.can_drop_foundation({...a,...e}):!1});S(ye,"apply",(t,a)=>{t.tableu_to_foundation(a)});var Ce=class extends pe{constructor(){super(...arguments);l(this,"res")}get solitaire(){return this.game}get data(){return this._data}apply(){return this.res=this.solitaire.foundation_to_tableu(this.data),I.FoundationToTableu}undo(){return this.solitaire.undo_foundation_to_tableu(this.data,this.res),I.Undo}undo_pov(a){a.undo_foundation_to_tableu(this.data,this.res)}};S(Ce,"can",(t,a)=>{const e=t.can_drag_foundation(a);return e?t.can_drop_tableu({...a,...e}):!1});S(Ce,"apply",(t,a)=>{t.foundation_to_tableu(a)});var Ra=class{constructor(t,a,e){this.stock=t,this.waste=a,this.hidden=e}get can_hit(){return this.stock.length>0}get can_recycle(){return this.stock.length===0}get can_from_waste(){let{top_card:t}=this.waste;if(t)return{cards:[t]}}get clone(){return new Ra(this.stock.clone,this.waste.clone,this.hidden.clone)}from_waste(){return{cards:this.waste.remove_cards(1)}}undo_from_waste(t){this.waste.add_cards(t)}hit(t){let a=this.stock.remove_cards(t),e=this.waste.remove_all();this.hidden.unshift_cards(e),this.waste.add_cards(a)}undo_hit(t){let{cards:a,waste:e}=t;this.waste.remove_cards(a.length),this.hidden.remove_cards(e.length),this.waste.add_cards(e),this.stock.add_cards(a)}recycle(){let t=this.waste.remove_all();return this.hidden.add_cards(t),this.stock.unshift_cards(this.hidden.remove_all()),{waste:t}}undo_recycle(t){let{waste:a}=t;this.hidden.add_cards(this.stock.remove_all());let e=this.hidden.remove_cards(a.length);this.waste.add_cards(e)}},Ua=class{constructor(t,a){this.back=t,this.front=a}get clone(){return new Ua(this.back.clone,this.front.clone)}can_from(t){let a=this.front.clone;this.back.clone;let e=a.remove_cards(t);if(e.length===t)return{cards:e}}can_to(t){return!!t[0]}from_tableu(t){let a=this.front.remove_cards(t);if(this.front.length===0){let[e]=this.back.remove_cards(1);return e?(this.front.add_cards([e]),{flip:e,cards:a}):{cards:a}}return{cards:a}}undo_from_tableu(t){if(t.flip){let a=this.front.remove_cards(1);this.back.add_cards(a)}this.front.add_cards(t.cards)}to_tableu(t){this.front.add_cards(t)}undo_to_tableu(t){this.front.remove_cards(t.length)}},Ca=class{constructor(t,a,e,s){l(this,"nb_recycles",0);this.settings=t,this.stock=a,this.tableus=e,this.foundations=s}get clone(){return new Ca(this.settings,this.stock.clone,this.tableus.map(t=>t.clone),this.foundations.map(t=>t.clone))}get recycle_n(){return this.settings.limit==="nolimit"?9999:this.settings.limit==="threepass"?3:1}get hit_n(){return this.settings.cards==="threecards"?3:1}get has_recycle_limit(){return this.recycle_n-this.nb_recycles>0}get can_hit(){return this.stock.can_hit}get can_recycle(){return this.has_recycle_limit&&this.stock.can_recycle}can_drag_tableu(t){let{from:a,i:e}=t;return this.tableus[a].can_from(e)}can_drop_tableu(t){let{to:a,cards:e}=t;return this.tableus[a].can_to(e)}can_drop_foundation(t){let{to:a,cards:e}=t;return this.foundations[a].can_to(e)}get can_drag_waste(){return this.stock.can_from_waste}can_drag_foundation(t){let{from:a}=t;return this.foundations[a].can_from}hit_stock(){return this.stock.hit(this.hit_n)}undo_hit_stock(t){this.stock.undo_hit(t)}recycle(){return this.nb_recycles++,this.stock.recycle()}undo_recycle(t){this.nb_recycles--,this.stock.undo_recycle(t)}tableu_to_tableu(t){let{from:a,to:e,i:s}=t,i=this.tableus[a].from_tableu(s);return this.tableus[e].to_tableu(i.cards),i}undo_tableu_to_tableu(t,a){let{from:e,to:s,i}=t;this.tableus[s].undo_to_tableu(a.cards),this.tableus[e].undo_from_tableu(a)}waste_to_tableu(t){let{to:a}=t,e=this.stock.from_waste();return this.tableus[a].to_tableu(e.cards),e}undo_waste_to_tableu(t,a){let{to:e}=t;this.tableus[e].undo_to_tableu(a.cards),this.stock.undo_from_waste(a.cards)}waste_to_foundation(t){let{to:a}=t,e=this.stock.from_waste();return this.foundations[a].to_foundation(e.cards),e}undo_waste_to_foundation(t,a){let{to:e}=t;this.foundations[e].undo_to_foundation(a.cards),this.stock.undo_from_waste(a.cards)}tableu_to_foundation(t){let{from:a,to:e}=t,s=this.tableus[a].from_tableu(1);return this.foundations[e].to_foundation(s.cards),s}undo_tableu_to_foundation(t,a){let{from:e,to:s}=t;this.foundations[s].undo_to_foundation(a.cards),this.tableus[e].undo_from_tableu(a)}foundation_to_tableu(t){let{from:a,to:e}=t,s=this.foundations[a].from_foundation();return this.tableus[e].to_tableu(s.cards),s}undo_foundation_to_tableu(t,a){let{from:e,to:s}=t;this.tableus[s].undo_to_tableu(a.cards),this.foundations[e].undo_from_foundation(a.cards)}};const pt={s:"spades",d:"diamonds",h:"hearts",c:"clubs"},Ci={A:"a",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",T:"t",J:"j",Q:"q",K:"k"};class Di extends x{constructor(){super(...arguments);l(this,"_card");l(this,"rank");l(this,"rsuit");l(this,"suit");l(this,"decsuit")}get waiting(){return this._card===Dt}get card(){return this._card}set card(e){this._card=e,this.rank.play_now(Ci[e[1]]),this.suit.play_now(pt[e[0]]),this.rsuit.play_now(pt[e[0]]),this.decsuit.forEach(s=>s.play_now(pt[e[0]]))}_init(){let e=n.make(40,50);this.decsuit=[...Array(3).keys()].map(()=>e=e.add(N().mul(n.make(4,30)).add(n.make(0,30)))).map(i=>{let h=this.make(R,i,{name:"suit"});return h.origin=n.make(32,32),h.play_now("spades"),h.scale=n.one.scale(N().x*.2).add(n.make(.2,.2)),h});let s=[...Array(2).keys()].map(()=>e=e.sub(N().mul(n.make(24,30)).add(n.make(0,40)))).map(i=>{i.x+=120;let h=this.make(R,i,{name:"suit"});return h.origin=n.make(32,32),h.play_now("spades"),h.scale=n.one.scale(N().x*.2).add(n.make(.2,.2)),h});this.decsuit.push(...s),this.rank=this.make(R,n.make(140,32),{name:"rank"}),this.rank.origin=n.make(32,32),this.rank.play_now("a"),this.rank.scale=n.make(.6,.6),this.suit=this.make(R,n.make(30,32),{name:"suit"}),this.suit.origin=n.make(32,32),this.suit.play_now("spades"),this.suit.scale=n.make(.6,.6),this.rsuit=this.make(R,n.make(150,210),{name:"suit"}),this.rsuit.origin=n.make(32,32),this.rsuit.rotation=Math.PI,this.rsuit.play_now("spades"),this.rsuit.scale=n.make(.6,.6)}}class Ni extends x{constructor(){super(...arguments);l(this,"decoration");l(this,"_will_lerp_t");l(this,"_will_lerp_position");l(this,"_dragging");l(this,"_drag_decay",n.zero);l(this,"_on_drag");l(this,"_on_drop");l(this,"_on_hover");l(this,"facing");l(this,"anim");l(this,"shadow");l(this,"_will_hover");l(this,"_will_hover_end");l(this,"_will_flip_back");l(this,"_will_flip_front");l(this,"lerp_hover_y");l(this,"_lerp_drag_shadow");l(this,"_tr");l(this,"_tx");l(this,"_ty");l(this,"_target_speed");l(this,"_speed");l(this,"_hover_time");l(this,"_after_ease")}release(){this.lerp_position(),this.unset_dragging(),this.bind_drag(void 0),this.bind_drop(void 0),this.bind_hover(void 0),this._after_ease=void 0}lerp_release(){this.lerp_position(),this.unset_dragging()}get waiting(){return this.decoration.waiting}get card(){return this.decoration.card}set card(e){this.decoration.card=e,this.waiting?this.anim._animation==="idle"&&(this.anim.play_now("wait"),this.decoration.visible=!1):this.anim._animation==="wait"&&(this.anim.play_now("idle"),this.decoration.visible=!0)}get flipping(){return this.anim._animation==="flip"||this.anim._animation==="back_flip"}get easing(){return!!this._tx||!!this._ty||!!this._tr}lerp_position(e,s){this._tx&&(this.cancel(this._tx),this._tx=void 0),this._ty&&(this.cancel(this._ty),this._ty=void 0),this._will_lerp_position=e,this._will_lerp_t=s,e?this._target_speed=(1-(s||.5))*.2:this._target_speed=0}get drag_decay(){return this._drag_decay}bind_drag(e){this._on_drag=e}bind_drop(e){this._on_drop=e}bind_hover(e){this._on_hover=e}get hover_time(){return this._hover_time??0}ease_rotation(e,s=U.half){this._tr=this.tween_single(this._tr,[this.rotation,e],i=>{this.rotation=i},s,0,()=>{this._tr=void 0})}ease_position(e,s=U.half){e.equals(this.position)||(this._target_speed=s/U.half*.2,this._tx=this.tween_single(this._tx,[this.position.x,e.x],i=>{this.position.x=i},s,0,()=>{this._tx=void 0,this._target_speed=0}),this._ty=this.tween_single(this._ty,[this.position.y,e.y],i=>{this.position.y=i},s,0,()=>{this._ty=void 0}))}set_dragging(){this._lerp_drag_shadow=0,this._dragging=!0}unset_dragging(){this._dragging=!1}after_ease(e){this._after_ease=e}_init(){this.shadow=this._make(R,n.make(0,0),{name:"card"}),this.shadow.origin=n.make(88,120),this.shadow.play_now("shadow"),this.anim=this.make(R,n.make(0,0),{name:"card"}),this.anim.origin=n.make(88,120),this.facing=-1,this.anim.play_now("back_idle"),this.decoration=this.make(Di,n.make(-80,-120),{}),this.decoration.visible=!1,this.decoration.card=Dt,this._will_hover=!1,this._will_hover_end=!1,this._will_flip_back=!1,this._will_flip_front=!1,this.lerp_hover_y=0,this._dragging=!1,this._speed=0,this._target_speed=0;let e=this;this.make(D,n.make(16,16).sub(this.anim.origin),{rect:m.make(0,0,170,210),on_hover(){return e._on_hover&&e._on_hover[0](),e._on_drag?(e._will_hover=!0,!0):!1},on_hover_end(){e._on_hover&&e._on_hover[1](),e._will_hover_end=!0},on_drag_begin(s){return e._on_drag?(e._lerp_drag_shadow=0,e._dragging=!0,e._drag_decay=s.sub(e.position),!0):!1},on_drag_end(){e._dragging=!1},on_drag(s){return e._on_drag?(e._on_drag(s),!0):!1},on_drop(){e._on_drop&&e._on_drop()}})}_update(){this._speed=he(this._speed,this._target_speed,.2);let e=xi(Math.abs(Math.sin(F.seconds*3)))*this._speed;if(this.scale=n.make(1-e,1+e),this._will_lerp_position&&(this.position=n.lerp(this.position,this._will_lerp_position,this._will_lerp_t??.5)),this._lerp_drag_shadow!==void 0&&(this._dragging?this._lerp_drag_shadow=he(this._lerp_drag_shadow,1,.2):(this._lerp_drag_shadow=he(this._lerp_drag_shadow,0,.2),this._lerp_drag_shadow<.001&&(this._lerp_drag_shadow=void 0))),this._lerp_drag_shadow!==void 0){let s=this._lerp_drag_shadow*.05;this.shadow.scale=n.one.add(n.one.scale(s)),this.shadow.alpha=(1-this._lerp_drag_shadow)*100+155}if(this._after_ease&&!this.easing&&(this._after_ease(),this._after_ease=void 0),this.anim.position.y=he(this.anim.position.y,this.lerp_hover_y,.2),this.decoration.position.y=he(this.decoration.position.y,this.lerp_hover_y-120,.16),this._will_hover&&(this._will_hover=!1,!this.easing&&!this.flipping&&this._will_flip_back&&this._will_flip_front&&this.anim.play(this.facing===1?"hover":"back_hover"),this.lerp_hover_y=-6,this._hover_time=0),this._will_hover_end){this._will_hover_end=!1;let s=this.waiting?"wait":"idle";!this.easing&&!this.flipping&&this._will_flip_back&&this._will_flip_front&&this.anim.play(this.facing===1?s:"back_idle"),this.lerp_hover_y=0,this._hover_time=void 0}this._hover_time!==void 0&&this._hover_time>=0&&(this.easing&&(this._hover_time=0),this._hover_time+=F.delta),this._will_flip_back&&(this.easing||(this._will_flip_back=!1,this.shadow.visible=!1,this.decoration.visible=!1,this.anim.play_now("flip",()=>{this.facing=-1,this.anim.play("back_idle"),this.shadow.visible=!0}))),this._will_flip_front&&(this.easing||(this._will_flip_front=!1,this.shadow.visible=!1,this.decoration.visible=!1,this.anim.play_now("back_flip",()=>{this.facing=1,this.anim.play(this.waiting?"wait":"idle"),this.shadow.visible=!0,this.waiting||(this.decoration.visible=!0)})))}flip_back(){this._will_flip_front=!1,this._will_flip_back=this.facing!==-1||this.anim._animation==="back_flip"}flip_front(){this._will_flip_back=!1,this._will_flip_front=this.facing!==1||this.anim._animation==="flip"}_draw_shadow(e){e.push_matrix(v.create_transform(this.position,this.origin,this.scale,this.rotation)),this.g_position=n.transform(n.zero,e.m_matrix),this.shadow.draw(e),e.pop_matrix()}}class Da extends x{constructor(){super(...arguments);l(this,"_on_drop");l(this,"_will_hover");l(this,"_will_hover_end");l(this,"anim")}bind_drop(e){this._on_drop=e}_init(){this.anim=this._make(R,n.make(0,0),{name:"card"}),this.anim.origin=n.make(88,120);let e=this;this.make(D,n.make(16,16).sub(this.anim.origin),{rect:m.make(0,0,170,210),on_hover(){return e._on_drop?(e._will_hover=!0,!0):!1},on_hover_end(){e._will_hover_end=!0},on_drop(){e._on_drop&&e._on_drop()}})}_update(){this._will_hover&&(this._will_hover=!1),this._will_hover_end&&(this._will_hover_end=!1)}}class Oi extends x{constructor(){super(...arguments);l(this,"frees");l(this,"used");l(this,"_shadow_group")}borrow(){let e=this.frees.shift();return this.used.push(e),e.visible=!0,e}release(e){e.visible=!1,this.used.splice(this.used.indexOf(e),1),e.release(),this.frees.push(e)}set shadow_group(e){this._shadow_group=e}_init(){this.frees=wa.deck.map(e=>{let s=this.make(Ni,n.zero,{});return s.visible=!1,s}),this.used=[]}_draw(e){var s,i;e.push_matrix(v.create_transform(this.position,this.origin,this.scale,this.rotation)),this.g_position=n.transform(n.zero,e.m_matrix),this._draw_children(e),(s=this._shadow_group)==null||s.forEach(h=>{h._draw_shadow(e)}),(i=this._shadow_group)==null||i.forEach(h=>{h.draw(e)}),e.pop_matrix()}}class ue extends x{constructor(){super(...arguments);l(this,"_i_gap");l(this,"cards")}get data(){return this._data}get length(){return this.cards.length}get top_card(){return this.cards[this.cards.length-1]}get h(){let e=55*(1-this.cards.length/50);return this.data.h??e}get top_position(){return this.position.add(n.make(0,this.cards.length*this.h))}add_cards(e){e.forEach(s=>s.send_front()),this.cards.push(...e),this._reposition()}remove_cards(e){let s=this.cards.splice(this.cards.length-e,this.cards.length);return this._reposition(),s}set i_gap(e){this._i_gap!==e&&(this._i_gap=e,this._reposition())}_reposition(){this.cards.forEach((e,s)=>{let i=this._i_gap!==void 0&&s>this._i_gap?s+.5:s;e.ease_position(this.p_position.add(n.make(0,i*this.h)))})}ease_position(e){this.position=e,this._reposition()}_init(){this.cards=[]}}function Pi(t){return 1/(1+Math.exp(-t))}class ft extends x{constructor(){super(...arguments);l(this,"_waiting",!1);l(this,"_cards")}get waiting(){return this._waiting}wait_drop(){this._waiting=!0}set cards(e){this._cards=e.slice(0),this._cards.forEach(s=>s.send_front()),this._cards.forEach(s=>s.set_dragging())}get drag_decay(){return this._cards[0].drag_decay}get h(){return 50}drag(e){this._cards.forEach((s,i)=>{let h=e.add(n.make(0,this.h*i).sub(this.drag_decay)),r=1-Pi(i/this._cards.length*2);s.lerp_position(h,r)})}lerp_release(){let e=this._cards.splice(0);return e.forEach(s=>s.lerp_release()),e}_init(){this._cards=[]}}class Li extends x{constructor(){super(...arguments);l(this,"backs");l(this,"fronts");l(this,"drop_target")}get data(){return this._data}get top_front_position(){return this.fronts.top_position}get top_back_position(){return this.backs.top_position}free(){return[...this.backs.remove_cards(this.backs.length),...this.fronts.remove_cards(this.fronts.length)]}add_backs(e){e.forEach(s=>s.flip_back()),this.backs.add_cards(e),this.fronts.ease_position(this.top_back_position)}add_fronts(e){var h;this.fronts.add_cards(e),e.forEach(r=>r.flip_front());let s=this,i=this.fronts.cards.length;this.fronts.cards.forEach((r,d)=>{r.bind_drop(void 0),r.bind_drag(p=>{s.data.on_front_drag(i-d,p)})}),(h=this.fronts.top_card)==null||h.bind_drop(()=>{s.data.on_front_drop()}),this.open_drop_target()}remove_fronts(e){var r;let s=this.fronts.remove_cards(e);s.forEach(d=>{d.bind_drop(void 0)});let i=this,h=this.fronts.cards.length;return this.fronts.cards.forEach((d,p)=>{d.bind_drop(void 0),d.bind_drag(c=>{i.data.on_front_drag(h-p,c)})}),(r=this.fronts.top_card)==null||r.bind_drop(()=>{i.data.on_front_drop()}),this.open_drop_target(),s}flip_front(e){var h;let[s]=this.backs.remove_cards(1);s.card=e,s.flip_front(),this.fronts.ease_position(this.top_back_position),(h=this.fronts.top_card)==null||h.bind_drop(void 0),this.fronts.add_cards([s]);let i=this;this.fronts.top_card.bind_drag(r=>{i.data.on_front_drag(1,r)}),this.fronts.top_card.bind_drop(()=>{i.data.on_front_drop()})}get empty(){return this.fronts.length===0&&this.backs.length===0}open_drop_target(){this.drop_target.visible=this.empty}flip_back(){let[e]=this.fronts.remove_cards(1);e.flip_back(),this.backs.add_cards([e]),this.fronts.ease_position(this.top_back_position),e.bind_drop(void 0)}_init(){this.drop_target=this.make(Da,n.make(0,0),{}),this.drop_target.bind_drop(()=>{this.data.on_front_drop()}),this.backs=this.make(ue,n.make(0,0),{h:33}),this.fronts=this.make(ue,n.make(0,0),{}),this.open_drop_target()}_update(){let e=this.fronts.cards.findIndex(s=>s.hover_time>U.thirds);e!==-1?this.fronts.i_gap=e:this.fronts.i_gap=void 0}}const Ii=async t=>{let a=new Bi,e=await a.get_pov();return{get game_pov(){return e},cmd(s,i){s.can(e.game,i)?(e.apply(s,i),t.apply_pov(s,i),a.apply(s,i).then(h=>{h?t.apply(h):t.cant(s,i)})):t.cant(s,i)},undo(){e.can_undo?(e.undo_pov(),a.undo().then(s=>{s?(e.undo(s),t.undo(s)):t.cant_undo()})):t.cant_undo()}}};class Bi{constructor(){l(this,"game");let a={cards:"threecards",limit:"nolimit"},e=Fa.make(a,wa.deck);this.game=va.make(e)}async get_pov(){return this.game.pov.clone}async apply(a,e){return this.game.apply(a,e)}async undo(){return this.game.undo()}}const gt=t=>typeof t=="object"&&t.foundation!==void 0;class Hi extends x{constructor(){super(...arguments);l(this,"anim")}get data(){return this._data}disable(){this.anim.play("disabled")}enable(){this.anim.play("idle")}_init(){let e=this.make(R,n.make(0,0),{name:"recycle"});this.anim=e;let s=this;this.make(D,n.make(20,20),{rect:m.make(0,0,140,160),on_hover(){e._animation!=="disabled"&&e.play("hover")},on_hover_end(){e._animation!=="disabled"&&e.play("idle")},on_click(){s.data.on_recycle()}})}}const $i=(t,a)=>{for(let e=t.length-1;e>=0;e--)a(t[e])};class ji extends x{constructor(){super(...arguments);l(this,"stock");l(this,"waste");l(this,"waste_hidden")}get data(){return this._data}get can_recycle(){return this.stock.length===0}free(){return[...this.stock.remove_cards(this.stock.length),...this.waste.remove_cards(this.waste.length),...this.waste_hidden.remove_cards(this.waste_hidden.length)]}add_waste_hidden(e){this.waste_hidden.add_cards(e)}add_waste(e){e.forEach(s=>{s.bind_drop(void 0),s.bind_drag(void 0)}),this.waste.add_cards(e),e.forEach((s,i)=>s.flip_front()),this.bind_new_front()}add_stocks(e){this.stock.add_cards(e)}remove_waste(e){return this.waste.remove_cards(e)}bind_new_front(){var e;this.waste.cards.forEach(s=>s.bind_drag(void 0)),(e=this.waste.top_card)==null||e.bind_drag(s=>{this.data.on_front_drag(s)})}undo_hit(e,s){let i=this.waste.remove_cards(e.length),h=this.waste_hidden.remove_cards(s.length);this.waste.add_cards(h),h.forEach((r,d)=>{r.card=s[d],r.flip_front()}),i.forEach(r=>r.flip_back()),this.stock.add_cards(i),this.bind_new_front()}hit(e){let s=this.stock.remove_cards(e.length);s.forEach((h,r)=>h.card=e[r]),s.forEach((h,r)=>h.flip_front());let i=this.waste.remove_cards(this.waste.cards.length);i.forEach(h=>{h.flip_back(),h.bind_drag(void 0)}),this.waste_hidden.add_cards(i),this.waste.add_cards(s),$i(this.waste_hidden.cards,h=>h.send_back()),this.bind_new_front(),Z.play("hit")}recycle(){let e=this.waste.remove_cards(this.waste.length);this.waste_hidden.add_cards(e);let s=this.waste_hidden.remove_cards(this.waste_hidden.length);s.forEach(i=>i.flip_back()),s.forEach(i=>i.send_front()),this.stock.add_cards(s),Z.play("recycle")}undo_recycle(e){let s=this.stock.remove_cards(this.stock.length);this.waste_hidden.add_cards(s);let i=this.waste_hidden.remove_cards(e);s.forEach(h=>h.flip_front()),i.forEach(h=>h.flip_front()),this.waste.add_cards(i)}_init(){this.stock=this.make(ue,n.make(0,0),{h:1}),this.waste=this.make(ue,n.make(0,260),{}),this.waste_hidden=this.make(ue,n.make(0,300),{h:0});let e=this;this.make(D,n.make(-64,-80),{rect:m.make(0,0,160,210),on_click(){e.stock.length>0&&e.data.on_hit()}})}}class Xi extends x{constructor(){super(...arguments);l(this,"foundation");l(this,"drop_target")}get data(){return this._data}add_cards(e){var s;this.foundation.add_cards(e),(s=this.foundation.top_card)==null||s.bind_drag(i=>this.data.on_front_drag(i))}remove_cards(e){return this.foundation.remove_cards(e)}_init(){this.drop_target=this.make(Da,n.make(0,0),{}),this.drop_target.bind_drop(()=>{this.data.on_front_drop()}),this.foundation=this.make(ue,n.make(0,0),{h:0})}}class Vi extends x{constructor(){super(...arguments);l(this,"recycle_view");l(this,"cards");l(this,"dealer");l(this,"stock");l(this,"tableus");l(this,"foundations");l(this,"dragging");l(this,"drag_source");l(this,"back_res")}get game_pov(){return this.back_res.game_pov}get pov(){return this.game_pov.game}get cmd(){return this.back_res.cmd}_init(){let e=this;this.make(D,n.zero,{rect:m.make(0,0,0,0),on_up(){e.dragging&&!e.dragging.waiting&&e._release_cancel_drag()}}),this.recycle_view=this.make(Hi,n.make(40,200),{on_recycle(){e.stock.can_recycle&&e.cmd(Fe)}}),this.cards=this.make(Oi,n.zero,{});let s=120,i=320;this.stock=this.make(ji,n.make(s,i),{on_hit(){e.cmd(ze)},on_front_drag(f){if(e.dragging)e.dragging.drag(f);else if(e.pov.can_drag_waste){let y=e.stock.remove_waste(1);e.dragging=e.make(ft,n.zero,{}),e.dragging.cards=y,e.cards.shadow_group=y,e.drag_source="waste",Z.play("drag1")}}});let h=350,r=180,d=200;this.tableus=bt.map(f=>this.make(Li,n.make(h+d*f,r),{on_front_drag(y,w){if(e.dragging)e.dragging.drag(w);else if(e.pov.can_drag_tableu({from:f,i:y})){let k=e.tableus[f].remove_fronts(y);e.dragging=e.make(ft,n.zero,{}),e.dragging.cards=k,e.cards.shadow_group=k,e.drag_source={tableu:f,i:y};let M=Math.min(3,Math.floor(y/3)+1);Z.play(`drag${M}`)}},on_front_drop(){if(e.drag_source==="waste")e.dragging.wait_drop(),e.cmd(Ue,{to:f});else if(gt(e.drag_source)){let{foundation:y}=e.drag_source;e.dragging.wait_drop(),e.cmd(Ce,{from:y,to:f})}else if(e.drag_source){let{tableu:y,i:w}=e.drag_source;e.dragging.wait_drop(),e.cmd(Re,{from:y,to:f,i:w})}}}));let p=1790,c=166,g=240;this.foundations=Ui.map(f=>this.make(Xi,n.make(p,c+g*f),{on_front_drag(y){if(e.dragging)e.dragging.drag(y);else if(e.pov.can_drag_foundation({from:f})){let w=e.foundations[f].remove_cards(1);e.dragging=e.make(ft,n.zero,{}),e.dragging.cards=w,e.cards.shadow_group=w,e.drag_source={foundation:f},Z.play("drag1")}},on_front_drop(){if(e.drag_source==="waste")e.dragging.wait_drop(),e.cmd(ge,{to:f});else if(!gt(e.drag_source)){if(e.drag_source){let{tableu:y,i:w}=e.drag_source;w===1&&(e.dragging.wait_drop(),e.cmd(ye,{from:y,to:f,i:1}))}}}})),this.dealer=this.make(Qi,n.zero,{on_shuffle(){e.dealer.cards.forEach(f=>e.cards.release(f))}}),Ii(this).then(f=>{this.back_res=f,this._collect_pov()})}_release_cancel_drag(){let e=this.dragging.lerp_release();if(this.drag_source==="waste")this.stock.add_waste(e);else if(gt(this.drag_source)){let{foundation:s}=this.drag_source;this.foundations[s].add_cards(e)}else{let{tableu:s,i}=this.drag_source;this.tableus[s].add_fronts(e)}this.dragging.dispose(),this.dragging=void 0,this.drag_source=void 0,Z.play("cancel"),e[0].after_ease(()=>{this.cards.shadow_group=void 0})}_collect_pov(){this._init_pov()}_init_pov(){let{pov:e,stock:s,tableus:i}=this;this.recycle_view.visible=e.can_recycle,s.add_stocks(e.stock.stock.cards.map(h=>this.cards.borrow())),bt.map(h=>{let r=i[h],d=e.tableus[h];r.add_backs(d.back.cards.map(p=>this.cards.borrow())),r.add_fronts(d.front.cards.map(p=>{let c=this.cards.borrow();return c.card=p,c}))})}_refresh_recycle(){this.pov.can_hit?this.recycle_view.visible=!1:this.recycle_view.visible=!0,this.pov.can_recycle?this.recycle_view.enable():this.recycle_view.disable()}undo(e){if(Z.play("undo2"),e instanceof ze)this.stock.undo_hit(e.data.cards,e.data.waste),this._refresh_recycle();else if(e instanceof Fe)this.stock.undo_recycle(e.data.waste.length),this._refresh_recycle();else if(e instanceof Re){let{flip:s}=e.res,{from:i,to:h,i:r}=e.data;s&&this.tableus[i].flip_back();let d=this.tableus[h].remove_fronts(r);this.tableus[i].add_fronts(d)}else if(e instanceof Ue){let{to:s}=e.data,i=this.tableus[s].remove_fronts(1);this.stock.add_waste(i)}else if(e instanceof ye){let{flip:s}=e.res,{from:i,to:h}=e.data;s&&this.tableus[i].flip_back();let r=this.foundations[h].remove_cards(1);this.tableus[i].add_fronts(r)}else if(e instanceof ge){let{to:s}=e.data,i=this.foundations[s].remove_cards(1);this.stock.add_waste(i)}else if(e instanceof Ce){let{from:s,to:i}=e.data,h=this.tableus[i].remove_fronts(1);this.foundations[s].add_cards(h)}}apply(e){let s;if(e instanceof ze)this.stock.hit(e.data.cards),this._refresh_recycle();else if(e instanceof Fe)this.stock.recycle(),this._refresh_recycle();else if(e instanceof Re){let{flip:i}=e.res,{from:h,to:r,i:d}=e.data,p=this.dragging.lerp_release();this.tableus[r].add_fronts(p),i&&this.tableus[h].flip_front(i),s=p}else if(e instanceof Ue){let{to:i}=e.data,h=this.dragging.lerp_release();this.tableus[i].add_fronts(h),this.stock.bind_new_front(),s=h}else if(e instanceof ye){let{flip:i}=e.res,{from:h,to:r}=e.data,d=this.dragging.lerp_release();this.foundations[r].add_cards(d),i&&this.tableus[h].flip_front(i),s=d}else if(e instanceof ge){let{to:i}=e.data,h=this.dragging.lerp_release();this.foundations[i].add_cards(h),this.stock.bind_new_front(),s=h}else if(e instanceof Ce){let{from:i,to:h}=e.data,r=this.dragging.lerp_release();this.tableus[h].add_fronts(r),this.stock.bind_new_front(),s=r}s&&(this.dragging.dispose(),this.dragging=void 0,this.drag_source=void 0,s[0].after_ease(()=>{this.cards.shadow_group=void 0}))}apply_pov(e,s){}cant(e,s){e===ye?this._release_cancel_drag():e===ge?this._release_cancel_drag():console.log("cant",e)}cant_undo(){}request_undo(){this.back_res.undo()}request_new_game(){}}let qi=[...Array(50).keys()].map(()=>N().mul(P.scale(.8)));class Ki extends x{constructor(){super(...arguments);l(this,"_timer");l(this,"_cards",[]);l(this,"end_on_final_ease")}get data(){return this._data}set cards(e){this._cards=e,e.length>0&&(this._timer=U.seconds*.5)}_update(){if(this.end_on_final_ease&&this._cards.every(e=>!e.easing)&&(this.end_on_final_ease=void 0,this.data.on_end()),F.on_interval(U.three)&&this._timer)if(this._timer-=F.delta,this._timer<0)this._timer=void 0,this.end_on_final_ease=!0,this._cards.forEach((e,s)=>{e.ease_position(n.make(P.x/2,P.y*.8),U.half+U.half*(s/this._cards.length))});else{let e=vi(qi),s=Wt(),i=n.max(n.min(e.add(s.scale(100)),P),n.zero);for(let h=0;h<3;h++)this._cards.filter(r=>!r.easing).sort((r,d)=>r.position.distance(e)-d.position.distance(e)).slice(0,2+ua(2)).forEach((r,d)=>{r.ease_position(i.add(Wt().scale(d*5)),U.half+ce()*3*U.sixth)})}this._cards.forEach(e=>e.update())}_draw(e){this._cards.forEach(s=>s.draw(e))}}function Qt(t,a=ce){let e,s,i;for(s=t.length;s;)e=a()*s--|0,i=t[s],t[s]=t[e],t[e]=i;return t}function*Gi(t){let a=t.length,e=1;for(;e<a;)e=3*e+1;for(;e>0;){e=Math.floor(e/3);for(let s=1;s<=e;s++)yield*Yi(t,s,e)}}function*Yi(t,a,e){let s=t.length;for(let i=a+e;i<s;i+=e)for(let h=i;h>=e&&t[h]<t[h-1];h-=e)t[h]=[t[h-1],t[h-1]=t[h]][0],yield[h,h-1]}const yt=(t,a)=>{let e=t/(a-1)*Math.PI;e=mi(e/Math.PI,-Math.PI*.2,Math.PI*.2)-Math.PI*.5;let s=P.scale(1/2).sub(n.up.scale(1200)),i=s.add(n.from_angle(e,1400)),h=i.sub(s).normal.angle+Math.PI/2;return[i,h]};class Wi extends x{constructor(){super(...arguments);l(this,"_cards",[]);l(this,"layer");l(this,"_sort_shot");l(this,"flip_i");l(this,"final");l(this,"end_on_final_ease")}get data(){return this._data}set cards(e){this._cards=e,e.length>0&&this._begin_lay()}_begin_lay(){Qt(this._cards),this.layer=[0,Qt(this._cards.map((e,s)=>s))]}_begin_sort(){let e=this._cards.map(d=>d.card?Ri(d.card):-1);this._sort_shot=[];let s=Gi(e),i=Math.floor(e.length/3),h=0,r=this._cards.slice(0);for(let d of s){let[p,c]=d,g=r[p];r[p]=r[c],r[c]=g,h++>3&&h%i===0&&this._sort_shot.unshift(r.slice(0))}this._sort_shot.unshift(r)}_begin_flip(){this.flip_i=0}_update(){if(this.layer){let[e,s]=this.layer;for(let i=0;i<1;i++){if(e>=s.length){this._cards.every(h=>!h.easing)&&(this.layer=void 0,this._begin_sort());break}if(F.on_interval(U.three)){let[h,r]=yt(e,this._cards.length);this._cards[e].ease_position(h),this._cards[e].ease_rotation(r),e++}}this.layer&&(this.layer[0]=e)}if(this._sort_shot){if(this._sort_shot.length===0)this._sort_shot=void 0,this._begin_flip();else if(F.on_interval(U.sixth)){let e=this._sort_shot.pop();this._cards.forEach((s,i)=>{let h=e.findIndex(r=>r===s);if(i!==h){let[r,d]=yt(h,this._cards.length);this._cards[i].ease_position(r),this._cards[i].ease_rotation(d)}}),this._cards=e}}this.flip_i!==void 0&&F.on_interval(U.three)&&(this._cards[this.flip_i].flip_back(),this.flip_i++,this.flip_i>=this._cards.length&&(this.flip_i=void 0,this.final=!0)),this.final&&(this.final=void 0,this.end_on_final_ease=!0,this._cards.forEach(e=>{let[s,i]=yt(2,5);e.ease_position(s),e.ease_rotation(i)})),this.end_on_final_ease&&this._cards.every(e=>!e.easing)&&(this.end_on_final_ease=void 0,this.data.on_layout()),this._cards.forEach(e=>e.update())}_draw(e){this._cards.forEach(s=>s.draw(e))}}class Qi extends x{constructor(){super(...arguments);l(this,"_cards");l(this,"shuffler");l(this,"laydeck")}get data(){return this._data}get cards(){return this._cards}set cards(e){this._cards=e}_init(){let e=this;this.laydeck=this.make(Wi,n.make(0,0),{on_layout(){e.laydeck.cards=[],e.begin_shuffle()}}),this.shuffler=this.make(Ki,n.make(0,0),{on_end(){e.shuffler.cards=[],e.data.on_shuffle()}})}begin_laydeck(){this.laydeck.cards=this._cards}begin_shuffle(){this.shuffler.cards=this._cards}}class Zi extends x{constructor(){super(...arguments);l(this,"_score");l(this,"score_text");l(this,"score_text_shadow")}set score(e){this._score=e,this.score_text.text=`${e}`,this.score_text_shadow.text=`${e}`}get score(){return this._score}_init(){this._score=0,this.make($,n.make(0,25),{key:"score",width:80,height:100}),this.score_text_shadow=this.make($,n.make(100,6),{no_trans:!0,key:`${this.score}`,width:180,height:100,color:u.black}),this.score_text=this.make($,n.make(100,0),{no_trans:!0,key:`${this.score}`,width:180,height:100})}}class Ji extends x{get data(){return this._data}_init(){[N().mul(P),N().mul(P),N().mul(P),N().mul(P),N().mul(P),N().mul(P),N().mul(P),N().mul(P),N().mul(P),N().mul(P),N().mul(P)].forEach(e=>{let s=this.make(R,e,{name:"swiggle"});s.origin=n.make(600,400),s.scale=n.one.scale(.5+N().x),N().y<.5&&s.play("small"),s.rotation=N().y*Math.PI});let a=this;this.make(D,n.zero,{rect:m.make(0,0,1920,1080),on_hover(){return!0},on_drag(){return!0},on_click(){return a.data.on_close(),!0}})}}class De extends x{constructor(){super(...arguments);l(this,"hamburger");l(this,"sidebar");l(this,"overlay")}set sidebar_open(e){this.sidebar.open=e,this.overlay.visible=e,this.hamburger.open=e}_init(){let e,s;this.make(ch,n.zero,void 0);let i=this.make(Vi,n.make(0,0),{on_score(p){s.score=p}});this.make(bi,n.make(160,1e3),{text:"undo",on_click(){i.request_undo()}}),s=this.make(Zi,n.make(16,860),{});let h=this,r=this.make(Ji,n.zero,{on_close(){h.sidebar_open=!1,h.hamburger.open=!1}}),d=this.make(th,n.make(2,2),{on_open:p=>{h.sidebar_open=p}});e=this.make(eh,n.make(-600,180),{on_new_game(){i.request_new_game(),h.sidebar_open=!1}}),this.sidebar=e,this.overlay=r,this.hamburger=d,this.sidebar_open=!1}}class eh extends x{constructor(){super(...arguments);l(this,"_t_x");l(this,"_open")}get data(){return this._data}set open(e){this._open=e,this._t_x&&this.cancel(this._t_x),e?this._t_x=this.tween([this.position.x,0],s=>{this.position.x=s},U.sixth,0,()=>{this._t_x=void 0}):this._t_x=this.tween([this.position.x,-600],s=>{this.position.x=s},U.sixth,0,()=>{this._t_x=void 0})}_init(){this._open=!1;let e=this,s=this.make(R,n.make(0,-100),{name:"side_menu_bg"});s.scale=n.make(1.4,1.4);let i=20,h=60,r=160;this.make(be,n.make(i,h),{text:"main_menu",on_click(){H.next(ht)}}),this.make(be,n.make(i,h+r),{text:"new_game",on_click(){e.data.on_new_game()}}),this.make(be,n.make(i,h+r*2),{text:"settings",on_click(){H.next($a,n.zero,{selected_index:1,on_back:De})}}),this.make(be,n.make(i,h+r*3),{text:"how_to_play",on_click(){H.next(Ba,n.zero,{selected_index:0,on_back:De})}}),this.make(be,n.make(i,h+r*4),{text:"about",on_click(){H.next(Pa,n.zero,{on_back:De})}})}}class be extends x{constructor(){super(...arguments);l(this,"_t_color");l(this,"_i_color");l(this,"bg");l(this,"fg")}get data(){return this._data}get i_color(){return this._i_color}set i_color(e){this._i_color=e,this.bg.color=u.lerp(u.white,u.hex(2106417),this._i_color),this.fg.color=u.lerp(u.white,u.hex(2106417),1-this._i_color)}set hover(e){this._t_color&&this.cancel(this._t_color),e?this._t_color=this.tween([this.i_color,0],s=>{this.i_color=s},U.sixth,0,()=>{this._t_color=void 0}):this._t_color=this.tween([this.i_color,1],s=>{this.i_color=s},U.sixth,0,()=>{this._t_color=void 0})}_init(){this._i_color=0,this.bg=this.make(V,n.make(-20,-40),{w:412,h:120,color:u.hex(2106417)}),this.fg=this.make($,n.make(0,0),{key:this.data.text,width:350,height:100,color:u.white});let e=360,s=120,i=this;this.make(D,n.make(-20,-40),{rect:m.make(0,0,e,s),on_hover(){i.hover=!0},on_hover_end(){i.hover=!1},on_click(){return i.data.on_click(),!0}})}}class th extends x{constructor(){super(...arguments);l(this,"_open");l(this,"anim")}get data(){return this._data}set open(e){this._open=e,this._open?this.anim.play("open"):this.anim.play("idle")}_init(){this._open=!1;let e=this.make(R,n.make(0,0),{name:"hmg_bg"});this.anim=e;let s=200,i=100,h=this;this.make(D,n.make(20,20),{rect:m.make(0,0,s,i),on_hover(){e.play(h._open?"open_hover":"hover")},on_hover_end(){e.play(h._open?"open":"idle")},on_click(){return h.open=!h._open,h.data.on_open(h._open),!0}})}}const ah=`en=english
how_to_play=how to play
statistics=statistics
settings=settings
about=about
language=language
color_theme=color theme
sounds=sounds
pink=pink
blue=blue
orange=orange
on=on
off=off
undo=undo
score=score
main_menu=main menu
new_game=new game
general=general
turning_cards=turning cards
three_cards=3 cards
one_card=1 card
turning_limit=turning limit
no_limit=no limit
three_passes=3 passes
one_pass=1 pass
`,sh=`tr=türkçe
how_to_play=nasıl oynanır
statistics=istatistikler
settings=ayarlar
about=hakkında
language=dil
color_theme=renk teması
sounds=sesler
pink=pembe
blue=mavi
orange=turuncu
on=açık
off=kapalı
undo=geri al
score=puan
main_menu=ana menü
new_game=yeni oyun
general=genel
turning_cards=açılan kartlar
three_cards=3 kart
one_card=1 kart
turning_limit=açma limiti
no_limit=limitsiz
three_passes=3 geçiş
one_pass=1 geçiş
`,ih=`fr=française
how_to_play=comment jouer
statistics=statistiques
settings=paramètres
about=environ
language=langue
color_theme=thème de couleur
sounds=sons
pink=rose
blue=bleu
orange=orange
on=sur
off=éteint
`,hh=`# octopus
Octopus is played with 2 52-card playing decks. Initially 54 cards are dealt to the tableu in ten piles, face down except for the top cards. The tableu piles are build down by rank. In-suit sequences can be moved together. The 50 remaining cards can be dealt to the tableu 10 at a time when none of the piles are empty.

The aim of the game Octopus is to remove all cards from the table. Assembling a tableu will remove it. The tableu piles build down by rank, and in suit sequences can be moved together. 

Game can be played with 

  - 4 suits
  - 2 suits
  - 1 suit

- Any card can be placed on an empty pile.

The scoring system is:

 - A face down card that gets turned over:  10 points
 - All face down cards are turned over on a pile: 15 points
 - A card sitting atop next higher card of the same suit: 2 points
 - A completed suit removed from the tableu: 50 points
 - Undo a move: - 20 points


Scoring multipliers:


- 1 suit: 1 multiplier
- 2 suits: 2 multiplier
- 4 suits: 3 multiplier

# solitaire
Solitaire is played with a standard 52-card deck.
A tableu of 7 piles of cards are laid, first pile contains 1 card, second pile contains 2 cards and so on. The topmost card of each pile is turned face up, the cards behind are turned face down.
The remaining cards form the stock and are placed facedown at the upper left.

The four foundations are built up by suit from Ace to King.
The tableu piles can be built down by alternate colors.
Every face-up card in a partial pile, or a complete pile, can be moved, as a unit, to another tableu pile on the basis of its highest card.
Any empty piles can be filled with a King, or a pile of cards with a King.

The aim of the game is to build up four stacks of cards from Ace to King for each suit, on one of the four foundations.

There are different ways of dealing the stock cards to the waste depending on these two settings.

Turning cards
- Three cards: Turning three cards at once to the waste
- One card: Turning one card at once to the waste

Turning limit
- No limit: no limit on passes through the deck.
- 3 passes: 3 passes through the deck.
- 1 pass: 1 pass through the deck.


- If all face up cards in a tableu is moved, the topmost back facing card is turned over.
- Cards in waste can be moved to a tableu or a foundation.
- The topmost card in a foundation can be moved back to a tableu. 
- If the stock is empty and there are cards in the waste, waste cards can be recycled back to stock if pass through the deck is allowed according to turning limit.
- Moves can be undo with the undo button.


The scoring system is:

- waste to tableu:       5 points
- waste to foundation:   10 points
- tableu to foundation:  10 points
- turn over tableu card: 5 points
- foundation to tableu: -15 points
- recycle waste:        -70 points
- undo a move:          -30 points


Scoring multipliers:

- No limit: 1 multiplier
- 3 limits: 2 multiplier
- 1 limit:  3 multiplier

# fourtimes
Fourtimes is played with a standard 52-card deck. There are four open cells and four open foundations. Cards are dealt face up into eight cascades. Four of which has seven cards each, and other four has six cards each. 
The top card of each cascade begins a tableu. Tableus must be built down by alternating colors. Foundations are built up by suit from Ace to King.

- Any cell card or top card of any cascade may be moved to build on a tableu, or moved to an empty cell, or to an empty cascade, or its foundation.
- Complete or partial tableus may be moved to build on existing tableus, or moved to empty cascades.

- The aim of the game is to move all cards to their foundation piles.

The scoring system is:

- Add a card to foundation: 10 points
- Undo a move : -40 points

# about
A hobby project, created in 2023 by [eguneys]"https://eguneys.github.io".

A fun way to pass time with 3 solitaire games. [Solitaire]"https://en.wikipedia.org/wiki/Klondike_(solitaire)", [Fourtimes]"https://en.wikipedia.org/wiki/FreeCell", and [Octopus]"https://en.wikipedia.org/wiki/Spider_(solitaire)".

- This project is free and open source at [Github]"https://github.com/eguneys/solitaire23"
- Other games will be linked here when available.

- Consider donating at [Patreon]"https://www.patreon.com/eguneys".

- For business inquiries please contact me on twitter [@eguneys]"https://twitter.com/eguneys?lang=en".

- Contribute translating at [Translation]"https://github.com/eguneys/solitaire23/blob/master/TRANSLATE.md"

`,rh=`# octopus
Octopus 52-kart oyun destesiyle oynanır. Başlangıçta 54 kart 10 yığın halinde tablolara, en üst kart hariç üstü kapalı şekilde dağıtılır. Kalan 50 kart tablolara boş yığın olmadığı taktirde, 10 ar şekilde dağıtılabilir.

Octopus oyunun amacı bütün kartları masadan kaldırmaktır. Bir tablo oluşturmak o kartları kaldırır. Tablo yığınları sayıya göre kurulur. Aynı sembol serileri beraber hareket ettirilebilir. 

Oyun şu şekillerde oynanabilir:

  - 4 sembol
  - 2 sembol
  - 1 sembol

- Boş yığına herhangi bir kart yerleştirilebilir.

Puanlama sistemi şu şekildedir:

 - Kapalı bir kartı açmak:  10 puan
 - Bir yığındaki tüm kapalı kartları açmak: 15 puan
 - Üst sayılı bir kartın üstünde aynı sembolde bir kart: 2 puan
 - Masadan kaldırılan, tamamlanmış bir sembol: 50 puan
 - Hamle geri alma: - 20 puan

Puanlama katlama:

- 1 sembol: 1 katlama
- 2 sembol: 2 katlama
- 4 sembol: 3 katlama

# solitaire
Solitaire standart 52 kartlık desteyle oynanır.
7 tane kart yığın tablosu yayılır. İlk yığında 1 kart vardır, ikinci yığında 2 kart gibi. Her yığınındaki en üstteki kart açılır. Arkadaki kartlar kapalıdır.
Kalan kartlar stoğu oluşturur ve sol üstte kapalı bir şekilde durur.

4 kuruluş sembollere göre As tan Kral'a kadar yapılır.
Tablo yığınları değişen renklere göre kurulur.
Yarım yada tam yığındaki her açık kart, bütün olarak, diğer bir tabloya yığının en yüksek sayılı kartına dayanarak hareket ettirilebilir.
Her boş yığın Kral'la ya da Kral olan bir kart yığınıyla doldurulabilir.


Oyununun amacı 4 kuruluş'u As'tan Kral'a kadar doldurmaktır.

Stoktaki kartları çöpe dağıtmanın değişik yolları vardır, şu ayarlara göre:

Açılan kartlar:

- Üç kart: Çöpe bir kerede üç kart birden açma
- Tek kart: Çöpe bir kerede tek kart açma


Açma limiti:

- Limit yok: desteden geçmenin limiti yok.
- 3 geçiş: desteden 3 geçiş hakkı.
- 1 geçiş: desteden 1 geçiş hakkı.

- Eğer bir tablodaki tüm açık kartlar yer değiştirdiyse, tablonun en üstteki kapalı kartı açılır.
- Çöpteki kartlar bir tabloya ya da kuruluşa hareket ettirilebilir.
- Stok boşsa ve çöpte kartlar varsa, Çöpteki kartlar stoğa geri dönüştürülebilir, ayarlarda açma limitine göre.
- Hamleler geri alma butonuyla geri alınabilir.


Puanlama sistemi:

- çöpten tabloya: 5 puan
- çöpten kuruluşa: 10 puan
- tablodan kuruluşa: 10 puan
- tablodaki bir kartı açma: 5 puan
- kuruluştan tabloya: - 15 puan
- çöpü geri dönüştürme: -70 puan
- hamle geri alma: -30 puan

Puan katlama:

- Limit yok: 1 katlama
- 3 limit: 2 katlama
- 1 limit: 3 katlama

# fourtimes
Fourtimes standard 52 kartlık desteyle oynanır. 4 tane açık hücre ve 4 kuruluş bulunur. Kartlar açık bir şekilde sekiz kasete dağıtılır. 4 tanesinin her birinde 7 kart bulunur, diğerlerinin her birinde 6 kart bulunur.

- Her hücre kartı veya herhangi bir kasetin en üst kartı, tablo oluşturmak için, boş hücreye, boş kasete, veya boş kuruluşa hareket ettirilebilir.

- Bütün ya da yarım tablolar diğer tablolarla birleştirilebilir, yada boş kasetlere yerleştirilebilir.

- Oyunun amacı tüm kartları kuruluşlarına hareket ettirmektir.


Puanlama sistemi:

- Kuruluşa bir kart koymak: 10 puan
- Hamle geri alma: -40 puan

# about

2023 te bir hobi projesi olarak [eguneys]"https://eguneys.github.io" tarafından yapılmıştır.

Eğlenceli bir şekilde zaman geçirmek için 3 solitaire oyunu. [Solitaire]"https://en.wikipedia.org/wiki/Klondike_(solitaire)", [Fourtimes]"https://en.wikipedia.org/wiki/FreeCell", and [Octopus]"https://en.wikipedia.org/wiki/Spider_(solitaire)".

- Bu proje ücretsiz ve [Github]"https://github.com/eguneys/solitaire23"da açık kaynaktır.

- Diğer oyunlar mümkün olduğunda buraya linki koyulacaktır.

- [Patreon]"https://www.patreon.com/eguneys" la bağış yapmayı düşünebilirsiniz.

- İş teklifleri için lütfen twitter dan [@eguneys]"https://twitter.com/eguneys?lang=en" iletişime geçin.

- Çeviri için katkıda bulunmak için [Translation]"https://github.com/eguneys/solitaire23/blob/master/TRANSLATE.md".
`;let Na={en:hh,tr:rh},Oa={en:ah,tr:sh,fr:ih};const Ae=Object.keys(Oa),nh=Object.keys(Na);let Me={},Et={};Ae.forEach(t=>Me[t]=oh(Oa[t]));nh.forEach(t=>Et[t]=lh(Na[t]));function oh(t){let a={};return t.trim().split(`
`).map(e=>{let[s,i]=e.split("=");a[s]=i}),a}function lh(t){let a={},e,s="";return t.split(`
`).forEach(i=>{let h=i.match(/^# (.*)/);h?(e&&(a[e]=s,s=""),e=h[1]):s+=i+`
`}),a[e]=s,a}const ne=class ne{constructor(){l(this,"_language",ne.default_language);l(this,"hooks",[])}get default_language(){return ne.default_language}get language(){return this._language}set language(a){this._language=a,this.hooks.forEach(e=>e())}get default_trans2_map(){return Et[ne.default_language]}get trans2_map(){return Et[this.language]}get default_trans_map(){return Me[ne.default_language]}get trans_map(){return Me[this.language]}lang_key(a){return Me[a][a]}key(a,e){return e?Me[e][a]||this.default_trans_map[a]:this.trans_map[a]||this.default_trans_map[a]}key2(a){var e;return((e=this.trans2_map)==null?void 0:e[a])||this.default_trans2_map[a]}register(a){return this.hooks.push(a),()=>{this.hooks.splice(this.hooks.indexOf(a),1)}}};l(ne,"default_language","en");let Tt=ne;const G=new Tt;let Zt=["nolimit","threepass","onepass"],Jt=["threecards","onecard"];class dh{get cards(){return"threecards"}set cards(a){}get limit(){return"nolimit"}set limit(a){}}class _h{get language(){return"en"}set language(a){}}let Xe=new dh,At=new _h;class V extends x{constructor(){super(...arguments);l(this,"_color")}get data(){return this._data}set color(e){this._color=e}get color(){return this._color}set height(e){this.data.h=e}_init(){this.color=this.data.color??u.white}_draw(e){e.rect(m.make(this.position.x,this.position.y,this.data.w,this.data.h),this.color)}}class ch extends x{_init(){this.make(V,n.make(0,0),{w:E.width,h:E.height,color:u.hex(2236962)})}}class D extends x{constructor(){super(...arguments);l(this,"_scaled_rect")}get data(){return this._data}get width(){return this._scaled_rect.w}get height(){return this._scaled_rect.h}get _rect(){return this.data.abs?m.make(this.position.x,this.position.y,this.width,this.height):this._scaled_rect}get rect(){let{p_scissor:e}=this;return e?this._rect.overlaps_rect(e):this._rect}_init(){this._scaled_rect=this.data.rect;let e=!1,s=!1,i=this;this.unbindable_input({on_click_begin(h,r){var g,f;if(r||!i.p_visible)return!1;let d=h.mul(E.v_screen),p=m.make(d.x-4,d.y-4,8,8);return i.rect.overlaps(p)?((f=(g=i.data).on_click_begin)==null?void 0:f.call(g))??!1:!1},on_drag(h,r){var d,p,c,g;if(h._right||!i.p_visible)return!1;if(e){let f=h.m.mul(E.v_screen);return((p=(d=i.data).on_drag)==null?void 0:p.call(d,f))??!1}if(h.m&&(!r||!r.m)){let f=h.e.mul(E.v_screen),y=m.make(f.x-4,f.y-4,8,8);return i.rect.overlaps(y)?(e=!0,((g=(c=i.data).on_drag_begin)==null?void 0:g.call(c,f))??!1):!1}return!1},on_up(h,r,d){var c,g,f,y,w,k;if(r||!i.p_visible)return!1;let p=h.mul(E.v_screen);if(e&&(e=!1,(g=(c=i.data).on_drag_end)==null||g.call(c,p)),(y=(f=i.data).on_up)==null||y.call(f,h,r),d){let M=d.mul(E.v_screen),O=m.make(M.x-4,M.y-4,8,8);i.rect.overlaps(O)&&((k=(w=i.data).on_drop)==null||k.call(w,d))}return!1},on_hover(h){var c,g,f,y;if(!i.data.on_hover||!i.p_visible)return!1;let r=h.mul(E.v_screen),d=m.make(r.x-4,r.y-4,8,8);if(i.rect.overlaps(d)){if(!s)return s=!0,((g=(c=i.data).on_hover)==null?void 0:g.call(c))??!1}else s&&(s=!1,(y=(f=i.data).on_hover_end)==null||y.call(f));return s},on_hover_clear(){var h,r;return i.data.on_hover_end?s?(s=!1,(r=(h=i.data).on_hover_end)==null?void 0:r.call(h)):(i.p_visible,!1):!1},on_click(h,r){var g,f;if(!i.p_visible)return!1;let d=h.mul(E.v_screen),p=m.make(d.x-4,d.y-4,8,8);return i.rect.overlaps(p)?((f=(g=i.data).on_click)==null?void 0:f.call(g))??!1:!1},on_wheel(h,r){var g,f;if(!i.p_visible)return!1;let d=r.mul(E.v_screen),p=m.make(d.x-4,d.y-4,8,8);return i.rect.overlaps(p)?((f=(g=i.data).on_wheel)==null?void 0:f.call(g,h))??!1:!1}})}_draw(){ie.push_matrix(v.create_translation(this.position)),this.g_position=n.transform(n.zero,ie.m_matrix),this._scaled_rect=m.transform(this.data.rect,ie.m_matrix),this.data.debug&&ie.rect(m.make(0,0,this.width,this.height),u.hex(65280)),ie.pop_matrix()}}class Pa extends x{get data(){return this._data}_init(){this.make(V,n.zero,{w:1920,h:1080,color:u.hex(11845300)});let a=this;this.make(Ot,n.zero,{key:"about",on_back(){H.next(a.data.on_back??ht)}});let e=1880,s=940;this.make(Ut,n.make(20,120),{name:"panel_bg_nine_slice",w:e,h:s});let i=this._make(xe,n.make(0,0),{width:1880-100,content:G.key2("about")});this.make(te,n.make(60,160),{w:e-100,h:s-80,content:i})}}const tt=class tt extends x{constructor(){super(...arguments);l(this,"height")}get data(){return this._data}_init(){let e=60,s=this._make(J,n.zero,{size:e,text:" "}),i=s.width,h=s.height,r=0,d=0;this.data.content.trim().split(`
`).forEach(p=>{tt.parse(p).forEach(c=>{let g;c.link?g=this.make(ph,n.zero,{size:e,text:c.text,color:wi,on_click(){window.open(c.link,"_blank")}}):g=this.make(J,n.zero,{size:e,text:c.text}),r+g.width>this.data.width&&(r=0,d+=g.height),g.position=n.make(r,d),r+=g.width+i}),r=0,d+=h}),this.height=d+h}};l(tt,"parse",e=>{let s=/\[([^\]]*)\]\"([^\"]*)\"/g,i=0,h=[],r;for(;(r=s.exec(e))!==null;){let[d,p,c]=r,g=r.index,f=g+d.length;g>i&&e.slice(i,g).split(" ").filter(y=>!!y).forEach(y=>h.push({text:y})),h.push({text:p,link:c}),i=f}return i<e.length&&e.slice(i).split(" ").filter(d=>!!d).forEach(d=>h.push({text:d})),h});let xe=tt;class La extends x{constructor(){super(...arguments);l(this,"_selected_index")}get data(){return this._data}on_click(e){this.selected_index=this.data.tabs.indexOf(e)}get selected_index(){return this._selected_index}set selected_index(e){this._selected_index=e,this.data.tabs.forEach((s,i)=>s.set_active(e===i)),this.data.on_selected_index(e)}_init(){this._selected_index=this.data.selected_index,this.data.tabs.forEach((i,h)=>i.set_active(this._selected_index===h));let e=this.data.tabs.length===4?.63:1,s=this.data.tabs.reduce((i,h)=>i+h.width*e,0);this.make(V,n.make(10,130),{w:s,h:10,color:u.hex(1052737)}),this.data.tabs.forEach(i=>i.parent=this),this.data.tabs.forEach(i=>{this.data.tabs.length===4&&(i.scale=n.one.scale(.6),i.position.y+=50)})}_update(){this.data.tabs.forEach(e=>e.update())}_draw(e){e.push_matrix(v.create_translation(this.position)),this._draw_children(e),this.data.tabs.forEach(s=>s.draw(e)),e.pop_matrix()}_dispose(){this.data.tabs.forEach(e=>e.dispose())}}class $ extends x{constructor(){super(...arguments);l(this,"_text");l(this,"_text_view");l(this,"dispose_trans")}get data(){return this._data}set color(e){this._text_view.color=e}get height(){return this._text_view.height}set text(e){this._text=e,this._text_view.text=this.text,this._text_view.size=this.size}get text(){return this.data.no_trans?this._text:G.key(this._text)}get size(){let e=ke.sp_font.width_of(this.text),s=128,i=s*this.data.width/e,h=ke.sp_font.height_of(this.text),r=s*this.data.height/h;return Math.min(i,r)}_init(){let e=this.data.center,s=this.data.color;this._text=this.data.key,this._text_view=this.make(J,n.make(0,0),{size:this.size,text:this.text,center:e,color:s}),this.data.no_trans||(this.dispose_trans=G.register(()=>{this._text_view.text=G.key(this._text),this._text_view.size=this.size}))}_dispose(){var e;(e=this.dispose_trans)==null||e.call(this)}}class J extends x{constructor(){super(...arguments);l(this,"_color");l(this,"_size")}get data(){return this._data}get justify(){return this.data.center?n.make(0,0):n.zero}get color(){return this._color}set color(e){this._color=e}get text(){return this.data.text}set text(e){this.data.text=e}get size(){return this._size}set size(e){this._size=e}get width(){return this.font.width_of(this.text)/this.font.size*this.size}get height(){return this.font.height_of(this.text)/this.font.size*this.size}_init(){this.color=this.data.color??u.white,this._size=this.data.size??128,this.rotation=this.data.rotation??0,this.origin=this.data.center?n.make(this.width/2,0):n.zero}_draw(e){e.push_matrix(v.create_transform(this.position,this.origin,n.one,this.rotation)),this.g_position=n.transform(n.zero,e.m_matrix),e.str_j(this.font,this.text,n.zero,this.justify,this.size,this.color),e.pop_matrix()}}class ph extends x{constructor(){super(...arguments);l(this,"text_view")}get data(){return this._data}set color(e){this.text_view.color=e}get width(){return this.text_view.width}get height(){return this.text_view.height}_init(){this.text_view=this.make(J,n.zero,this.data);let e=this;this.make(D,n.make(0,-this.text_view.height/3),{rect:m.make(0,0,this.text_view.width,this.text_view.height),on_hover(){e.color=u.red},on_hover_end(){e.color=e.data.color??u.white},on_click(){e.data.on_click()}})}}class de extends x{constructor(){super(...arguments);l(this,"_active");l(this,"anim")}get data(){return this._data}get width(){return this.data.w}get height(){return 32+64}set_active(e){this._active=e,e?this.anim.play("active"):this.anim.play("idle")}_init(){let e=this.make(R,n.zero,{name:"tab3_bg"});this.anim=e,this.make($,n.make(this.width/2,this.height/2),{no_trans:this.data.no_trans,width:this.width-80,height:this.height,key:this.data.text,center:!0});let s=this;this.make(D,n.make(32,32),{rect:m.make(0,0,360,90),on_hover(){s._active||e.play("hover")},on_hover_end(){e.play(s._active?"active":"idle")},on_click(){s.parent.on_click(s)}})}}class Ia extends x{constructor(){super(...arguments);l(this,"_selected_index")}get data(){return this._data}get selected_index(){return this._selected_index}set selected_index(e){this._selected_index=e,this.data.panels.forEach((s,i)=>s.visible=e===i)}get active_panel(){return this.data.panels[this.selected_index]}_init(){this.selected_index=this.data.selected_index}_update(){this.active_panel.update()}_draw(e){e.push_matrix(v.create_translation(this.position)),this._draw_children(e),this.active_panel.draw(e),e.pop_matrix()}_dispose(){this.data.panels.forEach(e=>e.dispose())}}class te extends x{constructor(){super(...arguments);l(this,"scroll_y");l(this,"scroll_off");l(this,"scroll_edge_off");l(this,"target_scroll_y");l(this,"thumb");l(this,"content_base_position")}get data(){return this._data}get content(){return this.data.content}get width(){return this.data.w}get height(){return this.data.h}_init(){this.data.content.parent=this,this.content_base_position=n.copy(this.data.content.position),this.scroll_y=0,this.scroll_off=0,this.scroll_edge_off=0,this.target_scroll_y=0,this.make(V,n.make(this.data.w-20-8,8),{w:20,h:this.data.h-16,color:u.black});let e=this.height*(this.height/this.content.height);this.thumb=this._make(V,n.make(this.data.w-20-8+4,8+4),{w:20-8,h:e,color:u.white});let s,i=this;this.make(D,n.zero,{rect:m.make(0,0,this.width,this.height),on_drag_begin(h){var r,d;return(d=(r=i.data).on_scroll)==null||d.call(r),s=h,!0},on_drag(h){return i.scroll_off=h.y-s.y,!0},on_up(h,r){if(i.scroll_y+=i.scroll_off,i.scroll_off=0,i.target_scroll_y=i.scroll_y,i.scroll_y>0)i.scroll_edge_off=i.scroll_y,i.scroll_y=0;else{let d=-i.content.height+i.data.h;i.content.height<i.data.h?(i.scroll_edge_off=i.scroll_y,i.scroll_y=0):i.scroll_y<d&&(i.scroll_edge_off=i.scroll_y-d,i.scroll_y=d)}return!0},on_wheel(h){return i.target_scroll_y=i.scroll_y-h*100,!0}})}_update(){this.scroll_y=he(this.scroll_y,this.target_scroll_y,.4);let e=-this.content.height+this.data.h;this.scroll_y=Math.max(Math.min(0,this.scroll_y),e),this.scroll_edge_off=he(this.scroll_edge_off,0,.2),this.thumb.position.y=-(this.scroll_y+this.scroll_off+this.scroll_edge_off)/this.content.height*this.height,this.data.content.position.set_in(this.content_base_position.add(n.make(40,40+this.scroll_y+this.scroll_off+this.scroll_edge_off))),this.content.update()}_draw(e){e.push_matrix(v.create_translation(this.position)),this._draw_children(e);let s=n.transform(n.zero,e.m_matrix);e.push_scissor(m.make(s.x,s.y+12,this.width,this.height-24)),this.thumb.draw(e),e.pop_scissor(),e.push_scissor(m.make(s.x,s.y,this.width,this.height)),this.g_scissor=m.make(s.x,s.y,this.width,this.height),this.data.content.draw(e),e.pop_scissor(),e.pop_matrix()}_dispose(){this.data.content.dispose()}}class fh extends x{constructor(){super(...arguments);l(this,"t");l(this,"_t")}_init(){this.t=E.width*.5,this._t=this.tween([E.width*2.5,E.width*.5],e=>{this.t=e},U.half,0,()=>{this._t=void 0})}get done(){return!this._t}_draw(e){e.push_matrix(v.create_transform(n.make(this.t,E.height/2),n.make(160,90),n.make(13,13),Math.PI*.25)),e.rect(m.make(0,0,320,180),u.hex(65280)),e.pop_matrix(),e.push_matrix(v.create_transform(n.make(this.t-1820,E.height/2),n.make(80,10),n.make(13,13),Math.PI*.25)),e.rect(m.make(0,0,160,10),u.hex(0)),e.pop_matrix()}}class Ve extends x{get data(){return this._data}_init(){let a=this.make(R,n.zero,{name:"main_settings_bg"});this.make($,n.make(320,86),{key:this.data.text,center:!0,width:400,height:100,color:u.black});let e=this.make($,n.make(320,86),{key:this.data.text,center:!0,width:400,height:100}),s=e.position.y,i=this;this.make(D,n.make(100,50),{rect:m.make(0,0,440,120),on_hover(){a.play("hover"),i.tween([e.position.y,s-2],h=>{e.position.y=h},U.lengths)},on_hover_end(){a.play("idle"),i.tween([e.position.y,s+2],h=>{e.position.y=h},U.lengths)},on_click(){i.data.on_click()}})}}class gh extends x{get data(){return this._data}_init(){let a=this.make(R,n.zero,{name:this.data.name}),e=this;this.make(D,n.make(this.data.rect.x,this.data.rect.y),{debug:this.data.debug,rect:m.make(0,0,this.data.rect.w,this.data.rect.h),on_hover(){a.play("hover")},on_hover_end(){a.play("idle")},on_click(){e.data.on_click()}})}}class Ot extends x{get data(){return this._data}_init(){let a=this;this.make(gh,n.zero,{name:"navigation_bg",rect:m.make(30,30,540,100),on_click(){a.data.on_back()}}),this.make($,n.make(112,54),{key:this.data.key,width:400,height:96})}}class Ba extends x{get data(){return this._data}_init(){let a=this.data.selected_index??0;this.make(V,n.zero,{w:1920,h:1080,color:u.hex(11845300)});let e=this;this.make(Ot,n.zero,{key:"how_to_play",on_back(){H.next(e.data.on_back??ht)}}),this.make(Ut,n.make(20,180),{name:"panel_bg_nine_slice",w:1860,h:860});let s=410,i=[this._make(de,n.make(2,2),{no_trans:!0,text:"solitaire",w:s}),this._make(de,n.make(2+s+4,2),{no_trans:!0,text:"fourtimes",w:s}),this._make(de,n.make(2+(s+4)*2,2),{no_trans:!0,text:"octopus",w:s})],h=40,r=780,d=this._make(xe,n.make(0,0),{width:1800-80,content:G.key2("solitaire")}),p=this._make(te,n.make(20,h),{w:1800,h:r,content:d});d=this._make(xe,n.make(0,0),{width:1800-80,content:G.key2("fourtimes")});let c=this._make(te,n.make(20,h),{w:1800,h:r,content:d});d=this._make(xe,n.make(0,0),{width:1800-80,content:G.key2("octopus")});let g=this._make(te,n.make(20,h),{w:1800,h:r,content:d}),f=[p,c,g],y=this.make(Ia,n.make(20,180),{w:1860,h:860,panels:f,selected_index:a});this.make(La,n.make(600,8),{tabs:i,selected_index:a,on_selected_index(w){y.selected_index=w}})}}class yh extends x{constructor(){super(...arguments);l(this,"box");l(this,"selected_text")}get data(){return this._data}set selected_index(e){this.box.selected_index=e,this.selected_text.text=this.data.items[e]}_init(){let e=this.make(R,n.zero,{name:"dropdown_bg"});this.selected_text=this.make($,n.make(32,60),{no_trans:this.data.no_trans,key:this.data.items[this.data.selected_index],width:250,height:100});let s=this;this.make(D,n.make(0,0),{abs:!0,rect:m.make(0,0,1920,1080),on_click(){let i=s.box.visible;return s.box.visible=!1,i},on_drag_begin(){return s.box.visible=!1,!1}}),this.make(D,n.make(16,32),{rect:m.make(0,0,480,112),on_hover(){e.play("hover")},on_hover_end(){e.play("idle")},on_click(){return s.box.visible?!1:(s.box.visible=!0,!0)}})}}class Ha extends x{constructor(){super(...arguments);l(this,"dropdown_list")}get data(){return this._data}set selected_index(e){this.dropdown_list.selected_index=e}_init(){let e=this.make(V,n.make(0,0),{w:500,h:500,color:u.hex(3233172)}),s=this,i=this._make(mh,n.make(0,0),{no_trans:this.data.no_trans,items:this.data.items,selected_index:this.data.selected_index,on_selected(h){s.data.on_selected(h)}});e.height=Math.min(500,i.height),this.dropdown_list=i,this.make(te,n.make(0,0),{w:500,h:Math.min(500,i.height),content:i})}}class mh extends x{constructor(){super(...arguments);l(this,"height");l(this,"_selected_index");l(this,"items")}get data(){return this._data}set selected_index(e){this._selected_index=e,this._color_items(),this.data.on_selected(e)}get selected_index(){return this._selected_index}_init(){let e=140,s=0,i=this;this.items=this.data.items.map((h,r)=>{let d=this.make(uh,n.make(0,s),{no_trans:this.data.no_trans,item:h,on_selected(){i.selected_index=r}});return s+=e,d}),this.height=s+30,this._selected_index=this.data.selected_index}_color_items(){this.items.forEach((e,s)=>{e.selected=this.selected_index===s})}}class uh extends x{constructor(){super(...arguments);l(this,"bg");l(this,"text")}get data(){return this._data}set selected(e){e?(this.bg.color=u.white,this.text.color=u.hex(3233172)):(this.text.color=u.white,this.bg.color=u.hex(3233172))}_init(){this.bg=this.make(V,n.make(-40,-30),{w:470,h:140,color:u.hex(3233172)}),this.text=this.make($,n.make(0,0),{no_trans:this.data.no_trans,width:340,height:140,key:this.data.item});let e=this;this.make(D,n.make(-40,-30),{rect:m.make(0,0,470,140),on_click(){return e.data.on_selected(),!0}})}}class xh extends x{constructor(){super(...arguments);l(this,"height")}_init(){let e=220,s=this.make(Qe,n.make(40,0),{name:"turning_cards",items:["three_cards","one_card"],selected_index:Jt.indexOf(Xe.cards),on_selected(h){Xe.cards=Jt[h]}}),i=this.make(Qe,n.make(40,e*1),{name:"turning_limit",items:["no_limit","three_passes","one_pass"],selected_index:Zt.indexOf(Xe.limit),on_selected(h){Xe.limit=Zt[h]}});this.make_box(s),this.make_box(i),this.height=e*3+500}make_box(e,s){let i=this.make(Ha,n.make(e.position.x+e.dropdown.position.x,e.position.y+e.dropdown.position.y+160),{no_trans:s,items:e.data.items,selected_index:e.data.selected_index,on_selected(h){i.visible=!1,e.dropdown.data.on_selected(h),e.dropdown.selected_text.text=e.data.items[h]}});e.dropdown.box=i,i.visible=!1}}class mt extends x{constructor(){super(...arguments);l(this,"height")}_init(){let e=220,s=this.make(Qe,n.make(40,0),{no_trans:!0,name:"language",items:Ae.map(h=>G.lang_key(h)),selected_index:Ae.indexOf(At.language),on_selected(h){G.language=Ae[h],At.language=Ae[h]}}),i=this.make(Qe,n.make(40,e*1),{name:"sounds",items:["on","off"],selected_index:0,on_selected(h){console.log(h)}});this.make_box(s,!0),this.make_box(i),this.height=e*3+500}make_box(e,s){let i=this.make(Ha,n.make(e.position.x+e.dropdown.position.x,e.position.y+e.dropdown.position.y+160),{no_trans:s,items:e.data.items,selected_index:e.data.selected_index,on_selected(h){i.visible=!1,e.dropdown.data.on_selected(h),e.dropdown.selected_text.text=e.data.items[h]}});e.dropdown.box=i,i.visible=!1}}class Qe extends x{constructor(){super(...arguments);l(this,"dropdown")}get data(){return this._data}_init(){this.make(V,n.make(0,0),{w:1300,h:200,color:u.hex(2106433)}),this.make($,n.make(50,60),{key:this.data.name,width:420,height:200});let e=this;this.dropdown=this.make(yh,n.make(720,8),{no_trans:this.data.no_trans,items:this.data.items,selected_index:this.data.selected_index,on_selected(s){e.data.on_selected(s)}})}}class $a extends x{get data(){return this._data}_init(){let a=this.data.selected_index??0;this.make(V,n.zero,{w:1920,h:1080,color:u.hex(11845300)});let e=this;this.make(Ot,n.zero,{key:"settings",on_back(){H.next(e.data.on_back??ht)}}),this.make(Ut,n.make(220,150),{name:"panel_bg_nine_slice",w:1480,h:910});let s=1e3/4,i=s*1.6,h=[this._make(de,n.make(2,2),{text:"general",w:i}),this._make(de,n.make(2+s+4,2),{no_trans:!0,text:"solitaire",w:i}),this._make(de,n.make(2+(s+4)*2,2),{no_trans:!0,text:"fourtimes",w:i}),this._make(de,n.make(2+(s+4)*3,2),{no_trans:!0,text:"octopus",w:i})],r;this.make(La,n.make(600,8),{tabs:h,selected_index:a,on_selected_index(w){r.selected_index=w}});let d=this._make(mt,n.make(0,0),{}),p=this._make(te,n.make(0,0),{w:1450,h:850,content:d});d=this._make(xh,n.make(0,0),{});let c=this._make(te,n.make(0,0),{w:1450,h:850,content:d});d=this._make(mt,n.make(0,0),{});let g=this._make(te,n.make(0,0),{w:1450,h:850,content:d});d=this._make(mt,n.make(0,0),{});let f=this._make(te,n.make(0,0),{w:1450,h:850,content:d}),y=[p,c,g,f];r=this.make(Ia,n.make(220,180),{w:1050,h:850,panels:y,selected_index:a})}}class ht extends x{_init(){this.make(V,n.zero,{w:1920,h:1080,color:u.hex(11845300)});let a=this.make(R,n.zero,{name:"main_title_bg"});a.scale=n.make(2,2),a=this.make(R,n.make(200,150),{name:"main_bg"});let e=this.make(J,n.make(16,32),{text:"lisotaire",color:u.hex(2106417)});this.make(J,n.make(16+e.width,32),{text:".com",color:u.hex(11845300)});let s=200,i=320,h=this.make(R,n.make(s,250),{name:"main_card_bg"});h.play_now("solitaire"),this.make(D,n.make(s+120,350),{rect:m.make(0,0,220,500),on_hover(){h.play("solitaire_hover")},on_hover_end(){h.play("solitaire")},on_click(){H.next(De)}});let r=this.make(J,n.make(s+120+140,350+250),{text:"solitaire",center:!0,size:98});r.rotation=Math.PI/2;let d=this.make(R,n.make(s+i,250),{name:"main_card_bg"});d.play_now("fourtimes"),this.make(D,n.make(s+i+120,350),{rect:m.make(0,0,220,500),on_hover(){d.play("fourtimes_hover")},on_hover_end(){d.play("fourtimes")},on_click(){}});let p=this.make(J,n.make(s+i+120+140,350+250),{text:"fourtimes",center:!0,size:82});p.rotation=Math.PI/2;let c=this.make(R,n.make(s+i*2,250),{name:"main_card_bg"});c.play_now("octopus"),this.make(D,n.make(s+i*2+120,350),{rect:m.make(0,0,220,500),on_hover(){c.play("octopus_hover")},on_hover_end(){c.play("octopus")},on_click(){}});let g=this.make(J,n.make(s+i*2+120+140,350+250),{text:"octopus",center:!0,size:96});g.rotation=Math.PI/2;let f=180,y=200;this.make(Ve,n.make(1300,y),{text:"how_to_play",on_click(){H.next(Ba)}}),this.make(Ve,n.make(1300,y+f),{text:"statistics",on_click(){}}),this.make(Ve,n.make(1300,y+f*2),{text:"settings",on_click(){H.next($a)}}),this.make(Ve,n.make(1300,y+f*3),{text:"about",on_click(){H.next(Pa)}})}}class wh extends x{constructor(){super(...arguments);l(this,"theme_target");l(this,"mask_target");l(this,"target");l(this,"target2");l(this,"mask");l(this,"current");l(this,"_next")}next(e,s=n.zero,i={}){this._next||(this._next=this._make(e,s,i),this.mask=this._make(fh,n.zero,{}))}_init(){this.target2=le.create(E.width,E.height),this.target=le.create(E.width,E.height),this.mask_target=le.create(E.width,E.height),this.theme_target=le.create(E.width,E.height),this.current=this._make(De,n.zero,{}),ve.set_matrix(v.create_scale_v(E.v_screen)),ct.set_matrix(v.create_scale_v(E.v_screen))}_update(){var e,s,i;(e=this._next)==null||e.update(),this.current.update(),(s=this.mask)==null||s.update(),(i=this.mask)!=null&&i.done&&(this.current.dispose(),this.mask.dispose(),this.mask=void 0,this.current=this._next,this._next=void 0)}_draw(e){var s;this._next?(this.current.draw(e),e.render(this.target),e.clear(),this._next.draw(e),e.render(this.target2),e.clear(),this.mask_target.clear(u.hex(16711680)),(s=this.mask)==null||s.draw(e),e.render(this.mask_target),e.clear(),ve.texture=this.target.texture(0),ve.texture2=this.target2.texture(0),ve.mask_texture=this.mask_target.texture(0),ve.render(this.theme_target)):(this.current.draw(e),e.render(this.theme_target),e.clear()),ct.texture=this.theme_target.texture(0),ct.render()}}let H;const oe=class oe extends x{_init(){ie.default_sampler=_e.make(Se.Linear),this.objects=[],Z.load().then(()=>{console.log(Z)}),ke.load().then(()=>{G.language=At.language,H=this.make(wh,n.zero,{})})}_update(){}_draw(){x.next_render_order=0,_.backbuffer.clear(u.black),this._draw_children(ie),Ye._sort_hooks()}};l(oe,"width",1920),l(oe,"height",1080),l(oe,"v_screen",n.make(oe.width,oe.height));let E=oe;const kh=t=>{let a=new E;_.run({name:"solitaire23",width:1920,height:1080,on_startup(){a.init()},on_update(){Ye.update(),a.update()},on_render(){a.draw(ie)}}),_.canvas&&t.appendChild(_.canvas),Ye.listen(t)};kh(document.getElementById("app"));
